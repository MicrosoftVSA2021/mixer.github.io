var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var MixerPlayer=function(t){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function k(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u,e,c,n,x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function A(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})}function N(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}(e=u||(u={})).HLS="hls",e.FTL="ftl",e.DASH="dash",e.NONE="none",(n=c||(c={}))[n.QDEFAULT=0]="QDEFAULT",n[n.QDEFAULT480P=1]="QDEFAULT480P",n[n.Q480PANDLOWER=2]="Q480PANDLOWER",n[n.Q480PONLY=3]="Q480PONLY",n[n.QLOWTOHIGH=4]="QLOWTOHIGH";var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t){return e(t={exports:{}},t.exports),t.exports}var a=s(function(e){var t,n;t=i,n=function(){var T=!0;function s(n){function e(e){var t=n.match(e);return t&&1<t.length&&t[1]||""}function t(e){var t=n.match(e);return t&&1<t.length&&t[2]||""}var r,i=e(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(n)&&/android/i.test(n),s=/nexus\s*[0-6]\s*/i.test(n),a=!s&&/nexus\s*[0-9]+/i.test(n),u=/CrOS/.test(n),c=/silk/i.test(n),l=/sailfish/i.test(n),d=/tizen/i.test(n),p=/(web|hpw)(o|0)s/i.test(n),h=/windows phone/i.test(n),f=(/SamsungBrowser/i.test(n),!h&&/windows/i.test(n)),m=!i&&!c&&/macintosh/i.test(n),g=!o&&!l&&!d&&!p&&/linux/i.test(n),y=t(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),v=e(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(n)&&!/tablet pc/i.test(n),_=!b&&/[^-]mobi/i.test(n),S=/xbox/i.test(n);/opera/i.test(n)?r={name:"Opera",opera:T,version:v||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(n)?r={name:"Opera",opera:T,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||v}:/SamsungBrowser/i.test(n)?r={name:"Samsung Internet for Android",samsungBrowser:T,version:v||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(n)?r={name:"NAVER Whale browser",whale:T,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(n)?r={name:"MZ Browser",mzbrowser:T,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(n)?r={name:"Opera Coast",coast:T,version:v||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(n)?r={name:"Focus",focus:T,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(n)?r={name:"Yandex Browser",yandexbrowser:T,version:v||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(n)?r={name:"UC Browser",ucbrowser:T,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(n)?r={name:"Maxthon",maxthon:T,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(n)?r={name:"Epiphany",epiphany:T,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(n)?r={name:"Puffin",puffin:T,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(n)?r={name:"Sleipnir",sleipnir:T,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(n)?r={name:"K-Meleon",kMeleon:T,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:h?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:T}).version=y?(r.msedge=T,y):(r.msie=T,e(/iemobile\/(\d+(\.\d+)?)/i)):/msie|trident/i.test(n)?r={name:"Internet Explorer",msie:T,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?r={name:"Chrome",osname:"Chrome OS",chromeos:T,chromeBook:T,chrome:T,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(n)?r={name:"Microsoft Edge",msedge:T,version:y}:/vivaldi/i.test(n)?r={name:"Vivaldi",vivaldi:T,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||v}:l?r={name:"Sailfish",osname:"Sailfish OS",sailfish:T,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(n)?r={name:"SeaMonkey",seamonkey:T,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(n)?(r={name:"Firefox",firefox:T,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(n)&&(r.firefoxos=T,r.osname="Firefox OS")):c?r={name:"Amazon Silk",silk:T,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(n)?r={name:"PhantomJS",phantom:T,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(n)?r={name:"SlimerJS",slimer:T,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(n)||/rim\stablet/i.test(n)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:T,version:v||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(r={name:"WebOS",osname:"WebOS",webos:T,version:v||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(n)&&(r.touchpad=T)):/bada/i.test(n)?r={name:"Bada",osname:"Bada",bada:T,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:d?r={name:"Tizen",osname:"Tizen",tizen:T,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/qupzilla/i.test(n)?r={name:"QupZilla",qupzilla:T,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||v}:/chromium/i.test(n)?r={name:"Chromium",chromium:T,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||v}:/chrome|crios|crmo/i.test(n)?r={name:"Chrome",chrome:T,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?r={name:"Android",version:v}:/safari|applewebkit/i.test(n)?(r={name:"Safari",safari:T},v&&(r.version=v)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},v&&(r.version=v)):r=/googlebot/i.test(n)?{name:"Googlebot",googlebot:T,version:e(/googlebot\/(\d+(\.\d+))/i)||v}:{name:e(/^(.*)\/(.*) /),version:t(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(n)?(/(apple)?webkit\/537\.36/i.test(n)?(r.name=r.name||"Blink",r.blink=T):(r.name=r.name||"Webkit",r.webkit=T),!r.version&&v&&(r.version=v)):!r.opera&&/gecko\//i.test(n)&&(r.name=r.name||"Gecko",r.gecko=T,r.version=r.version||e(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!o&&!r.silk?!r.windowsphone&&i?(r[i]=T,r.ios=T,r.osname="iOS"):m?(r.mac=T,r.osname="macOS"):S?(r.xbox=T,r.osname="Xbox"):f?(r.windows=T,r.osname="Windows"):g&&(r.linux=T,r.osname="Linux"):(r.android=T,r.osname="Android");var E="";r.windows?E=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?E=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?E=(E=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):i?E=(E=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?E=e(/android[ \/-](\d+(\.\d+)*)/i):r.webos?E=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?E=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?E=e(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(E=e(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(r.osversion=E);var w=!r.windows&&E.split(".")[0];return b||a||"ipad"==i||o&&(3==w||4<=w&&!_)||r.silk?r.tablet=T:(_||"iphone"==i||"ipod"==i||o||s||r.blackberry||r.webos||r.bada)&&(r.mobile=T),r.msedge||r.msie&&10<=r.version||r.yandexbrowser&&15<=r.version||r.vivaldi&&1<=r.version||r.chrome&&20<=r.version||r.samsungBrowser&&4<=r.version||r.whale&&1===I([r.version,"1.0"])||r.mzbrowser&&1===I([r.version,"6.0"])||r.focus&&1===I([r.version,"1.0"])||r.firefox&&20<=r.version||r.safari&&6<=r.version||r.opera&&10<=r.version||r.ios&&r.osversion&&6<=r.osversion.split(".")[0]||r.blackberry&&10.1<=r.version||r.chromium&&20<=r.version?r.a=T:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=T:r.x=T,r}var a=s("undefined"!=typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function I(e){for(var n=Math.max(r(e[0]),r(e[1])),t=i(e,function(e){var t=n-r(e);return i((e+=new Array(t+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--n;){if(t[0][n]>t[1][n])return 1;if(t[0][n]!==t[1][n])return-1;if(0===n)return 0}}function o(e,t,n){var r=a;"string"==typeof t&&(n=t,t=void 0),void 0===t&&(t=!1),n&&(r=s(n));var i=""+r.version;for(var o in e)if(e.hasOwnProperty(o)&&r[o]){if("string"!=typeof e[o])throw new Error("Browser version in the minVersion map should be a string: "+o+": "+String(e));return I([i,e[o]])<0}return t}return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=I,a.check=function(e,t,n){return!o(e,t,n)},a._detect=s,a.detect=s,a},e.exports?e.exports=n():t.bowser=n()}).detect,O="undefined"!=typeof document,l=function(r){return new Promise(function(e,t){var n=document.createElement("script");n.src=r,n.async=!0,n.onload=function(){return e()},n.onerror=function(e){return t(e)},document.head.appendChild(n)})},d=O?a(navigator.userAgent):{name:"mobile",osname:"mobile",osversion:"react-native",version:"react-native"};function p(){try{var e=navigator.userAgent||"",t=/; wv/.test(e);return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e)||t}catch(e){return!1}}function h(e){return O&&"mobile"===e}function f(){var e=navigator.userAgent||"";return/SamsungBrowser/i.test(e)}function L(e,t,n){var r=e,i="";return e.includes("#")&&(i=e.substr(e.indexOf("#"),e.length-1),r=e.replace(i,"")),e.includes("?")?"?"!==e.charAt(e.length-1)&&(r+="&"):r+="?",(r+=encodeURIComponent(t)+"="+encodeURIComponent(""+n))+i}function m(e){try{var t=e.split(".");return[t[0]||"unknown",t[1]||"unknown"]}catch(e){return["unknown","unknown"]}}function M(e){if(e){if(/^en[-_]*(au|bz|ca|gb|ie|jm|nz|us|tt|za)?$/i.test(e)||/^english$/i.test(e)||"eng"===e)return"English";if(/^es[-_]*(ar|bo|cr|co|cl|do|ec|es|gt|hn|mx|ni|pa|pe|pr|py|sv|uy|ve)?$/i.test(e)||/^spanish$/i.test(e)||"spa"===e)return"Español";if(/^fr[-_]*(be|ca|ch|fr|lu)?$/i.test(e)||/^french$/i.test(e)||"fra"===e)return"Français";if(/^de[-_]*(at|ch|de|li|lu)?$/i.test(e)||/^german$/i.test(e)||"deu"===e)return"Deutsch";if(/^pt[-_]*(br)?$/i.test(e)||/^portuguese$/i.test(e)||"por"===e)return"Português";if(/^it[-_]*(ch|it)?$/i.test(e)||/^italian$/i.test(e)||"ita"===e)return"Italiano";if(/^zh[-_]*(cn|hk|sg|tw)?$/i.test(e)||/^chinese$/i.test(e))return"中文";if(/^ja[-_]*(jp)?$/i.test(e)||/^japanese$/i.test(e))return"日本語";if(/^nl[-_]*(be)?$/i.test(e)||/^dutch$/i.test(e))return"Nederlands";if(/^sv[-_]*(fi)?$/i.test(e)||/^swedish$/i.test(e))return"Svenska";if(/^no$/i.test(e)||/^norwegian$/i.test(e))return"Norsk";if(/^tng$/i.test(e)||/^descriptive audio$/i.test(e))return"Descriptive Audio"}return e}var g,y,v,b,_,S,E=function(t){return function(e){return t.reduce(function(e,t){return e&&Object.getOwnPropertyDescriptor(e,t)?e[t]:null},e)}},w=function(e,t){var n=Array.from(e.textTracks).filter(function(e){return"captions"===e.kind||"subtitles"===e.kind});return n&&0<n.length?(n[0].mode=t?"showing":"disabled",t):!t},T="Not Available",I=["p","l","a","y","a","z","$","$","$"],C=["GamepadLeftTrigger","GamepadRightTrigger","GamepadLeftTrigger","GamepadRightTrigger","GamepadLeftTrigger","GamepadRightTrigger","GamepadRightShoulder"],D=function(e){void 0===e&&(e=0);var t=document.querySelector(".debug-menu-sdk-input");t&&setTimeout(function(){return t.focus()},e)},X=X||{},j=X;for(var P in X.isInitialized=!1,X.verbosityLevels={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},X.behavior={UNDEFINED:0,NAVIGATIONBACK:1,NAVIGATION:2,NAVIGATIONFORWARD:3,APPLY:4,REMOVE:5,SORT:6,EXPAND:7,REDUCE:8,CONTEXTMENU:9,TAB:10,COPY:11,EXPERIMENTATION:12,PRINT:13,SHOW:14,HIDE:15,MAXIMIZE:16,MINIMIZE:17,BACKBUTTON:18,STARTPROCESS:20,PROCESSCHECKPOINT:21,COMPLETEPROCESS:22,SCENARIOCANCEL:23,DOWNLOADCOMMIT:40,DOWNLOAD:41,SEARCHAUTOCOMPLETE:60,SEARCH:61,SEARCHINITIATE:62,TEXTBOXINPUT:63,PURCHASE:80,ADDTOCART:81,VIEWCART:82,ADDWISHLIST:83,FINDSTORE:84,CHECKOUT:85,REMOVEFROMCART:86,PURCHASECOMPLETE:87,VIEWCHECKOUTPAGE:88,VIEWCARTPAGE:89,VIEWPDP:90,UPDATEITEMQUANTITY:91,INTENTTOBUY:92,PUSHTOINSTALL:93,SIGNIN:100,SIGNOUT:101,SOCIALSHARE:120,SOCIALLIKE:121,SOCIALREPLY:122,CALL:123,EMAIL:124,COMMUNITY:125,VOTE:140,SURVEYINITIATE:141,SURVEYCOMPLETE:142,REPORTAPPLICATION:143,REPORTREVIEW:144,SURVEYCHECKPOINT:145,CONTACT:160,REGISTRATIONINITIATE:161,REGISTRATIONCOMPLETE:162,CANCELSUBSCRIPTION:163,RENEWSUBSCRIPTION:164,CHANGESUBSCRIPTION:165,REGISTRATIONCHECKPOINT:166,CHATINITIATE:180,CHATEND:181,TRIALSIGNUP:200,TRIALINITIATE:201,PARTNERREFERRAL:220,VIDEOSTART:240,VIDEOPAUSE:241,VIDEOCONTINUE:242,VIDEOCHECKPOINT:243,VIDEOJUMP:244,VIDEOCOMPLETE:245,VIDEOBUFFERING:246,VIDEOERROR:247,VIDEOMUTE:248,VIDEOUNMUTE:249,VIDEOFULLSCREEN:250,VIDEOUNFULLSCREEN:251,VIDEOREPLAY:252,VIDEOPLAYERLOAD:253,VIDEOPLAYERCLICK:254,VIDEOVOLUMECONTROL:255,VIDEOAUDIOTRACKCONTROL:256,VIDEOCLOSEDCAPTIONCONTROL:257,VIDEOCLOSEDCAPTIONSTYLE:258,VIDEORESOLUTIONCONTROL:259,VIRTUALEVENTJOIN:260,VIRTUALEVENTEND:261,IMPRESSION:280,CLICK:281,RICHMEDIACOMPLETE:282,ADBUFFERING:283,ADERROR:284,ADSTART:285,ADCOMPLETE:286,ADSKIP:287,ADTIMEOUT:288,OTHER:300},X.behaviorKeys=[],X.behavior)X.behaviorKeys.push(P);X.actionType={CLICKLEFT:"CL",CLICKRIGHT:"CR",CLICKMIDDLE:"CM",SCROLL:"S",ZOOM:"Z",RESIZE:"R",KEYBOARDENTER:"KE",KEYBOARDSPACE:"KS",OTHER:"O"},X.cookie=function(){function s(e,t){for(var n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);var o=i.split("=");if(a(o.shift())===e&&o[0].indexOf(t)==(X.utils.isValueAssigned(t)?0:-1))return a(o.join("="))}}function a(e){var t=decodeURIComponent(e.replace("/+/g"," "));return 0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t}function t(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toUTCString()}else r="";window.document.cookie=e+"="+t+r+"; path=/;"}return{getCookie:s,getCookieKeyValue:function(e,t){var n=s(e);if(n&&t)for(var r=n.split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]&&t.toLowerCase()===o[0].toLowerCase())return o[1]}},getAllCookies:function(){for(var e=document.cookie.split(";"),t={},n=0;n<e.length;n++){for(var r=e[n];" "===r.charAt(0);)r=r.substring(1);var i=r.split("="),o=a(i.shift());("MSFPC"!=o||"MSFPC"===o&&i[0].indexOf("GUID")==(X.utils.isValueAssigned("GUID")?0:-1))&&(t[o]=a(i.join("=")))}return t},setCookie:t,deleteCookie:function(e){t(e,"",-1)}}}(),X.cv=function(){var n="",r=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={maxCorrelationVectorLength:63,baseLength:16};s.validationPattern=new RegExp("^["+i+"]{"+s.baseLength.toString()+"}(.[0-9]+)+$");var a={maxCorrelationVectorLength:127,baseLength:22};a.validationPattern=new RegExp("^["+i+"]{"+a.baseLength.toString()+"}(.[0-9]+)+$");var o=a,u=2;function c(){return n.concat(".",r.toString())}function t(){var e=c();if(p(e))return e}function e(){var e=c();return!!p(e)&&h(e.length+2)}function l(){return!!p(c())&&h(n.length+1+(r+1+"").length)}function d(e){if(!p(e))return X.logger.logWarning("Cannot set invalid correlation vector value"),null;var t=e.lastIndexOf(".");return n=e.substr(0,t),r=parseInt(e.substr(t+1),10),c()}function p(e){if(e){var t=e.split(".")[0];if(t){if(16===t.length)return u=1,function(e){if(s.validationPattern.test(e)&&e.length<=s.maxCorrelationVectorLength)return!0}(e);if(22===t.length)return u=2,function(e){if(a.validationPattern.test(e)&&e.length<=a.maxCorrelationVectorLength)return!0}(e)}}}function h(e){return 1===u?e<=s.maxCorrelationVectorLength:e<=a.maxCorrelationVectorLength}return{header:"MS-CV",tag:"cV",isInit:function(){return p(c())},canExtend:e,canIncrement:l,getValue:t,setValue:d,init:function(e){return e?d(e):(n=function(){for(var e="",t=0;t<o.baseLength;t++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}(),r=0,t())},extend:function(){if(e())return n=n.concat(".",r.toString()),r=0,c()},increment:function(){if(l())return r+=1,c()},incrementExternal:function(e){if(p(e)){var t=e.split("."),n=t.length;t[n-1]=(parseInt(t[n-1],10)+1).toString();for(var r="",i=0;i<n;i++)r+=t[i],i<n-1&&(r+=".");var o=t[0].length===a.baseLength?a.maxCorrelationVectorLength:s.maxCorrelationVectorLength;if(r.length<=o)return r}},isValid:p,useCv1:function(){o=s},useCv2:function(){o=a}}}(),X.logger={logError:function(e){X.consoleVerbosity>=X.verbosityLevels.ERROR&&console&&console.error&&console.error("JSLL: "+e)},logWarning:function(e){X.consoleVerbosity>=X.verbosityLevels.WARNING&&console&&console.warn&&console.warn("JSLL: "+e)},logInformation:function(e){X.consoleVerbosity>=X.verbosityLevels.INFORMATION&&console&&console.log&&console.log("JSLL: "+e)}},X.capabilitiesCheck=function(){if(!JSON||!JSON.stringify)return X.logger.logError("Unable to write event: the global JSON.stringify method does not exist"),X.isAvailable=!1},X.utils=function(){var t="",e="",i=window.performance?window.performance.timing:void 0,n="";function r(){return""===e&&(e=window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),e}function o(e,t){var n=e.left,r=e.top,i=e.right,o=e.bottom,s=t.left,a=t.top,u=t.right,c=t.bottom;return Math.max(0,Math.min(i,u)-Math.max(n,s))*Math.max(0,Math.min(o,c)-Math.max(r,a))}function s(e){return"function"==typeof jQuery&&e instanceof jQuery?e[0]:e}function a(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var u=function(){var n={},r=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(r=arguments[0],e++);for(var i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r&&"[object Object]"===Object.prototype.toString.call(e[t])?n[t]=u(!0,n[t],e[t]):n[t]=e[t])};e<t;e++){i(arguments[e])}return n};function c(e,t){var n=e;if(n){for(n=s(n);!t(n);)if(!(n=s(n=n.parentNode))||!n.getAttribute)return null;return n}}function l(e){var t=e.getAttribute(n);return h(t)||""===t}function d(e){return"A"===e.nodeName}function p(e){for(var t in e)(!h(e[t])||"{}"===JSON.stringify(e[t])&&"callback"!==t)&&delete e[t]}function h(e){return!(null==e||""===e)}return{stringifyField:function(t,n){if(n)try{var e=JSON.stringify(n);return"{}"===e&&"timing"===t?function(){for(var e=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],t="{",n=0;n<e.length;n++){var r=i[e[n]];h(r)&&(t+='"'+e[n]+'":'+r,n<e.length-1&&(t+=","))}return t+="}"}():e}catch(e){var r="string"==typeof n?n:"";return'{"error": "ERROR: could not stringify {0} {1}"}'.replace("{0}",t).replace("{1}",r)}},getMuidHost:function(e){return{"microsoft.com":"c1.microsoft.com","xbox.com":"c.xbox.com","live.com":"c.live.com","microsoftstore.com":"c.microsoftstore.com","msn.com":"c.msn.com","windows.com":"c.windows.com"}[e]},isOfCorrectType:function(e,t){if("string"===e)return"string"==typeof t||t instanceof String||t instanceof Date;if("bool"===e)return"boolean"==typeof t||t instanceof Boolean;if(!("number"==typeof t||t instanceof Number))return!1;if("uint8"===e){if(t<0||255<t||t%1!=0)return!1}else if("uint16"===e){if(t<0||65535<t||t%1!=0)return!1}else if("uint32"===e){if(t<0||4294967295<t||t%1!=0)return!1}else if("uint64"===e){if(t<0||0x10000000000000000<t||t%1!=0)return!1}else if("int8"===e){if(t<-128||127<t||t%1!=0)return!1}else if("int16"===e){if(t<-32768||32767<t||t%1!=0)return!1}else if("int32"===e){if(t<-2147483648||2147483647<t||t%1!=0)return!1}else if("int64"===e){if(t<-0x8000000000000000||0x8000000000000000<t||t%1!=0)return!1}else if("float"===e){if(t<-3402823e32||3402823e32<t)return!1}else if("double"===e&&(t<-Number.MAX_VALUE||t>Number.MAX_VALUE))return!1;return!0},getOs:function(){if(""===t){var e=r().toLowerCase();t=-1!==e.indexOf("windows phone")?"WindowsPhone":-1!==e.indexOf("win")?"Windows":-1!==e.indexOf("mac")?"MacOS":-1!==e.indexOf("x11")?"Unix":-1!==e.indexOf("android")?"Android":-1!==e.indexOf("linux")?"Linux":-1!==e.indexOf("webos")?"webOS":-1!==e.indexOf("blackberry")?"BlackBerry":-1!==e.indexOf("ipod")||-1!==e.indexOf("ipad")||-1!==e.indexOf("iphone")?"iOS":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("nokia")?"Nokia":"Unknown"}return t},getUserAgent:r,extractFieldFromObject:function(e,t){var n;return e&&e[t]&&(n=e[t],delete e[t]),n},isElementTrulyVisible:function(e,t){return 0<o((e=s(e)).getBoundingClientRect(),t)},dateToISOString:function(e){return e.getUTCFullYear()+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},extend:u,returnDomObjectIfjQuery:s,findClosestByAttribute:function(e,t){return n=t,c(e,l)},findClosestAnchor:function(e){return c(e,d)},getPerformanceData:function(){var e;try{e=window.performance.getEntries().filter(function(e){return"script"===e.initiatorType||"link"===e.initiatorType})}catch(e){}return e},getPageLoadTime:function(){var e=void 0;return i.loadEventStart&&i.navigationStart&&0<i.loadEventStart&&(e=i.loadEventStart-i.navigationStart),e},removeInvalidElements:p,removeNonObjectsAndInvalidElements:function(e,t){for(var n in p(e),t){var r=t[n];"object"==typeof e[r]?p(e[r]):delete e[r]}},bracketIt:function(e){return"["+e+"]"},getAppIdWithPrefix:function(e){var t;if(e){var n=e.split(":");t=1<n.length&&"js"===n[0].toLowerCase()?e:"JS:"+e}return t},isValueAssigned:h,testHook:{getIntersectionArea:o}}}(),X.ids=function(){var t,e=c(),n=X.cookie,r=null,i=null,o=!1,s="Treatments",a=["c:","i:","w:"],u=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function c(){return"xxxxxxxx-xxxx-4xxx-Rxxx-xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}).replace("R",(8|Math.floor(3*Math.random())).toString(16))}function l(e){return e?e[s]:n.getCookie(s)}function d(e){if(!e||e.length<4)return!1;for(var t=!1,n=e.substring(0,3).toString().toUpperCase(),r=0;r<u.length;r++)if(u[r]+":"===n&&e.length<=256){t=!0;break}return t}function p(e){if(e){if(e!==i){i=null;for(var t=e.split(","),n=0;n<t.length;n++)d(t[n])?i?i+=","+t[n]:i=t[n]:X.logger.logWarning("Unsupported flight id format for this app expId: "+t[n])}}else i=null}function h(){return i}return{getVisitorId:function(e){return e?e.MUID:n.getCookie("MUID")},getMuidUserId:function(e){var t="";return(t=e?e.MUID:n.getCookie("MUID"))&&t.length?"t:"+t:t},setAppUserId:function(e){if(r=null,e){for(var t=0;t<a.length;t++)if(a[t]===e.substring(0,2)){r=e;break}r||X.logger.logWarning("Unsupported app user id: "+e+". Supported app user ids are: c:, i:, and w:")}},getAppUserId:function(){return r},readExpIdFromCookie:function(e){return p(e?e[s]:l()),h()},readExpIdFromCoreData:function(e){return p(e),h()},getImpressionGuid:function(){return e},getPageViewImpressionGuid:function(){return o?e=c():o=!0,e},getGroups:l,setDeviceClass:function(e){e&&(t=e)},getDeviceClass:function(){return t},setExpIdCookieName:function(e){s=e},getExpIdCookieName:function(){return s}}}(),X.vortexEvents=function(){var n=X.ids,r=[],i="notInit",o=0;function s(){0<r.length&&(X.writeEvent(r),r=[])}return{sendError:function(e,t){X.ct.captureClientError({errorInfo:e,displayedToUser:t})},sendApiComplete:function(e){var t={name:"Ms.Webi.OutgoingRequest",cV:e.cV,data:{baseData:{operationName:e.currentOperationName,targetUri:e.requestUri,latencyMs:e.latencyMs,serviceErrorCode:e.serviceErrorCode||-1,succeeded:e.isSuccess,requestMethod:e.httpMethod,responseContentType:e.contentType,protocolStatusCode:e.httpStatusCode,dependencyOperationName:e.operationName,dependencyOperationVersion:e.operationVersion,dependencyName:e.serviceName,dependencyType:e.serviceType||"WebService",responseSizeBytes:e.responseSize},baseType:"Ms.Qos.OutgoingServiceRequest",impressionGuid:n.getImpressionGuid(),message:e.errorMessage,retryCount:e.retryCount,customData:e.customData}};X.ct.captureQos(t)},sendJsllEvent:function(e){"CorsDisallowed"===e.type?X.ct.captureCorsDisallowed(e):"EventTooLong"===e.type&&X.ct.captureEventTooLong(e)},SendOrScheduleEvent:function(e,t){!0!==t&&"complete"!==i?(r.push(e),1<o&&r.length>=o&&s()):X.writeEvent(e)},batchQueuedEvents:s,drainQueuedEvents:function(){if("complete"===document.readyState)for(;0<r.length;)X.writeEvent(r.pop());else X.ct.onDomReadyDo(X.firstEventDoneTasks)},batchEventsByNumber:function(e){o=e},addEventToQueue:function(e){r.push(e)},overrideQueueBehavior:function(e){e&&e.domReadyState&&(i=e.domReadyState)}}}(),X.errorHandler=function(){var i=X.vortexEvents;function n(){if(arguments){var e="";if(arguments[1]){var t=document.createElement("a");t.href=arguments[1],e=X.ct.getUri(t)}var n={Page:X.ct.getUri(document.location),Script:e,Message:arguments[0]||"",LineNumber:arguments[2]||0,StackTrace:arguments[4]?(r=arguments[4],r.stack?r.stack.substring(0,1e3):""):"",UserAgent:X.utils.getUserAgent()||"",Platform:window.navigator.platform||""};i.sendError(n,!1)}var r}return{init:function(){var e,t;e=n,t=window.onerror,window.onerror=function(){t&&t.apply(this,arguments),e.apply(this,arguments)}}}}(),X.timespanHandler=(g={},{recordTimeSpan:function(e,t){var n=(new Date).getTime();if(t)return n-g[e];g[e]=n}}),function(){X._schemas=X._schemas||[];var h=X.utils,g=h.isValueAssigned,y={endpoint:"http://web.archive.org/web/20190528235110/https://web.vortex.data.microsoft.com/collect/v1",sendMode:1,batchSize:10,authMethod:0,validateEvents:!0,sendEvents:!0,logLevel:X.verbosityLevels.NONE,syncMuid:!1,provisionMsfpc:!0,useDefaultContentName:!0,useShortNameForContentBlob:!1,debounceMs:{scroll:600,resize:3e3},muidDomain:"microsoft.com",biBlobAttributeTag:"data-m",isLoggedIn:!1,shareAuthStatus:!1,cookiesToCollect:["Bounced"],mscomCookies:!1,userConsentCookieName:"MSCC",userConsented:void 0,useBeacon:!0,urlCollectHash:!1,urlCollectQuery:!0,initCv:!1,enabledFeatures:!0,ix:{a:!1,g:!1},autoCapture:{pageView:!0,onLoad:!0,onUnload:!0,click:!0,scroll:!1,resize:!1,jsError:!0,addin:!0,perf:!0,assets:!1,lineage:!1,invalidEvents:!1,msTags:!0,awaTags:!0,eventTooLong:!0,corsDisallowed:!0},callback:{pageName:null,pageActionPageTags:null,pageViewPageTags:null,contentUpdatePageTags:null,pageActionContentTags:null,signedinStatus:null,jsllEventCallback:null,pageUnloadTimings:null},coreData:{referrerUri:document.referrer||void 0,requestUri:"",appId:window.location.hostname,pageName:"",title:"",pageType:"",env:"",product:"",market:"",serverImpressionGuid:"",expId:"",pageTags:{}}};X.getConfig=function(){return y};var n=[];for(var e in y)"object"==typeof y[e]&&n.push(e);var p=["ver","name","time","flags","os","appId","cV","deviceClass"],f=p.length,v=function(){var e=h.getUserAgent(),t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10)<9;return!1}()?2083:15e3,m="",b=!1,_=g(navigator)&&g(navigator.sendBeacon);X.experimentIdTag="expId",X.isAvailable=!0,X.requestBody="",X.getQueryStringParameters=function(){return m},Object.freeze&&Object.freeze(X.verbosityLevels),X.capabilitiesCheck();var S=window.XDomainRequest?"XDomainRequest":"xhr",E=function(){b=!0,1==y.sendMode&&(X.vortexEvents.overrideQueueBehavior({domReadyState:"complete"}),X.vortexEvents.drainQueuedEvents())};X.firstEventDone=E,X.firstEventDoneTasks=function(){X.vortexEvents.drainQueuedEvents()};var i=function(e,t){X.logger.logError("Failure sending data to vortex: "+e+"Error: "+t.toString())},w=function(e,t,n){X.OnSuccessfulVortexRequest&&X.OnSuccessfulVortexRequest(e),t&&"function"==typeof y.callback.jsllEventCallback&&y.callback.jsllEventCallback(t),!1===b&&(b=!0,1!==y.sendMode||n||E()),X.logger.logInformation("Success sending data to vortex")},o=function(e){X.logger.logError("Failure sending data to vortex using XDomainRequest.  Status code:"+e.status)},s="'",a='"';function T(e,t,n){if(g(n)){var r="";return 0<e.length&&(r+="&"),h.isOfCorrectType("number",n)||h.isOfCorrectType("bool",n)?r+=t+"="+n:r+="object"==typeof n?t+"="+JSON.stringify(n):t+"="+s+encodeURIComponent(n)+s,r}return""}function u(e,t,n){if(g(n)){var r="";return 1<e.length&&(r+=","),h.isOfCorrectType("number",n)||h.isOfCorrectType("bool",n)?r+=a+t+a+":"+n:r+="object"==typeof n?a+t+a+":"+JSON.stringify(n):a+t+a+":"+a+n+a,r}return""}function I(e,t){for(var n="",r=0;r<f;r++)n+=T(n,p[r],e[p[r]]);var i=e.data;for(var o in i)if("baseData"==o){var s=i[o];for(var a in s)n+=T(n,"-"+a,s[a])}else n+=T(n,"*"+o,i[o]);var u=e.ext;for(var c in u){var l=u[c];for(var d in l)n+=T(n,"ext-"+c+"-"+d,l[d])}return n+="&"+k(),!0===y.shareAuthStatus&&2==y.authMethod&&!0===O()&&(n+="&"+("$nr="+g(t.Bounced))),m=n,n}function c(e){for(var t="{",n=0;n<f;n++)t+=u(t,p[n],e[p[n]]);var r=e.data;r&&(t+=u(t,"data",r));var i=e.ext;return i&&(t+=u(t,"ext",i)),t+="}",X.requestBody=t}X.init=function(e){if(!X.isInitialized){X.isInitialized=!0,e&&(h.removeNonObjectsAndInvalidElements(e,n),y=h.extend(!0,y,e));var t=y.sendMode;0==t&&(b=!0,X.vortexEvents.overrideQueueBehavior({domReadyState:"complete"})),1<=t&&X.vortexEvents.overrideQueueBehavior({domReadyState:"notComplete"}),2===t&&X.vortexEvents.batchEventsByNumber(y.batchSize),X.consoleVerbosity=y.logLevel,X.ct.initialize(y),X.ix.init(y),y.initCv&&X.cv.init()}};var C=function(e,t){X.translateEventFromIntermediateStructure&&(e=X.translateEventFromIntermediateStructure(e));var n=e.cV,r=e.appId;e.ver="2.1",e.cV=g(n)?n:X.cv.getValue(),e.time=g(e.time)?e.time:h.dateToISOString(new Date),e.os=h.getOs(),e.deviceClass=X.ids.getDeviceClass()||void 0,e.appId=h.getAppIdWithPrefix(r||y.coreData.appId);var i=window.location.hostname;g(i)||(i="file:"==window.location.protocol?"local":i);var o={ver:"1.1",libVer:"4.2.9",domain:i,msfpc:t.MSFPC,userConsent:g(y.userConsented)?y.userConsented:!!g(t[y.userConsentCookieName]),anid:t.ANON?t.ANON.slice(0,34):void 0},s=e.serviceName?e.serviceName:y.coreData.serviceName;s&&(o.serviceName=s),e.ext?e.ext.javascript=o:e.ext={javascript:o};var a=X.ids.getMuidUserId(t);a&&(e.ext.user={localId:a});var u=y.coreData.env,c=e.ext.app?e.ext.app.env:void 0,l=g(c)?c:u,d=y.coreData.expId?X.ids.readExpIdFromCoreData(y.coreData.expId):X.ids.readExpIdFromCookie(t),p=X.ids.getAppUserId();return(g(l)||g(d)||g(p))&&(e.ext.app||(e.ext.app={}),l&&(e.ext.app.env=l),d&&(e.ext.app.expId=d),p&&(e.ext.app.userId=p)),y.validateEvents&&X.isEventValid&&!X.isEventValid(e)?void 0:(X._validateAndTranslateEvent(e),e)};function A(e,t){var n=new Image;n.onload=function(){1===n.width&&w(e,t)},n.onerror=function(){X.logger.logWarning("Telemetry image beacon not sent properly. Sending through POST."),x(t)},n.src=e}function l(e){var t="",n="",r="";if(e.length){r=e[0].ext.javascript.msfpc;for(var i=0;i<e.length;i++)0<i&&(t+="\n"),t+=c(e[i])}else r=e.ext.javascript.msfpc,t=c(e);var o=y.endpoint+"/t.req?"+t;n="?"+k();return{qp:n+=g(r)?"&ext-javascript-msfpc="+encodeURIComponent(s+r+s):"",requestBody:t,requestSrc:o}}function k(){return"$mscomCookies="+y.mscomCookies}function x(e){var t=l(e);if("xhr"===S){var n=new XMLHttpRequest;n.open("POST",y.endpoint+t.qp,!0),n.withCredentials=!0,n.onload=function(){200===n.status?w(t.requestSrc,e):i(n.statusText,n.status)},n.onerror=function(){i(n.statusText,n.status)},n.send(t.requestBody)}else if("XDomainRequest"===S){var r=new window.XDomainRequest;r.onload=function(){w(t.requestSrc,e)},r.onerror=function(){o(r)},r.open("POST",y.endpoint),r.send(t.requestBody)}else X.logger.logError("No event is sent.")}function N(e){var t=l(e);navigator.sendBeacon(y.endpoint+t.qp,t.requestBody)?w(t.requestSrc,e):x(e)}function O(){return y.callback&&"function"==typeof y.callback.signedinStatus?y.callback.signedinStatus():y.isLoggedIn}X.writeEvent=function(e,t){if(X.isInitialized){var n,r,i,o,s,a=!0,u=X.cookie.getAllCookies(),c=g(u.MSFPC);if("[object Array]"===Object.prototype.toString.call(e)){for(var l=[],d=0;d<e.length;d++){var p=C(e[d],u);p&&l.push(p)}if(0==l.length)return;e=l,a=!1}else if(!(e=C(e,u)))return;if(y.sendEvents){var h=JSON.stringify(e).length+y.endpoint.length;if(a&&v<h+7){if(X.logger.logWarning("event is too large to send using get -- using post instead"),y.autoCapture.eventTooLong)(f={}).eventName=e.name,f.payloadLength=h,X.ct.captureEventTooLong(f);a=!1}if(!a&&"XDomainRequest"===S&&y.endpoint&&0!==y.endpoint.indexOf(window.location.protocol)&&(X.logger.logError("Unable to write event: CORS requests are not supported cross-protocol in this browser"),1)){var f;if(y.autoCapture.corsDisallowed)(f={}).eventName=e.name,f.type="CorsDisallowed",X.ct.captureCorsDisallowed(f);return}if(X.testHook&&1==X.testHook.testUsePost&&(a=!1),a)if(!1===b||y.provisionMsfpc&&!c||!0===y.shareAuthStatus){var m="/t.js";if((c=!0)===y.shareAuthStatus&&!0===O())if(1===y.authMethod){if(g(u.Bounced))return void A(y.endpoint+"/asm.gif?"+I(e,u),e);m="/asm.js"}else 2===y.authMethod&&(m="/asa.js");n=y.endpoint+m+"?"+I(e,u),r=e,i=t,o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,(s=document.createElement("script")).onload=function(){w(n,r,!0)},s.onerror=function(){i?X.logger.logError("No event is sent."):(E(),X.writeEvent(r,!0))},s.async=!0,s.src=n,o.appendChild(s)}else _&&!0===y.useBeacon?N(e):A(y.endpoint+"/t.gif?"+I(e,u),e);else _&&!0===y.useBeacon&&!1===y.shareAuthStatus?N(e):x(e)}else w(I(e,u),e)}else X.vortexEvents.addEventToQueue(e)},X.sendEventThroughIframe=function(e){var t=document.createElement("iframe");t.id="telframe",t.style.display="none",1==y.authMethod&&(t.addEventListener?t.addEventListener("load",E):t.attachEvent("onload",E)),t.src=e,X.cookie.setCookie("Bounced",h.dateToISOString(new Date),.5/24),document.body.appendChild(t)},X._registerSchemas=function(e){for(var t=0;t<e.length;t++)X._schemas[e[t].name]=e[t]},X.console=window.console||{},X.console.fallback=X.console.log||function(){};for(var t=["log","info","warn","error","trace"],r=0;r<t.length;r++){var d=t[r];X.console[d]||(X.console[d]=X.console.fallback)}X.extendCoreData=function(e){h.removeInvalidElements(e),y.coreData=h.extend(!0,y.coreData,e)},X._validateAndTranslateEvent=function(e){return{event:e}},X.testHook={JSLL_VERSION:"4.2.9",defaultConfig:function(){return y},setAllowedGetLength:function(e){v=e},testUsePost:!1,getAllowedGetLength:function(){return v},getQueryFromJSON:I}}(),X._registerSchemas([{name:"Ms.Cll.Javascript.CorsDisallowed","Ms.Cll.Javascript.CorsDisallowed":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.EventTooLong","Ms.Cll.Javascript.EventTooLong":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{req:!0,name:"payloadLength",type:"int32"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.Error","Ms.Telemetry.Error":{part:"B",def:{fields:[{name:"errorName",type:"string"},{name:"errorMessage",type:"string"},{name:"severity",type:"int32"},{name:"errorType",type:"string"},{name:"errorCode",type:"int32"},{name:"lineNumber",type:"uint32"},{name:"isDisplayed",type:"bool"},{name:"errorLocation",type:"string"},{name:"errorMethod",type:"string"}]}},"Ms.Cll.Javascript.Error":{part:"C",def:{fields:[{req:!0,name:"code",type:"int32"},{req:!0,name:"message",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.EventDropped","Ms.Cll.Javascript.EventDropped":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"droppedInfo",type:"string"}]}}},{name:"Ms.Webi.ClientError","Ms.Webi.ClientError":{part:"B",def:{fields:[{req:!0,name:"errorInfo",type:"string"},{name:"wasDisplayed",type:"bool"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"errorName",type:"string"},{name:"errorMessage",type:"string"},{name:"severity",type:"int32"},{name:"errorType",type:"string"},{name:"errorCode",type:"int32"},{name:"lineNumber",type:"uint32"},{name:"isDisplayed",type:"bool"},{name:"errorLocation",type:"string"},{name:"errorMethod",type:"string"}]}}},{name:"Ms.Webi.OutgoingRequest","Ms.Qos.OutgoingServiceRequest":{part:"B",def:{fields:[{req:!0,name:"operationName",type:"string"},{name:"targetUri",type:"string"},{req:!0,name:"latencyMs",type:"int32"},{name:"serviceErrorCode",type:"int32"},{req:!0,name:"succeeded",type:"bool"},{name:"requestMethod",type:"string"},{name:"responseContentType",type:"string"},{name:"protocol",type:"string"},{name:"protocolStatusCode",type:"string"},{req:!0,name:"dependencyOperationName",type:"string"},{name:"dependencyOperationVersion",type:"string"},{req:!0,name:"dependencyName",type:"string"},{name:"dependencyType",type:"string"},{name:"responseSizeBytes",type:"int32"},{name:"requestStatus",type:"int32"}]}},"Ms.Webi.OutgoingRequest":{part:"C",def:{fields:[{name:"impressionGuid",type:"string"},{name:"message",type:"string"},{name:"retryCount",type:"int32"},{name:"customData",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"}]}}},{name:"Ms.Webi.PageView","Ms.Content.PageView":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"referrerUri",type:"string"},{name:"pageType",type:"string"},{name:"pageTags",type:"string"},{name:"product",type:"string"},{name:"screenState",type:"int32"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"resHeight",type:"int32"},{name:"resWidth",type:"int32"},{name:"vpHeight",type:"int32"},{name:"vpWidth",type:"int32"},{name:"market",type:"string"}]}},"Ms.Webi.PageView":{part:"C",def:{fields:[{name:"cookieEnabled",type:"bool"},{name:"flashInstalled",type:"bool"},{name:"flashVersion",type:"string"},{name:"cookies",type:"string"},{name:"isJs",type:"bool"},{name:"title",type:"string"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Webi.ContentUpdate","Ms.Content.ContentUpdate":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"pageTags",type:"string"},{name:"pageHeight",type:"int32"},{name:"vpHeight",type:"int32"},{name:"vpWidth",type:"int32"},{name:"market",type:"string"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"vScrollOffset",type:"int32"},{name:"hScrollOffset",type:"int32"},{name:"contentVer",type:"string"},{req:!0,name:"content",type:"string"}]}},"Ms.Webi.ContentUpdate":{part:"C",def:{fields:[{name:"pageLoadTime",type:"int32"},{name:"title",type:"string"},{name:"isJs",type:"bool"},{name:"cookieEnabled",type:"bool"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"isDomComplete",type:"bool"},{name:"serverImpressionGuid",type:"string"},{name:"timings",type:"string"}]}}},{name:"Ms.Webi.PageAction","Ms.Content.PageAction":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"destUri",type:"string"},{name:"market",type:"string"},{name:"pageType",type:"string"},{name:"pageTags",type:"string"},{name:"product",type:"string"},{name:"screenState",type:"int32"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"contentVer",type:"string"},{name:"content",type:"string"}]}},"Ms.Webi.PageAction":{part:"C",def:{fields:[{name:"timeToAction",type:"int32"},{name:"cookieEnabled",type:"bool"},{name:"cookies",type:"string"},{name:"isJs",type:"bool"},{name:"title",type:"string"},{name:"referrerUri",type:"string"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Webi.PageUnload","Ms.Content.PageUnload":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"}]}},"Ms.Webi.PageUnload":{part:"C",def:{fields:[{name:"dwellTime",type:"int32"},{name:"scrollDepth",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"timings",type:"string"},{name:"vScrollOffset",type:"int32"},{name:"pageHeight",type:"int32"},{name:"vpHeight",type:"int32"},{name:"pageLoadTime",type:"int32"}]}}}]),X.isEventValid=function(e){var r=X.logger.logWarning;function d(e,t){var n=e.eventName+" - "+e.droppedInfo;t?(r("Dropped event "+n),X.ct.captureEventDrop(e)):r("Dropped field from "+n)}function p(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function t(e,t){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i],s=o.name;n.push(s);var a=o.type,u=e[s],c=o.req;if(X.utils.isValueAssigned(u)){if(!X.utils.isOfCorrectType(a,u)){if(d({eventName:h,droppedInfo:"Incorrect type: "+s},c),!0===c)return!1;delete e[s]}}else if(!0===c)return d({eventName:h,droppedInfo:"Missing field: "+s},!0),!1}for(var l in e)"baseData"!=l&&"baseType"!=l&&(p(n,l)||(d({eventName:h,droppedInfo:"Unexpected field "+l},!1),delete e[l]));return!0}if(e){var h=e.name,n=X._schemas,i=e.data.baseType,o=h,s=n[h];if(!s)return d({eventName:h,droppedInfo:"Not registered in JSLL"},!0),!1;if(i){var a=e.data.baseData,u=s[i]?s[i].def.fields:void 0;if(a&&u&&!t(a,u))return!1}if(o){var c=e.data,l=s[o]?s[o].def.fields:void 0;if(c&&l&&!t(c,l))return!1}return!0}return!1},X.translateEventFromIntermediateStructure=function(e){var t=e.name,n=e.data,r=X.utils;if(r.isValueAssigned(n[t])){var i=r.extend(!0,n[t]);delete n[t];var o=[];for(var s in n)o.push(s);var a=r.extend(!0,n[o[0]]);delete n[o[0]],delete e.content;var u=r.extend(!0,"{}"!==JSON.stringify(a)?{baseData:a}:{},i,{baseType:o[0]});return r.extend(!0,e,{data:u})}return e},X.ix=function(){var r={},i="",o="",s=X.utils.isValueAssigned;function a(){return s(i)||s(o)?"http://web.archive.org/web/20190528235110/https://dpm.demdex.net/id?d_orgid=A5FF776A5245AF830A490D44@AdobeOrg&d_cid="+(s(i)?"88170%01"+i+"%010":"")+(s(o)?(s(i)?"%01":"")+"88169%01"+o+"%010":"")+"&d_ver=2":void 0}function u(){if(s(i))return"https://ad.doubleclick.net/ddm/activity/src=6952136;type=store0;cat=jsll;u58="+i+";dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1?"}return{init:function(e){r=e.ix},set:function(e){if(e&&(i=e.mc1,o=e.anid,s(i)||s(o))){if(r.a){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&X.ct.captureSwap(JSON.parse(t.responseText))};var n=a();s(n)&&(t.open("GET",n,!0),t.setRequestHeader("Accept","application/json; charset=utf-8"),t.send())}r.g&&(n=u(),s(n)&&((new Image).src=n))}},testHook:{getAdobeUrl:a,getGoogleUrl:u,setMc1:function(e){i=e},setAnid:function(e){o=e}}}}(),X.ct=function(){var u="1.0",c="2.0",l=200,d=524288,p={},h={},f=X.cookie,s=X.errorHandler,m=X.ids,g=X.vortexEvents,y=X.utils,v=X.actionType,a={h:0,v:0},b="data-bi-dnt",_="data-bi-mto",S=!1,E={longNames:{isShortNames:!1,id:"data-bi-id",areaName:"data-bi-area",slotNumber:"data-bi-slot",contentName:"data-bi-name",contentSource:"data-bi-source",templateName:"data-bi-view",productId:"data-bi-product",contentType:"data-bi-type"},shortNames:{isShortNames:!0,id:"data-bi-id",areaName:"data-bi-an",slotNumber:"data-bi-sn",contentName:"data-bi-cn",contentSource:"data-bi-cs",templateName:"data-bi-tn",productId:"data-bi-pid",contentType:"data-bi-ct"}},w=E.longNames,T={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0};function I(e){if(("http://web.archive.org/web/20190528235110/https://web.vortex.data.microsoft.com"==e.origin||"http://web.archive.org/web/20190528235110/https://login.microsoftonline.com"==e.origin)&&e.data)try{var t=JSON.parse(e.data);if(t&&"firstEventDone"==t.Action&&X.firstEventDone(),t&&t.BouncedCookieExpires){var n="Bounced="+y.dateToISOString(new Date)+"; expires="+new Date(t.BouncedCookieExpires).toUTCString()+"; path=/;";window.document.cookie=n}}catch(e){}}function C(e){/in/.test(document.readyState)?setTimeout(function(){X.ct.onDomReadyDo(e)},100):e.call()}function A(){if(p.callback&&"function"==typeof p.callback.pageName)return p.callback.pageName();if(p.coreData.pageName)return p.coreData.pageName;var e=window.location.pathname,t=e.split("/");return e=2<t.length&&""!==t[2]?t[2]:"Home"}function k(){return p.coreData.title?p.coreData.title:document.title.substring(0,150)}function x(e){var t,n,r,i={A:!0,BUTTON:!0,AREA:!0,INPUT:!0},o=e||window.event,s=o.srcElement||o.target,a={isAuto:!0};if((r=o).which?3===r.which:r.button?2===r.button:void 0){a.actionType=v.CLICKRIGHT;var u=y.findClosestByAttribute(s,"data-bi-bhvr");y.isValueAssigned(u)||(a.behavior=X.behavior.CONTEXTMENU)}else if((n=o).which?1===n.which:n.button?1===n.button:void 0)a.actionType=v.CLICKLEFT;else if(function(e){if(e.keyCode)return 13===e.keyCode}(o))a.actionType=v.KEYBOARDENTER;else if(function(e){if(e.keyCode)return 32===e.keyCode}(o))a.actionType=v.KEYBOARDSPACE;else{if((t=o).which?2!==t.which:!t.button||4!==t.button)return;a.actionType=v.CLICKMIDDLE}for(;s&&s.tagName;){if(i[s.tagName.toUpperCase()]){("INPUT"!==s.tagName.toUpperCase()||T[s.type.toUpperCase()])&&(N(s,_)||D(s,a));break}s=s.parentElement||s.parentNode}}function N(e,t){var n=y.findClosestByAttribute(e,t);return!!y.isValueAssigned(n)}function O(r,i,o){var s;return function(){var e=this,t=arguments,n=!s;clearTimeout(s),s=setTimeout(function(){s=null,i&&i.apply(e,t)},o),n&&r&&r.apply(e,t)}}function L(e){X.timespanHandler.recordTimeSpan("dwellTime",!1),a.v=0,S=!1,e=e||{};var t=f.getAllCookies(),n={},r=X.utils.extend(!0,p.coreData.pageTags);r.metaTags=G(n,!0),B(r,t),"function"==typeof p.callback.pageViewPageTags&&(r=y.extend(!0,r,p.callback.pageViewPageTags()));var i=j(),o={name:"Ms.Webi.PageView",data:{baseData:{ver:u,impressionGuid:m.getPageViewImpressionGuid(),pageName:e.pageName||A(),uri:e.uri||J(),referrerUri:e.referrerUri||p.coreData.referrerUri,market:n.market,pageType:n.pageType,product:n.product,resHeight:i.h,resWidth:i.w,pageTags:JSON.stringify(y.extend(!0,r,e.pageTags)),actionType:e.actionType||n.actionType,behavior:W(e.behavior)||(n.behavior?n.behavior:X.behavior.UNDEFINED)},baseType:"Ms.Content.PageView",cookieEnabled:$(),cookies:q(t),isJs:!0,title:e.title||k(),isLoggedIn:p.isLoggedIn,serverImpressionGuid:n.serverImpressionGuid,isManual:!0},flags:n.isSensitive?d:void 0};if(p.autoCapture.addin){var s=function(){var e={};if(navigator.plugins["Shockwave Flash"]){e.installed=!0;var t=navigator.plugins["Shockwave Flash"];e.version=t.description.split(" ")[2]}else if(-1!==navigator.userAgent.indexOf("MSIE"))for(var n=(new Date).getFullYear()-1992,r=n;0<r;r--)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+r);e.installed=!0,e.version=r+".0";break}catch(e){}return e}();o.data.flashInstalled=s.installed||!1,o.data.flashVersion=s.version||""}V(o,e,n.env,!0)}function e(){M({isAuto:!0,isDomComplete:!0})}function M(e){e=e||{};var t={},n=X.utils.extend(!0,p.coreData.pageTags);if(n.metaTags=G(t),B(n,f.getAllCookies()),e&&e.isDomComplete&&!0===h.perf&&window.performance&&(window.performance.timing&&(n.timing=y.stringifyField("timing",window.performance.timing)),!0===h.assets)){var r=y.getPerformanceData();r&&(n.AssetPerformance=y.stringifyField("AssetPerformance",r))}"function"==typeof p.callback.contentUpdatePageTags&&(n=y.extend(!0,n,p.callback.contentUpdatePageTags()));var i,o=Q(),s={};y.isValueAssigned(e.vScrollOffset)&&y.isValueAssigned(e.hScrollOffset)||(s=z()),V({name:"Ms.Webi.ContentUpdate",data:{baseData:{ver:u,impressionGuid:m.getImpressionGuid(),pageName:e.pageName||A(),uri:e.uri||J(),market:t.market,pageTags:JSON.stringify(y.extend(!0,n,e.pageTags)),pageHeight:e.pageHeight||document.body.scrollHeight,vpHeight:o.h,vpWidth:o.w,actionType:e.actionType||t.actionType,behavior:W(e.behavior)||(t.behavior?t.behavior:X.behavior.UNDEFINED),vScrollOffset:e.vScrollOffset||s.v,hScrollOffset:e.hScrollOffset||s.h,contentVer:c,content:R(e.content)||U((i=o,{top:0,bottom:i.h,left:0,right:i.w}))},baseType:"Ms.Content.ContentUpdate",timings:JSON.stringify(e.timings),title:e.title||k(),cookieEnabled:$(),isJs:!0,isManual:!0,isDomComplete:!1,isLoggedIn:p.isLoggedIn,serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?d:void 0},e,t.env,!1)}function D(e,t){var n=!(t=t||{}).isAuto&&N(e,_);if(e&&N(e,b)&&!n)X.logger.logWarning("The element has do-not-track attribute set.  PageAction will not be sent.");else{var r=f.getAllCookies(),i={},o=X.utils.extend(!0,p.coreData.pageTags),s={};(e=y.returnDomObjectIfjQuery(e))&&(i.targetUri=function(e){var t="";switch(e.tagName){case"A":case"AREA":t=e.href||"";break;case"IMG":t=function(e){var t=e;if(t){var n=y.findClosestAnchor(t);if(n&&1===n.length){if(n[0].href)return n[0].href;if(n[0].src)return n[0].src}}return""}(e);break;case"INPUT":var n=e.type;window.event;n&&T[n.toUpperCase()]&&(t=e.form&&e.form.action||window.location.pathname)}return t}(e),s=H(e,!0),h.msTags&&(s=y.extend(s,function(e){var t={};for(;e;)if(!K(e)){for(var n in e.attributes)if(n&&e.attributes[n]){var r=e.attributes[n].name;r&&0===r.toLowerCase().indexOf("ms.")&&(t[r]=e.attributes[n].value)}e=e.parentElement||e.parentNode}return t}(e))),s.bhvr&&(i.behavior=W(y.extractFieldFromObject(s,"bhvr")))),o.metaTags=G(i),B(o,r),"function"==typeof p.callback.pageActionPageTags&&(o=y.extend(!0,o,p.callback.pageActionPageTags(e)));var a=p.callback.pageActionContentTags;V({name:"Ms.Webi.PageAction",data:{baseData:{ver:u,impressionGuid:m.getImpressionGuid(),pageName:t.pageName||A(),uri:t.uri||J(),pageTags:y.stringifyField("pageTags",y.extend(!0,o,t.pageTags)),contentVer:c,market:i.market,destUri:t.targetUri||i.targetUri,pageType:i.pageType,product:i.product,actionType:t.actionType||i.actionType,behavior:W(t.behavior)||(i.behavior?i.behavior:X.behavior.UNDEFINED),content:R(t.content)||y.bracketIt(JSON.stringify(y.extend(s,"function"==typeof a?a(e):{},t&&t.contentTags?t.contentTags:{})))},baseType:"Ms.Content.PageAction",timeToAction:F(),cookieEnabled:$(),cookies:q(r),isJs:!0,title:t.title||k(),isLoggedIn:p.isLoggedIn,isManual:!0,referrerUri:t.referrerUri||p.coreData.referrerUri,serverImpressionGuid:i.serverImpressionGuid},flags:i.isSensitive?d:void 0},t,i.env,!0)}}function P(e){if(!S){S=!0,(e=e||{}).isDomComplete=!0;var t={};G(t);var n=p.callback.pageUnloadTimings,r=document.body.scrollHeight;V({name:"Ms.Webi.PageUnload",data:{baseData:{ver:u,impressionGuid:m.getImpressionGuid(),pageName:e.pageName||A()},baseType:"Ms.Content.PageUnload",dwellTime:X.timespanHandler.recordTimeSpan("dwellTime",!0),scrollDepth:e.scrollDepth||a.v.toString()+"/"+r.toString(),vScrollOffset:e.vScrollOffset||a.v,pageHeight:e.pageHeight||r,vpHeight:Q().h,serverImpressionGuid:t.serverImpressionGuid,timings:n?n():void 0},flags:t.isSensitive?d:void 0},e,t.env,!0)}}function R(e){if(y.isValueAssigned(e))return"[object Array]"===Object.prototype.toString.call(e)?JSON.stringify(e):y.bracketIt(JSON.stringify(e))}function V(e,t,n,r){e.time=y.dateToISOString(new Date);var i,o,s,a=e.data;t&&(i=e,o=a,(s=t).appId&&(i.appId=s.appId),s.serviceName&&(i.serviceName=s.serviceName),!0!==s.isAuto?o.isManual=!0:o.isManual=void 0,s.isDomComplete&&(o.isDomComplete=s.isDomComplete,o.pageLoadTime=s.pageLoadTime||y.getPageLoadTime())),n&&(e.ext={app:{env:n}}),g.SendOrScheduleEvent(e,r)}function F(){if(window.performance&&window.performance.timing){var e=window.performance.timing.navigationStart;if(0!==e)return(new Date).getTime()-e}return-1}function U(e){var t=[];return function(e,t,n){if(e)for(var r=0;r<e.length;r++){var i=e[r];if(!N(i,b)&&y.isElementTrulyVisible(i,n)){var o=H(i,!1);o&&t.push(o)}}}(document.querySelectorAll(y.bracketIt(w.areaName)+","+y.bracketIt(w.slotNumber)+","+y.bracketIt(p.biBlobAttributeTag)),t,e),JSON.stringify(t)}function H(e,t){if(!e)return"";var n,r={},i=X.utils.findClosestByAttribute(e,p.biBlobAttributeTag);if(i&&(n=i.getAttribute(p.biBlobAttributeTag)),n)r=JSON.parse(n);else{var o=y.findClosestByAttribute(e,y.bracketIt(w.id));o=y.returnDomObjectIfjQuery(e);var s=y.findClosestByAttribute(e,w.areaName),a=X.utils.extend({},function(e){if(e=y.returnDomObjectIfjQuery(e))return{areaName:e.getAttribute(w.areaName),templateName:e.getAttribute(w.templateName),contentSource:e.getAttribute(w.contentSource),product:e.getAttribute(w.productId),type:e.getAttribute(w.contentType)}}(s));(r={id:o.getAttribute(w.id)||e.id||"",aN:a.areaName,sN:o.getAttribute(w.slotNumber),cN:o.getAttribute(w.contentName)||function(e){if(!1===p.useDefaultContentName||K(e)||!e.tagName)return"";var t;switch(e.tagName){case"A":t=document.all?e.innerText||e.innerHTML:e.text||e.innerHTML;case"IMG":case"AREA":t=e.alt;default:t=e.value||e.name||e.alt||e.innerText||e.id}return t.substring(0,l)}(e)||o.getAttribute("alt")||"",cS:o.getAttribute(w.contentSource)||a.contentSource,tN:a.templateName,pid:o.getAttribute(w.productId),cT:o.getAttribute(w.contentType)||a.type}).id&&r.aN&&r.sN&&r.cN||X.logger.logWarning("Invalid content blob.  Missing required attributes (id, aN/area, sN/slot), cN/contentName.  Content information will still be collected!"),w.isShortNames||(r={contentId:r.id,areaName:r.aN,slotNumber:r.sN,contentName:r.cN,contentSource:r.cS,templateName:r.tN,productId:r.pid,contentType:r.cT});for(var u,c=0;c<o.attributes.length;c++){if((u=o.attributes[c]).name!==w.id&&u.name!==w.areaName&&u.name!==w.slotNumber&&u.name!==w.contentName&&u.name!==w.contentSource&&u.name!==w.templateName&&u.name!==w.productId&&u.name!==w.contentType&&-1!==u.name.indexOf("data-bi-"))r[u.name.replace("data-bi-","")]=u.value}}return X.utils.removeInvalidElements(r),p.autoCapture.lineage&&t&&(r=X.utils.extend(r,function(e){for(var t,n,r=[],i=[],o=p.biBlobAttributeTag,s="data-module-id",a=void 0;e&&e.getAttribute;){var u=e.getAttribute(o)||e[o],c=e.getAttribute(s)||e[s];if(u){var l=JSON.parse(u);l&&(t=l.cN||l.cT,n=l.id||void 0,(t||n)&&(r.push(t),c&&(a=t),i.push(n)))}else t=e.getAttribute(w.contentName)||e.getAttribute(w.contentType),n=e.getAttribute(w.id)||void 0,(t||n)&&(r.push(t),c&&(a=t),i.push(n));e=e.parentElement}return{lineage:r.join(">"),lineageById:i.join(">"),containerName:a}}(e))),r}function q(e){var t,n,r="",i={},o=[],s=p.cookiesToCollect;if(!1===p.shareAuthStatus)o=s;else for(var a=0;a<s.length;a++)"ANON"!==s[a]&&o.push(s[a]);try{try{window.varCustomerCookies&&0<window.varCustomerCookies.length&&(o=o.concat(window.varCustomerCookies))}catch(e){}for(t in o)o.hasOwnProperty(t)&&(i.hasOwnProperty(o[t])||(i[o[t]]="",(n=e[o[t]])&&""!==n&&(r+=o[t]+"="+n+";")))}catch(e){}return r}function B(e,t){if(p.enabledFeatures){if(e.enabledFeatures)return;var n=t.Features;n&&(e.enabledFeatures=n)}}function G(e,t){var n={},r={};return p.autoCapture.awaTags&&(n=o("awa-",!0)),e.env=i(n,p.coreData,"env"),e.pageType=i(n,p.coreData,"pageType"),e.product=i(n,p.coreData,"product"),e.market=i(n,p.coreData,"market"),e.serverImpressionGuid=i(n,p.coreData,"serverImpressionGuid"),e.isSensitive=i(n,p.coreData,"isSensitive"),!e.behavior&&t&&(e.behavior=W(i(n,p.coreData,"behavior"))),p.autoCapture.msTags&&(r=o("ms.",!1),n=y.extend(!0,n,r)),n}function i(e,t,n){return t[n]?t[n]:y.extractFieldFromObject(e,n)}function o(e,t){var n,r={};n=document.querySelectorAll("meta");for(var i=0;i<n.length;i++){var o=n[i];if(o.name)if(0===o.name.toLowerCase().indexOf(e))r[t?o.name.replace(e,""):o.name]=o.content}return r}function j(){var e={h:0,w:0};return window.screen&&(e.h=screen.height,e.w=screen.width),e}function Q(){var e={h:0,w:0};return window.screen&&(e.h=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,e.w=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth),e}function z(){return{h:parseInt(document.body.scrollLeft||document.documentElement.scrollLeft||window.pageXOffset||0,10),v:parseInt(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,10)}}function $(){return navigator.cookieEnabled}function K(e){if(!e||!e.attributes)return!1;try{var t=e.getAttribute("data-dc");return!!y.isValueAssigned(t)&&"pii"===t.toLowerCase()}catch(e){return!1}}function r(e){for(var t=0;t<X.behaviorKeys.length;t++)if(X.behavior[X.behaviorKeys[t]]===e)return!0;return X.logger.logWarning("Unsupported behavior: "+e+"."),!1}function W(e){if(y.isValueAssigned(e)){var t=Number(e);if(y.isOfCorrectType("uint16",t)){if(r(t))return t}else if(y.isOfCorrectType("string",e)){var n=X.behavior[e.toUpperCase()];if(y.isOfCorrectType("uint16",n))return n}}}function J(){return t(window.location)}function t(e){if(""===p.coreData.requestUri&&e){var t=e.protocol+"//"+e.hostname+(y.isValueAssigned(e.port)?":"+e.port:"")+e.pathname;if(p.urlCollectHash&&(t+=e.hash),p.urlCollectQuery){var n=e.search;if(!n){var r=window.location.hash,i=r.indexOf("?");-1!=i&&(n=r.slice(i))}t+=n}return t}return p.coreData.requestUri}return{initialize:function(e){if(X.isAvailable){if(h=(p=e).autoCapture,w=!0===p.useShortNameForContentBlob?E.shortNames:E.longNames,h.pageView&&L({isAuto:!0}),h.click)if(window.addEventListener){var t=-1!==navigator.appVersion.indexOf("MSIE")?"click":"mousedown";window.addEventListener(t,x,!1),window.addEventListener("keyup",x,!1)}else document.attachEvent&&(document.attachEvent("onclick",x),document.attachEvent("keyup",x));if(h.jsError&&s.init(),h.scroll){var n=O(null,function(){M({isAuto:!0,actionType:X.actionType.SCROLL})},p.debounceMs.scroll);window.addEventListener?window.addEventListener("scroll",n):window.attachEvent&&window.attachEvent("onscroll",n)}if(h.resize){var r=O(function(){M({isAuto:!0,actionType:X.actionType.RESIZE})},null,p.debounceMs.resize);window.addEventListener?window.addEventListener("resize",r):window.attachEvent&&window.attachEvent("onresize",r)}if(h.onUnload||p.manualPageUnload){var i=function(){var e=z();a.v=a.v>e.v?a.v:e.v};window.addEventListener?window.addEventListener("scroll",i):window.attachEvent&&window.attachEvent("onscroll",i)}if(h.onUnload&&(window.addEventListener?(window.addEventListener("beforeunload",P),window.addEventListener("unload",P)):window.attachEvent&&(window.attachEvent("onbeforeunload",P),window.attachEvent("onunload",P))),2==p.sendMode){var o=X.vortexEvents.batchQueuedEvents;window.addEventListener?(window.addEventListener("beforeunload",o),window.addEventListener("unload",o)):window.attachEvent&&(window.attachEvent("onbeforeunload",o),window.attachEvent("onunload",o))}2==p.authMethod&&1==p.shareAuthStatus&&1==p.isLoggedIn&&(window.addEventListener?window.addEventListener("message",I):window.attachEvent&&window.attachEvent("onmessage",I)),(p.syncMuid||p.autoCapture.onLoad)&&C(X.ct.domReadyTasksWrapper)}},capturePageView:L,captureContentUpdate:M,capturePageAction:function(e,t){D(e,t)},captureContentPageAction:function(e){D(null,e)},capturePageUnload:P,captureCorsDisallowed:function(e){if(e){var t={};G(t),V({name:"Ms.Cll.Javascript.CorsDisallowed",data:{eventName:e.eventName,pageName:A(),uri:e.uri||J(),market:t.market,impressionGuid:m.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?d:void 0},e,t.env,!1)}},captureEventTooLong:function(e){if(e){var t={};G(t),V({name:"Ms.Cll.Javascript.EventTooLong",data:{eventName:e.eventName,payloadLength:e.payloadLength,pageName:e.pageName||A(),uri:e.uri||J(),market:t.market,impressionGuid:m.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?d:void 0},e,t.env,!1)}},captureClientError:function(e){if(e){var t={};G(t),V({name:"Ms.Webi.ClientError",data:{errorInfo:JSON.stringify(e.errorInfo),wasDisplayed:e.displayedToUser||!1,impressionGuid:m.getImpressionGuid(),pageName:e.pageName||A(),uri:e.uri||J(),market:t.market,serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?d:void 0},e,t.env,!1)}},captureEventDrop:function(e){if(e&&h.invalidEvents){var t={};G(t),V({name:"Ms.Cll.Javascript.EventDropped",data:{eventName:e.eventName,droppedInfo:e.droppedInfo,pageName:e.pageName||A(),uri:e.uri||J(),market:t.market,impressionGuid:m.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?d:void 0},e,t.env,!1)}},captureQos:function(e){var t={};G(t);var n=e.data;n.serverImpressionGuid=t.serverImpressionGuid,n.market=t.market,n.pageName=A(),n.uri=J(),V(e,void 0,t.env,!1)},captureSwap:function(e){},domReadyTasksWrapper:function(){X.ct.domReadyTasks()},onDomReadyDo:C,domReadyTasks:function(){p.syncMuid&&function(){var e=y.getMuidHost(p.muidDomain||"microsoft.com");if(e){var t=(window.location.protocol||"http:")+"//"+e+"/c.gif?DI=4050&did=1&t=",n=document.createElement("IMG");n.style.display="none",n.src=t,n.hidden="",n["aria-hidden"]="true",n.role="presentation"}else X.logger.logWarning("Unable to get a muid host for the configured muidDomain '"+p.muidDomain+"'.  Unable to sync muid")}(),h.onLoad&&("complete"===document.readyState?e():window.addEventListener?window.addEventListener("load",e):window.attachEvent&&window.attachEvent("onload",e))},getTimeToClick:F,getPageContent:U,getUri:t,testHook:{isBehaviorValid:r,getValidBehavior:W,collectMetaTagsAndSetEventProperty:G,getElementContent:H,getPageContent:U,debounce:O,getScreenResolution:j,getViewportDimensions:Q}}}(),X.service=(y=X.timespanHandler,b=!(v=!0),_=null,S=function(o){if("function"==typeof jQuery){v&&($.support.cors=!0);var s,n=o.additionalHeaders||{},e=o.body,t=e?JSON.stringify(e):o.data||void 0,a=o.maxRetry||0,u=0,r=$.noop,c=o.operationName||o.url,i=o.errorFormatter||function(e){return e},l=X.ids,d={url:o.url,type:o.method,data:t,crossDomain:!0,headers:{},success:o.success,timeout:o.timeout,error:o.error,jsonp:o.jsonp,jsonpCallback:o.jsonpCallback,cache:o.cache,beforeSend:function(e){if(r(e),o.contractVersion&&e.setRequestHeader("MS-Contract-Version",o.contractVersion),(!X.utils.isValueAssigned(o.addCvToRequestHeader)&&b||o.addCvToRequestHeader)&&X.cv.isValid(s)&&e.setRequestHeader("MS-CV",s),n)for(var t in n)e.setRequestHeader(t,n[t])}};o.dataType&&(d.dataType=o.dataType),o.noCacheBusting||(d.cache=!1),o.contentType&&(d.contentType=o.contentType),o.accept&&(d.headers.Accept=o.accept),o.accepts&&(d.accepts=o.accepts),o.async&&(d.async=o.async),o.xhrFields&&(d.xhrFields=o.xhrFields),o.complete&&(d.complete=o.complete),o.contents&&(d.contents=o.contents),o.context&&(d.context=o.context),o.dataFilter&&(d.dataFilter=o.dataFilter),o.global&&(d.global=o.global),o.ifModified&&(d.ifModified=o.ifModified),o.isLocal&&(d.isLocal=o.isLocal),o.mimeType&&(d.mimeType=o.mimeType),o.password&&(d.password=o.password),X.utils.isValueAssigned(o.processData)&&(d.processData=o.processData),o.scriptCharset&&(d.scriptCharset=o.scriptCharset),o.statusCode&&(d.statusCode=o.statusCode),o.traditional&&(d.traditional=o.traditional),o.type&&(d.type=o.type),o.username&&(d.username=o.username),o.xhr&&(d.xhr=o.xhr),s=X.cv.isValid(o.cV)?o.cV:X.cv.increment();var p=function(e,t,n){var r=e.getResponseHeader("Content-Length"),i={name:"Ms.Webi.OutgoingRequest",cV:s,data:{baseData:{operationName:o.currentOperationName||X.ct.getUri(document.location),targetUri:_?_(d.url):d.url,latencyMs:n,serviceErrorCode:!t&&e.responseJSON&&e.responseJSON.code&&!isNaN(e.responseJSON.code)?e.responseJSON.code:-1,succeeded:t,requestMethod:d.type,responseContentType:d.dataType,protocolStatusCode:e.status.toString(),dependencyOperationName:c,dependencyOperationVersion:o.version&&o.version.toString(),dependencyName:o.serviceName,dependencyType:"WebService",responseSizeBytes:r&&parseInt(r,10)},baseType:"Ms.Qos.OutgoingServiceRequest",impressionGuid:l.getImpressionGuid(),message:t?void 0:X.utils.stringifyField("errorMessage",e.errorThrown),retryCount:u,customData:o.customDataCallBack&&"function"==typeof o.customDataCallBack?JSON.stringify(o.customDataCallBack(e)):void 0}};o.QosCallback&&"function"==typeof o.QosCallback&&o.QosCallback(e,i),X.ct.captureQos(i)},h=function(){var i=c+"_Retry_"+u;return y.recordTimeSpan(i),$.ajax(d).then(function(e,t,n){var r=y.recordTimeSpan(i,!0);return p(n,!0,r),n},function(e,t){var n=y.recordTimeSpan(i,!0);p(e,!1,n);var r=$.Deferred();return u<a&&(0===e.status||500<=e.status&&e.status<600)?(u++,s=X.cv.isValid(o.cV)?X.cv.incrementExternal(s):X.cv.increment(),setTimeout(function(){h().done(r.resolve).fail(r.reject)},50)):r.reject(e,t),r.promise()})};return h().then(function(e,t,n){return n},function(e){return i(e,o)})}X.logger.logError("jQuery is not defined, cannot use service module")},{post:function(e){return S(X.utils.extend({},e,{method:"POST"}))},get:function(e){return S(X.utils.extend({maxRetry:1},e,{method:"GET"}))},put:function(e){return S(X.utils.extend({},e,{method:"PUT"}))},del:function(e){return S(X.utils.extend({},e,{method:"DELETE"}))},patch:function(e){return S(X.utils.extend({},e,{method:"PATCH"}))},doNotChangeSupportCors:function(){v=!1},alwaysAddCvToRequestHeader:function(){b=!0},setTargetUriOverride:function(e){"function"==typeof e?_=e:"string"==typeof e&&(_=function(){return e})}});var R=s(function(e,a){Object.defineProperty(a,"__esModule",{value:!0});var t,n,r,i,o,s,c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})}function l(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e,t){if(null!=e)return 0<e.length?t(e):0;throw new Error("Unable to process array because input is null or undefined")}function p(e){return d(e,function(e){return e.reduce(function(e,t){return Math.max(e,t)},Number.MIN_SAFE_INTEGER)})}function h(e){return d(e,function(e){return e.reduce(function(e,t){return Math.min(e,t)},Number.MAX_SAFE_INTEGER)})}function f(t){return d(t,function(e){return e.reduce(function(e,t){return e+t},0)/t.length})}function m(e){void 0===e&&(e=!1);for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&t&&t.forEach(function(e){console.log("[Player-Telemetry]",e)})}(t=a.VideoType||(a.VideoType={})).LIVE="live",t.VOD="vod",(n=a.TransportType||(a.TransportType={})).DASH="dash",n.FTL="ftl",n.HLS="hls",(r=a.TernaryType||(a.TernaryType={})).TRUE="true",r.FALSE="false",r.UNKNOWN="unknown",(i=a.PlayerContext||(a.PlayerContext={})).CAROUSEL="carousel",i.CHANNEL="channel-page",i.EMBED="embed",(o=a.VideoPlaybackIncidentType||(a.VideoPlaybackIncidentType={})).FRAME_DROP="frameDrop",o.CORRUPTED_FRAMES="corruptedFrames",(s=a.TransportIncidentType||(a.TransportIncidentType={})).BUFFER_EMPTY="bufferEmpty",s.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",s.DASH_PLAYBACK_ERROR="dashPlaybackError",s.DASH_ERROR="dashError",s.FTL_ERROR="ftlError",s.HLS_ERROR="hlsError",s.JANUS_ERROR="janusError",s.PACKET_LOSS="packetLoss",s.PLI_PACKET_FIRED="pliPacketFired",s.WEB_RTC_ERROR="webRTCError",s.WEB_SOCKET_ERROR="webSocketError";var g=4294967296;function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*function(){if("undefined"!=typeof window&&window.crypto){var e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/g}return Math.random()}()|0;return("x"===e?t:3&t|8).toString(16)})}function y(e){void 0===e&&(e="");var t="unknown",n="unknown";if(e.includes("clips-content.mixer.com"))n=t="clips";else if(e.includes("videocdn.mixer.com"))n=t="fastly";else if("source00000000.ts"===e)n=t="vod";else if(e.includes("xble3dash-i.akamaihd.net"))n=t="";else{var r=e.split(".");n=r[0],t=r[1]}return{location:t,machine:n}}var v="undefined"!=typeof document,b="FirstFrameRendered",_="PlayerSessionEnd",E="PlayerSessionStart",w="VideoPlaybackClosedCaptions",T="VideoPlaybackQualitySwitch",I="VideoPlaybackRendering",C="VideoPlayerHeartbeat",A="JanusFlags",k="FallbackToNativePlayer",x="PlayerCDNFallback",N="PlayerLifecycleState",O="PlayerReportedSessions",L="PlayerDebugEvents",M={authMethod:1,coreData:{appId:"Mixer"},isLoggedIn:!0,shareAuthStatus:!1};function D(e,t){var n,r="Mixer.Player."+e;return(n={name:r})[r]={part:"C",def:{fields:t.concat([{name:"timestamp",type:"string"},{name:"platform",type:"string"},{name:"channelId",type:"int32"},{name:"height",type:"int32"},{name:"width",type:"int32"},{name:"context",type:"string"},{name:"isCostream",type:"bool"},{name:"sdkVersion",type:"string"},{name:"sessionGuid",type:"string"},{name:"browserName",type:"string"},{name:"browserVersion",type:"string"},{name:"osName",type:"string"},{name:"osVersion",type:"string"},{name:"isAuthed",type:"bool"},{name:"gaFlags",type:"string"},{name:"GoogleAnalyticsClientId",type:"string"},{name:"isFocused",type:"bool"}])}},n}var P=[D("GetVideoFeedAttempt",[{name:"defaultProtocol",type:"string"},{name:"type",type:"string"},{name:"ftlServer",type:"string"},{name:"hlsRecommendedSegmentBuffer",type:"int32"},{name:"hlsServer",type:"string"},{name:"dashServer",type:"string"}]),D("GetVideoFeedSummary",[{name:"duration",type:"int32"},{name:"ftlAttempts",type:"int32"},{name:"hlsAttempts",type:"int32"},{name:"dashAttempts",type:"int32"},{name:"transport",type:"string"},{name:"success",type:"bool"}]),D("ConnectTransportAttempt",[{name:"attemptCount",type:"int32"},{name:"errorCode",type:"int32"},{name:"errorMessage",type:"string"},{name:"errorName",type:"string"},{name:"trace",type:"string"},{name:"loadTime",type:"int32"},{name:"transport",type:"string"},{name:"success",type:"bool"},{name:"timeSinceGetVideoFeedAttempt",type:"int32"},{name:"hostName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"}]),D("ConnectTransportSummary",[{name:"hostName",type:"string"},{name:"lastErrorCode",type:"int32"},{name:"lastErrorMessage",type:"string"},{name:"lastErrorName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"numAttempts",type:"int32"},{name:"success",type:"bool"},{name:"transport",type:"string"},{name:"timeSinceGetVideoFeedAttempt",type:"int32"}]),D("TransportStatistics",[{name:"errors",type:"int32"},{name:"transport",type:"string"},{name:"hostName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"bitrate",type:"int32"},{name:"resolution",type:"string"},{name:"averageSegmentDownloadTime",type:"float"},{name:"averageSegmentDuration",type:"float"},{name:"averageSegmentSize",type:"float"},{name:"manifest",type:"string"},{name:"maxSegmentDownloadTime",type:"int32"},{name:"maxSegmentDuration",type:"int32"},{name:"maxSegmentSize",type:"int32"},{name:"minSegmentDownloadTime",type:"int32"},{name:"minSegmentDuration",type:"int32"},{name:"minSegmentSize",type:"int32"},{name:"retryCount",type:"int32"},{name:"segmentCount",type:"int32"},{name:"networkErrorCount",type:"uint32"},{name:"bufferStallCount",type:"uint32"},{name:"bufferStallRate",type:"float"},{name:"fpsDropCount",type:"uint32"},{name:"corruptedSegmentCount",type:"uint32"},{name:"currentVideoTime",type:"float"}]),D("TransportIncident",[{name:"hostName",type:"string"},{name:"incidentType",type:"string"},{name:"transport",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"errorCode",type:"int32"},{name:"errorName",type:"string"},{name:"buffer",type:"float"},{name:"details",type:"string"},{name:"fatal",type:"bool"},{name:"manifest",type:"string"},{name:"reason",type:"string"},{name:"type",type:"string"},{name:"error",type:"string"},{name:"eventDetails",type:"string"}]),D("VideoPlaybackStatistics",[{name:"distHostName",type:"string"},{name:"location",type:"string"},{name:"dist",type:"string"},{name:"totalDelay",type:"int32"},{name:"manifestLoadDelay",type:"int32"},{name:"videoLoadDelay",type:"int32"},{name:"decodeDelay",type:"int32"},{name:"videoWidth",type:"int32"},{name:"videoHeight",type:"int32"},{name:"isSource",type:"bool"},{name:"sourceFps",type:"int32"},{name:"lastFrameRate",type:"int32"},{name:"isSourceFpsConverged",type:"bool"},{name:"qoEEventCount1M",type:"int32"},{name:"qoEEventCount3M",type:"int32"},{name:"qoEEventCount5M",type:"int32"},{name:"qoEEventCount",type:"int32"},{name:"qoEStatus",type:"int32"},{name:"currentVideoTime",type:"float"},{name:"currentSessionTime",type:"int32"},{name:"isWebView",type:"bool"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"}]),D(I,[{name:"duration",type:"int32"},{name:"sdkVersion",type:"string"},{name:"success",type:"bool"},{name:"timeoutMs",type:"int32"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"}]),D(w,[{name:"enabled",type:"bool"},{name:"transport",type:"string"}]),D(T,[{name:"currentResolution",type:"int32"},{name:"requestedResolution",type:"int32"},{name:"transport",type:"string"}]),D(C,[{name:"isPlaying",type:"bool"},{name:"resolution",type:"int32"},{name:"sessionDuration",type:"float"},{name:"transport",type:"string"}]),D(E,[{name:"userSelectedBitrate",type:"string"}]),D(_,[{name:"duration",type:"float"},{name:"resolution",type:"int32"},{name:"transcodesAvailable",type:"string"}]),D(b,[{name:"loadingDuration",type:"int32"},{name:"resolution",type:"int32"},{name:"totalDuration",type:"int32"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"},{name:"durationSinceChannelLoaded",type:"int32"},{name:"durationSinceLight2Loaded",type:"int32"}]),D(A,[{name:"janusFlags",type:"string"}]),D(k,[{name:"supportsMSE",type:"bool"},{name:"supportsHLS",type:"bool"}]),D(x,[{name:"reason",type:"string"}]),D(N,[{name:"state",type:"string"},{name:"entering",type:"bool"},{name:"meta",type:"string"}]),D(O,[{name:"message",type:"string"}]),D(L,[{name:"message",type:"string"},{name:"payload",type:"string"}])];var R="video_player",V="video_ui",F={eventCategory:R,eventAction:"player_session_start"},U={eventCategory:R,eventAction:"player_session_end"},H={eventCategory:R,eventAction:"first_frame_loaded"},q={eventCategory:V,eventAction:"quality_level_increase"},B={eventCategory:V,eventAction:"quality_level_decrease"},G=function(){function e(e,t,n){var r;void 0===t&&(t=!1),void 0===n&&(n=M);var o=this;this.callbacks=e,this.shouldLog=t,this.noBatching=!1,this.scheduledEvents=[],this.incidentsCount=((r={})[a.TransportType.DASH]=0,r[a.TransportType.FTL]=0,r[a.TransportType.HLS]=0,r),this.previousPacketLoss=0,this.sendScheduledEvents=function(e){for(;0<e.timeRemaining()&&0<o.scheduledEvents.length;){var t=o.scheduledEvents.shift();if(o.isGAEvent(t))o.ga&&o.sendGAEvent(t);else if(o.jsll){var n=o.jsll,r=n.isEventValid,i=n.writeEvent;r(t)?i(t):m(o.shouldLog,"Unable to send "+t.name)}}0<o.scheduledEvents.length&&window.requestIdleCallback(o.sendScheduledEvents)},this.sendGAEvent=function(t){o.ga.event(t,function(e){e&&m(o.shouldLog,"Unable to send GA event: "+JSON.stringify(t)+", with error: "+e)}).send()},this.isGAEvent=function(e){return!!(e&&e.eventCategory&&e.eventAction)},this.logGAEvent=function(e){o.scheduleEvent(e)},this.config=n,this.timeSinceLastEvent=Date.now()}return e.prototype.initXpert=function(y,v,b,_){return void 0===b&&(b=P),u(this,void 0,void 0,function(){var g;return l(this,function(e){switch(e.label){case 0:return this.oneDS=_,g=this,[4,Promise.resolve(j)];case 1:return g.jsll=e.sent(),this.jsll.init(v),this.jsll._registerSchemas(b),this.baseEvent=(n=(t=y).appId,r=t.channelId,i=t.context,o=t.sdkVersion,s=t.sessionGuid,a=void 0===s?S():s,u=t.gaClientId,c=void 0===u?"":u,l=t.gaFlags,d=t.isCostream,p=void 0!==d&&d,h=t.height,f=void 0===h?0:h,m=t.width,{platform:n,channelId:r,context:i,sdkVersion:o,sessionGuid:a,gaFlags:l,isCostream:p,height:f,width:void 0===m?0:m,browserName:t.browserName,browserVersion:t.browserVersion,osName:t.osName,osVersion:t.osVersion,isAuthed:t.isAuthed,GoogleAnalyticsClientId:c}),[2]}var t,n,r,i,o,s,a,u,c,l,d,p,h,f,m})})},e.prototype.incrementXpertCv=function(){var e=this.jsll.cv;return e.increment(),e.getValue()},e.prototype.getXpertCv=function(){return""+this.jsll.cv.getValue()},e.prototype.logQoSEvent=function(e){var t=e.contentType,n=e.currentOperationName,r=e.cV,i=e.httpMethod,o=e.httpStatusCode,s=e.isSuccess,a=e.latencyMs,u=e.operationName,c=e.operationVersion,l=e.requestUri,d=e.responseSize,p=e.serviceErrorCode,h=void 0===p?-1:p,f=e.serviceName,m=e.serviceType,g=void 0===m?"WebService":m;this.jsll.vortexEvents.sendApiComplete({contentType:t,currentOperationName:n,cV:r,httpMethod:i,httpStatusCode:o,isSuccess:s,operationName:u,operationVersion:c,requestUri:l,responseSize:d,serviceErrorCode:h,serviceName:f,serviceType:g,latencyMs:a})},e.prototype.updateEnvironmentInfo=function(n){var r=this;Object.keys(n).forEach(function(e){var t;!r.baseEvent.hasOwnProperty(e)||(null==(t=n[e])||"number"==typeof t&&isNaN(t))||(r.baseEvent[e]=n[e])})},e.prototype.transformEvent=function(e,t){return{name:this.config.coreData.appId+".Player."+e,data:c({},this.baseEvent,t,{isFocused:!v||!document.hidden,timestamp:new Date(Date.now()).toISOString()})}},e.prototype.scheduleEvent=function(e,t){var n=this.timeSinceLastEvent;if(this.timeSinceLastEvent=Date.now(),6e4<Date.now()-n)return m(this.shouldLog,"Triggered telemetry timeout"),this.scheduledEvents=[],void(this.callbacks&&this.callbacks.timeoutCallback&&this.callbacks.timeoutCallback());if(this.isGAEvent(e))this.ga&&(m(this.shouldLog,e),this.scheduledEvents.push(e),window.requestIdleCallback(this.sendScheduledEvents));else if(v){if(m(this.shouldLog,t,e),this.jsll&&e&&t){var r=this.transformEvent(t,e);this.oneDS.track({name:"Microsoft_Mixer_Player_"+t+"_Legacy",data:c({},this.baseEvent,e,{isFocused:!document.hidden})}),this.scheduledEvents.push(r),window.requestIdleCallback(this.sendScheduledEvents)}}else m(this.shouldLog,"Xpert telemetry only works in a browser environment currently because suck");this.noBatching&&this.sendScheduledEvents({timeRemaining:function(){return 1}})},e.prototype.logGetVideoFeedAttempt=function(e){this.getVideoFeedAttemptTime=Date.now(),this.scheduleEvent(e,"GetVideoFeedAttempt")},e.prototype.logConnectTransportAttempt=function(e){var t=y(e.hostName),n=t.location,r=t.machine,i=Date.now()-this.getVideoFeedAttemptTime;this.scheduleEvent(c({},e,{location:n,machine:r,timeSinceGetVideoFeedAttempt:i}),"ConnectTransportAttempt")},e.prototype.logConnectTransportSummary=function(e){var t=e.hostName,n=e.transport,r=y(t),i=r.location,o=r.machine,s=Date.now()-this.getVideoFeedAttemptTime;this.incidentsCount[n]=0,this.scheduleEvent(c({},e,{location:i,machine:o,timeSinceGetVideoFeedAttempt:s}),"ConnectTransportSummary")},e.prototype.logGetVideoFeedSummary=function(e){this.scheduleEvent(e,"GetVideoFeedSummary")},e.prototype.logTransportIncident=function(e){var t=e.hostName,n=e.incidentType,r=e.transport;switch(n){case a.TransportIncidentType.PACKET_LOSS:this.previousPacketLoss+=1}var i=y(t),o=i.location,s=i.machine;this.incidentsCount[r]+=1,this.scheduleEvent(c({},e,{location:o,machine:s}),"TransportIncident")},e.prototype.logPlayerLifecycleState=function(e){this.scheduleEvent(c({},e),N)},e.prototype.logPlayerReportedSessions=function(e){this.scheduleEvent(c({},e),O)},e.prototype.logPlayerDebugEvents=function(e){this.scheduleEvent(c({},e),L)},e.prototype.logVideoPlaybackStatistics=function(e){this.scheduleEvent(c({},e),"VideoPlaybackStatistics")},e.prototype.logVideoPlaybackRendering=function(e){this.scheduleEvent(c({},e),I)},e.prototype.logVideoPlaybackClosedCaptions=function(e){this.scheduleEvent(c({},e),w)},e.prototype.logVideoPlaybackQualitySwitch=function(e){this.scheduleEvent(c({},e),T)},e.prototype.logPlayerSessionStart=function(e){this.scheduleEvent(c({},e),E)},e.prototype.logPlayerSessionEnd=function(e){this.scheduleEvent(c({},e),_)},e.prototype.logFirstFrameRendered=function(e){this.scheduleEvent(c({},e),b)},e.prototype.logVideoPlayerHeartbeat=function(e){this.scheduleEvent(c({},e),C)},e.prototype.logTransportStatistics=function(e){var t=e.hostName,n=e.fragDownloadTimes,r=e.fragSizes,i=e.segmentDurations,o=e.transport,s=y(t),a=s.location,u=s.machine;this.scheduleEvent(c({},e,{averageSegmentDownloadTime:Number(f(n).toFixed(2)),averageSegmentDuration:Number(f(i).toFixed(2)),averageSegmentSize:Number(f(r).toFixed(2)),errors:this.incidentsCount[o],location:a,machine:u,maxSegmentDownloadTime:p(n),maxSegmentDuration:p(i),maxSegmentSize:p(r),minSegmentDownloadTime:h(n),minSegmentDuration:h(i),minSegmentSize:h(r)}),"TransportStatistics")},e.prototype.logJanusFlags=function(e){this.scheduleEvent({janusFlags:JSON.stringify(e)},A)},e.prototype.logFallbackToNativePlayer=function(e){this.scheduleEvent(e,k)},e.prototype.logPlayerCDNFallback=function(e){this.scheduleEvent(e,x)},e}();a.generateGuid=S,a.createPlayerTelemetry=function(n,r,i,o,s,a){return void 0===r&&(r={timeoutCallback:function(){}}),void 0===i&&(i={xpert:!0,ga:!1}),void 0===o&&(o=!1),void 0===s&&(s=M),u(void 0,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=new G(r,o,s),v?i.xpert?[4,t.initXpert(n,s,P,a)]:[3,2]:[3,4];case 1:return e.sent(),[3,3];case 2:m(o,"Xpert telemetry is not logging"),e.label=3;case 3:return[3,5];case 4:m(o,"Xpert telemetry only works in a browser environment currently because suck"),e.label=5;case 5:return[2,t]}})})},a.FIRST_FRAME_RENDERED=b,a.PLAYER_SESSION_END_EVENT=_,a.PLAYER_SESSION_START_EVENT=E,a.VIDEO_PLAYBACK_CLOSED_CAPTIONS_EVENT=w,a.VIDEO_PLAYBACK_QUALITY_SWITCH_EVENT=T,a.VIDEO_PLAYBACK_RENDERING_EVENT=I,a.VIDEO_PLAYER_HEARTBEAT_EVENT=C,a.JANUS_FLAGS=A,a.FALLBACK_TO_NATIVE_PLAYER=k,a.PLAYER_CDN_FALLBACK=x,a.PLAYER_LIFECYCLE_STATE=N,a.PLAYER_REPORT_EVENT=O,a.PLAYER_DEBUG_EVENT=L,a.PLAYER_SESSION_START_GA_EVENT=F,a.PLAYER_SESSION_END_GA_EVENT=U,a.FIRST_FRAME_LOADED_GA_EVENT=H,a.QUALITY_LEVEL_INCREASE_GA_EVENT=q,a.QUALITY_LEVEL_DECREASE_GA_EVENT=B});o(R);var V=R.VideoType,F=R.TransportType,U=R.TernaryType,H=(R.PlayerContext,R.VideoPlaybackIncidentType,R.TransportIncidentType);R.generateGuid,R.createPlayerTelemetry,R.FIRST_FRAME_RENDERED,R.PLAYER_SESSION_END_EVENT,R.PLAYER_SESSION_START_EVENT,R.VIDEO_PLAYBACK_CLOSED_CAPTIONS_EVENT,R.VIDEO_PLAYBACK_QUALITY_SWITCH_EVENT,R.VIDEO_PLAYBACK_RENDERING_EVENT,R.VIDEO_PLAYER_HEARTBEAT_EVENT,R.JANUS_FLAGS,R.FALLBACK_TO_NATIVE_PLAYER,R.PLAYER_CDN_FALLBACK,R.PLAYER_LIFECYCLE_STATE,R.PLAYER_REPORT_EVENT,R.PLAYER_DEBUG_EVENT,R.PLAYER_SESSION_START_GA_EVENT,R.PLAYER_SESSION_END_GA_EVENT,R.FIRST_FRAME_LOADED_GA_EVENT,R.QUALITY_LEVEL_INCREASE_GA_EVENT,R.QUALITY_LEVEL_DECREASE_GA_EVENT;function q(e){return"function"==typeof e}var B=!1,G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;B=e},get useDeprecatedSynchronousErrorHandling(){return B}};function Q(e){setTimeout(function(){throw e})}var z={closed:!0,next:function(e){},error:function(e){if(G.useDeprecatedSynchronousErrorHandling)throw e;Q(e)},complete:function(){}},K=Array.isArray||function(e){return e&&"number"==typeof e.length};function W(e){return null!==e&&"object"==typeof e}function J(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}J.prototype=Object.create(Error.prototype);var Y=J,Z=function(){function i(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return i.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;e;)e.remove(this),e=++s<a&&r[s]||null;if(q(i))try{i.call(this)}catch(e){n=!0,t=e instanceof Y?ee(e.errors):[e]}if(K(o))for(s=-1,a=o.length;++s<a;){var u=o[s];if(W(u))try{u.unsubscribe()}catch(e){n=!0,t=t||[],e instanceof Y?t=t.concat(ee(e.errors)):t.push(e)}}if(n)throw new Y(t)}},i.prototype.add=function(e){var t=e;switch(typeof e){case"function":t=new i(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof i)){var n=t;(t=new i)._subscriptions=[n]}break;default:if(!e)return i.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(t._addParent(this)){var r=this._subscriptions;r?r.push(t):this._subscriptions=[t]}return t},i.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},i.prototype._addParent=function(e){var t=this._parent,n=this._parents;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},i.EMPTY=((e=new i).closed=!0,e),i}();function ee(e){return e.reduce(function(e,t){return e.concat(t instanceof Y?t.errors:t)},[])}var te="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ne=function(i){function o(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=z;break;case 1:if(!e){r.destination=z;break}if("object"==typeof e){e instanceof o?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new re(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new re(r,e,t,n)}return r}return k(o,i),o.prototype[te]=function(){return this},o.create=function(e,t,n){var r=new o(e,t,n);return r.syncErrorThrowable=!1,r},o.prototype.next=function(e){this.isStopped||this._next(e)},o.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(e){this.destination.next(e)},o.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},o}(Z),re=function(a){function e(e,t,n,r){var i,o=a.call(this)||this;o._parentSubscriber=e;var s=o;return q(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==z&&(q((s=Object.create(t)).unsubscribe)&&o.add(s.unsubscribe.bind(s)),s.unsubscribe=o.unsubscribe.bind(o))),o._context=s,o._next=i,o._error=n,o._complete=r,o}return k(e,a),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;G.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=G.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Q(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Q(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};G.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),G.useDeprecatedSynchronousErrorHandling)throw e;Q(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!G.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return G.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(Q(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(ne);var ie="function"==typeof Symbol&&Symbol.observable||"@@observable";function oe(){}var se=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof ne)return e;if(e[te])return e[te]()}return e||t||n?new ne(e,t,n):new ne(z)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||G.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),G.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){G.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof ne?r:null}return!0}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=ae(e))(function(e,t){var n;n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[ie]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:oe)(this)},n.prototype.toPromise=function(e){var r=this;return new(e=ae(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function ae(e){if(e||(e=G.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function ue(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ue.prototype=Object.create(Error.prototype);var ce=ue,le=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return k(e,r),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},e}(Z),de=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return k(e,n),e}(ne),pe=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return k(e,t),e.prototype[te]=function(){return new de(this)},e.prototype.lift=function(e){var t=new he(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new ce;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new ce;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ce;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ce;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new ce;return this.hasError?(e.error(this.thrownError),Z.EMPTY):this.isStopped?(e.complete(),Z.EMPTY):(this.observers.push(e),new le(this,e))},e.prototype.asObservable=function(){var e=new se;return e.source=this,e},e.create=function(e,t){return new he(e,t)},e}(se),he=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return k(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Z.EMPTY},e}(pe);var fe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new me(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),me=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return k(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(ne),ge=function(r){function e(e,t){var n=r.call(this)||this;return n.source=e,n.subjectFactory=t,n._refCount=0,n._isComplete=!1,n}return k(e,r),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Z).add(this.source.subscribe(new ye(this.getSubject(),this))),e.closed?(this._connection=null,e=Z.EMPTY):this._connection=e),e},e.prototype.refCount=function(){return(e=this).lift(new fe(e));var e},e}(se).prototype,ye=(ge._subscribe,ge._isComplete,ge.getSubject,ge.connect,ge.refCount,function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return k(e,r),e.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},e}(de)),ve=function(n){function e(e){var t=n.call(this)||this;return t._value=e,t}return k(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=n.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ce;return this._value},e.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},e}(pe),be=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.pending=!1,n}return k(e,r),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(function(n){function e(e,t){return n.call(this)||this}return k(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(Z)),_e=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return k(e,r),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?r.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?r.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,e,t,n):e.flush(this)},e}(be),Se=function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},n.now=function(){return Date.now()},n}(),Ee=function(r){function i(e,t){void 0===t&&(t=Se.now);var n=r.call(this,e,function(){return i.delegate&&i.delegate!==n?i.delegate.now():t()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return k(i,r),i.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):r.prototype.schedule.call(this,e,t,n)},i.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},i}(Se),we=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t}(Ee))(_e),Te=new se(function(e){return e.complete()});function Ie(e){return e?(t=e,new se(function(e){return t.schedule(function(){return e.complete()})})):Te;var t}function Ce(e){return e&&"function"==typeof e.schedule}var Ae,ke=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.closed||e.complete()}};function xe(r,i){return new se(i?function(e){var t=new Z,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t}:ke(r))}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,i=e[e.length-1];switch(Ce(i)?e.pop():i=void 0,e.length){case 0:return Ie(i);case 1:return i?xe(e,i):(n=e[0],(r=new se(function(e){e.next(n),e.complete()}))._isScalar=!0,r.value=n,r);default:return xe(e,i)}}function Oe(e){var t=e.error;e.subscriber.error(t)}Ae||(Ae={});var Le=function(){function t(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},t.prototype.toObservable=function(){var t,n;switch(this.kind){case"N":return Ne(this.value);case"E":return t=this.error,new se(n?function(e){return n.schedule(Oe,0,{error:t,subscriber:e})}:function(e){return e.error(t)});case"C":return Ie()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Me=function(i){function t(e,t,n){void 0===n&&(n=0);var r=i.call(this,e)||this;return r.scheduler=t,r.delay=n,r}return k(t,i),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new De(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Le.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Le.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Le.createComplete()),this.unsubscribe()},t}(ne),De=function(){return function(e,t){this.notification=e,this.destination=t}}(),Pe=function(i){function e(e,t,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var r=i.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return k(e,i),e.prototype.nextInfiniteTimeWindow=function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),i.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new Re(this._getNow(),e)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new ce;if(t=this.isStopped||this.hasError?Z.EMPTY:(this.observers.push(e),new le(this,e)),i&&e.add(e=new Me(e,i)),n)for(var s=0;s<o&&!e.closed;s++)e.next(r[s]);else for(s=0;s<o&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},e.prototype._getNow=function(){return(this.scheduler||we).now()},e.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return t<i&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},e}(pe),Re=function(){return function(e,t){this.time=e,this.value=t}}();var Ve=new Ee(be);function Fe(e){return e}function Ue(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Ue.prototype=Object.create(Error.prototype);var He=Ue;Error.prototype;function qe(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Be(t,n))}}var Be=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ge(e,this.project,this.thisArg))},e}(),Ge=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}return k(e,i),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(ne),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ne),Qe=function(i){function e(e,t,n){var r=i.call(this)||this;return r.parent=e,r.outerValue=t,r.outerIndex=n,r.index=0,r}return k(e,i),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ne),ze=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Q),t}};function $e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ke=$e(),We=function(r){return function(e){for(var t=r[Ke]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}},Je=function(n){return function(e){var t=n[ie]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},Xe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ye(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ze=function(t){if(t instanceof se)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[ie])return Je(t);if(Xe(t))return ke(t);if(Ye(t))return ze(t);if(t&&"function"==typeof t[Ke])return We(t);var e=W(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function et(e,t,n,r,i){if(void 0===i&&(i=new Qe(e,n,r)),!i.closed)return Ze(t)(i)}function tt(e,t){if(!t)return e instanceof se?e:new se(Ze(e));if(null!=e){if((a=e)&&"function"==typeof a[ie])return o=e,new se((s=t)?function(t){var n=new Z;return n.add(s.schedule(function(){var e=o[ie]();n.add(e.subscribe({next:function(e){n.add(s.schedule(function(){return t.next(e)}))},error:function(e){n.add(s.schedule(function(){return t.error(e)}))},complete:function(){n.add(s.schedule(function(){return t.complete()}))}}))})),n}:Je(o));if(Ye(e))return r=e,new se((i=t)?function(t){var n=new Z;return n.add(i.schedule(function(){return r.then(function(e){n.add(i.schedule(function(){t.next(e),n.add(i.schedule(function(){return t.complete()}))}))},function(e){n.add(i.schedule(function(){return t.error(e)}))})})),n}:ze(r));if(Xe(e))return xe(e,t);if((n=e)&&"function"==typeof n[Ke]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new se(n?function(r){var i,e=new Z;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ke](),e.add(n.schedule(function(){if(!r.closed){var e,t;try{var n=i.next();e=n.value,t=n.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),e}:We(t))}(e,t)}var n,r,i,o,s,a;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function nt(t,i,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof i?function(e){return e.pipe(nt(function(n,r){return tt(t(n,r)).pipe(qe(function(e,t){return i(n,e,r,t)}))},n))}:("number"==typeof i&&(n=i),function(e){return e.lift(new rt(t,n))})}var rt=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new it(e,this.project,this.concurrent))},e}(),it=function(i){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=i.call(this,e)||this;return r.project=t,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return k(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=new Qe(this,void 0,void 0);this.destination.add(r),et(this,e,t,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(je);function ot(e,n,r,t){return q(r)&&(t=r,r=void 0),t?ot(e,n,r).pipe(qe(function(e){return K(e)?t.apply(void 0,e):t(e)})):new se(function(t){!function e(t,n,r,i,o){var s;if(f=t,f&&"function"==typeof f.addEventListener&&"function"==typeof f.removeEventListener){var a=t;t.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(h=t,h&&"function"==typeof h.on&&"function"==typeof h.off){var u=t;t.on(n,r),s=function(){return u.off(n,r)}}else if(p=t,p&&"function"==typeof p.addListener&&"function"==typeof p.removeListener){var c=t;t.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,d=t.length;l<d;l++)e(t[l],n,r,i,o)}var p;var h;var f;i.add(s)}(e,n,function(e){1<arguments.length?t.next(Array.prototype.slice.call(arguments)):t.next(e)},t,r)})}function st(e){return!K(e)&&0<=e-parseFloat(e)+1}function at(t,n){return void 0===t&&(t=0),void 0===n&&(n=Ve),(!st(t)||t<0)&&(t=0),n&&"function"==typeof n.schedule||(n=Ve),new se(function(e){return e.add(n.schedule(ut,t,{subscriber:e,counter:0,period:t})),e})}function ut(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return Ce(o)?(i=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===i&&1===e.length&&e[0]instanceof se?e[0]:(void 0===(n=r)&&(n=Number.POSITIVE_INFINITY),nt(Fe,n)(xe(e,i)))}var lt=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new dt(e,this.compare,this.keySelector))},e}(),dt=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.keySelector=n,r.hasKey=!1,"function"==typeof t&&(r.compare=t),r}return k(e,i),e.prototype.compare=function(e,t){return e===t},e.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},e}(ne);var pt=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ht(e,this.predicate,this.thisArg))},e}(),ht=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.predicate=t,r.thisArg=n,r.count=0,r}return k(e,i),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},e}(ne);function ft(t){return function(e){return 0===t?Ie():e.lift(new mt(t))}}var mt=function(){function e(e){if(this.total=e,this.total<0)throw new He}return e.prototype.call=function(e,t){return t.subscribe(new gt(e,this.total))},e}(),gt=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.count=0,n}return k(e,r),e.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},e}(ne);var yt=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new vt(e,this.total))},e}(),vt=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.count=0,n}return k(e,r),e.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},e}(ne);function bt(t){return function(e){return e.lift(new _t(t))}}var _t=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new St(e),r=et(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),St=function(n){function e(e){var t=n.call(this,e)||this;return t.seenValue=!1,t}return k(e,n),e.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(je);var Et=function(){function e(){}return e.prototype.incrementXpertCv=function(){},e.prototype.getXpertCv=function(){return""},e.prototype.logQoSEvent=function(e){},e.prototype.updateEnvironmentInfo=function(e){},e.prototype.isGAEvent=function(e){return!1},e.prototype.logGAEvent=function(e){},e.prototype.logGetVideoFeedAttempt=function(e){},e.prototype.logGetVideoFeedSummary=function(e){},e.prototype.logConnectTransportAttempt=function(e){},e.prototype.logConnectTransportSummary=function(e){},e.prototype.logTransportIncident=function(e){},e.prototype.logTransportStatistics=function(e){},e.prototype.logVideoPlaybackStatistics=function(e){},e.prototype.logVideoPlaybackRendering=function(e){},e.prototype.logVideoPlaybackQualitySwitch=function(e){},e.prototype.logVideoPlayerHeartbeat=function(e){},e.prototype.logJanusFlags=function(e){},e.prototype.logFallbackToNativePlayer=function(e){},e.prototype.logPlayerCDNFallback=function(e){},e.prototype.logPlayerLifecycleState=function(e){},e.prototype.logPlayerReportedSessions=function(e){},e.prototype.logPlayerDebugEvents=function(e){},e.prototype.logVideoPlaybackClosedCaptions=function(e){},e}(),wt=function(){function e(){}return e.prototype.info=function(e){},e.prototype.error=function(e){},e}(),Tt=function(){function e(){}return e.prototype.logTranscodeSelected=function(e,t,n,r,i,o,s){},e.prototype.logQoSEvent=function(e,t,n,r,i,o,s,a,u,c,l,d,p,h){},e.prototype.logStreamLoadAttempt=function(e){},e.prototype.logUnhandledMessage=function(e){},e.prototype.nextCorrelationVector=function(){return"emptyvector"},e.prototype.logTransportFailed=function(e,t,n,r,i,o){},e.prototype.logVideoLoadTime=function(e,t,n,r,i){},e.prototype.logFTLDisabled=function(){},e.prototype.logCaptionsEnabled=function(){},e.prototype.logAudioTrackSelected=function(e,t){},e.prototype.logFTLWebRTCNack=function(e,t,n,r){},e.prototype.logFTLPlisSent=function(e,t,n,r){},e.prototype.logTransportAttempt=function(e,t){},e.prototype.logWatchAttempt=function(e){},e.prototype.logManifestParsed=function(e,t){},e.prototype.logPlayDuration=function(e){},e.prototype.logStartupAbandoned=function(e){},e.prototype.logPeek=function(e){},e.prototype.logWebRTCStats=function(e,t,n,r,i,o,s,a,u,c,l,d,p,h,f,m,g,y,v,b,_,S,E,w,T){},e.prototype.logPacketsLost=function(e,t,n,r,i,o,s){},e.prototype.logFTLWebPlisSent=function(e,t,n,r,i){},e.prototype.logHLSError=function(e,t,n){},e.prototype.logLagDetected=function(e,t,n){},e.prototype.logFrameRatePercent=function(e,t,n,r){},e.prototype.logFailure=function(e,t,n){},e.prototype.logFTLGaveUp=function(e,t,n){},e.prototype.logTotalTransportFailure=function(e,t,n){},e}(),It="4.14.0",Ct=function(n){var r="[FTL lib]",t="",i=function(e){"string"==typeof e&&(t+=" ----- "+e)};return{getTrace:function(){return t},log:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(e){i(e),n&&t&&console.log(r,e)})},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(e){i(e),n&&t&&console.warn(r,e)})},error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(e){i(e),n&&t&&console.error(r,e)})}}},At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function kt(e){void 0===e&&(e=12);for(var t="",n=0;n<e;n++){var r=Math.floor(Math.random()*At.length);t+=At.substring(r,r+1)}return t}var xt=function(e){var t=e.is_auto_bw_enabled,n=e.user_invoked,r=void 0===n||n,i=e.transaction;return{janus:"message",body:{request:"setAutoBwState",is_auto_bw_enabled:t,user_invoked:r},handle_id:e.handle_id,session_id:e.session_id,transaction:i}},Nt=function(e){var t=e.transaction;return{janus:"message",body:{request:"getAutoBwState"},handle_id:e.handle_id,session_id:e.session_id,transaction:t}},Ot=function(e){var t=e.platform,n=e.browser,r=e.timestamp,i=e.framesReceived,o=e.framesDecoded,s=e.framesRendered,a=e.packetsLost,u=e.videoHeight,c=e.currentStall,l=e.qoEEventCount1M,d=e.qoEEventCountTotal,p=e.qoEStatus,h=e.currentVideoTime,f=(e.transaction,e.handle_id),m=e.session_id;return{janus:"message",body:{request:"playbackStats",platform:t,browser:n,timestamp:Math.round(r),framesReceived:i,framesDecoded:o,framesRendered:s,packetsLost:a,videoHeight:u,currentStall:c,qoEEventCount1M:l,qoEEventCountTotal:d,qoEStatus:p,currentVideoTime:h},handle_id:f,session_id:m,transaction:kt()}},Lt=function(){return(Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Mt=JSON.stringify,Dt=function(e){var r,i=e.data,o=e.socket,s=e.responseHandler,a=e.transactionMap,u=kt(12);return new Promise(function(n,e){if(o.readyState!==WebSocket.CLOSED){var t=function(e,t){clearTimeout(r),a.delete(e),n(t)};a.set(u,function(e){s?"ack"!==e.janus&&t(u,s(e)):t(u,e)}),o.send(Mt(Lt({},i,{transaction:u}))),r=setTimeout(function(){return e("Janus message timed out")},3e4)}else e("Unable to send because socket has already closed")})},Pt=function(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})},Rt=function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Vt=function(r,i){return Pt(void 0,void 0,void 0,function(){var t,n;return Rt(this,function(e){switch(e.label){case 0:return t={},i&&"function"==typeof i.getStats?[4,i.getStats()]:[3,2];case 1:return n=e.sent(),[3,4];case 2:return[4,r.getStats()];case 3:n=e.sent(),e.label=4;case 4:return n.forEach&&n.forEach(function(e){e&&e.type&&(t[e.type]=e)}),[2,t]}})})},Ft=function(e,t){var n=e.clientId,r=e.correlationVector,i=e.handleId,o=e.localDescription,s=e.sessionId,a=e.socket,u=e.transactionMap;void 0===t&&(t=Ct(!1));var c,l,d,p,h,f,m=(l=(c={clientId:n,correlationVector:r,handleId:i,localDescription:o,sessionId:s}).clientId,d=c.correlationVector,p=c.handleId,h=c.localDescription,f=c.sessionId,{janus:"message",body:{request:"start",client_id:l,correlation_vector:d},jsep:new RTCSessionDescription(h),handle_id:p,session_id:f});return t.log("Sending start request",m),Dt({data:m,socket:a,transactionMap:u})},Ut=function(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})},Ht=function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qt=void 0,Bt=function(e,u){var c=e.clientId,l=e.correlationVector,d=e.handleId,p=e.remoteDescription,h=e.peerConnection,f=e.sessionId,m=e.socket,g=e.transactionMap;return void 0===u&&(u=Ct(!1)),Ut(qt,void 0,void 0,function(){var t,a;return Ht(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,(n=h,r=p,s=u,Ut(qt,void 0,void 0,function(){var t;return Ht(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),s.log("Setting remote description",r),[4,n.setRemoteDescription(r)];case 1:return e.sent(),s.log("Successfully set remote description"),[3,3];case 2:throw t=e.sent(),s.error("Unable to set remote description ",t),t;case 3:return[2]}})}))];case 1:return e.sent(),[4,(i=h,o=u,Ut(qt,void 0,void 0,function(){var t,n,r;return Ht(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),o.log("Generating local description"),[4,i.createAnswer()];case 1:return t=e.sent(),o.log("Setting stereo parameters in the local SDP"),t&&t.sdp&&(-1!=(n=t.sdp.indexOf("fmtp:97 "))?(n+=8,t.sdp=t.sdp.slice(0,n)+"stereo=1;sprop-stereo=1;"+t.sdp.slice(n)):o.error("Unable to find audio ftmp in local SDP.")),o.log("Setting local description",t),[4,i.setLocalDescription(t)];case 2:return e.sent(),o.log("Successfully set local description"),[2,t];case 3:throw r=e.sent(),o.log("Unable to set local description ",r),r;case 4:return[2]}})}))];case 2:return t=e.sent(),[2,Ft({clientId:c,correlationVector:l,handleId:d,localDescription:t,sessionId:f,socket:m,transactionMap:g},u)];case 3:throw a=e.sent(),u.error("Unable to start stream ",a),a;case 4:return[2]}var i,o,n,r,s})})},Gt=function(e,t){return e.ontrack?(a=e,u=t,new Promise(function(r,i){var o,s=function(e){var t=e.streams;u.log("Handling track event","MediaStreams:",t),clearTimeout(o),t&&t[0]||i("No streams available");var n=t[0];a.removeEventListener("track",s),r(n)};a.addEventListener("track",s),o=setTimeout(i,3e4)})):(o=e,s=t,new Promise(function(n,e){var r,i=function(e){var t=e.stream;s.log("Handling legacy stream event","stream:",t),clearTimeout(r),o.removeEventListener("addstream",i),n(t)};o.addEventListener("addstream",i),r=setTimeout(e,3e4)}));var o,s,a,u},jt=function(e,n){var t=e.clientId,r=e.correlationVector,i=e.handleId,o=e.iceServers,s=e.remoteDescription,a=e.sessionId,u=e.socket,c=e.transactionMap;void 0===n&&(n=Ct(!1)),n.log("Setting up peer connection","Ice servers",o);var l=o.slice(0,2);n.log(JSON.stringify(l));var d=new RTCPeerConnection({iceServers:l}),p=function(e){var t=e.candidate;n.log("Adding ice candidate",t),d.addIceCandidate(t).then(function(){t&&function(e,t){var n=e.handleId,r=e.candidate,i=e.sessionId,o=e.socket,s=e.transactionMap;void 0===t&&(t=Ct(!1));var a,u,c=(a={handleId:n,candidate:{candidate:r.candidate,sdpMLineIndex:r.sdpMLineIndex,sdpMid:r.sdpMid},sessionId:i},u=a.handleId,{janus:"trickle",candidate:a.candidate,handle_id:u,session_id:a.sessionId});t.log("Sending trickle request",c),Dt({data:c,socket:o,transactionMap:s}).then(function(e){return t.log("Successfully sent trickle request",e)}).catch(function(e){return t.error("Error sending trickle request",e)})}({handleId:i,candidate:t,sessionId:a,socket:u,transactionMap:c},n)}).catch(function(e){return n.error("Unable to handle ice candidate",e)})};return d.addEventListener("icecandidate",p),Promise.all([Gt(d,n),Bt({clientId:t,correlationVector:r,handleId:i,remoteDescription:s,peerConnection:d,sessionId:a,socket:u,transactionMap:c},n)]).then(function(e){var t=e[0];return{getStats:function(){return a=d,Pt(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Rt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),t=a.getReceivers(),n=t[0],r=t[1],[4,Promise.all([Vt(a,n),Vt(a,r)])];case 1:return i=e.sent(),o=i[0],s=i[1],[2,{audioStats:o,videoStats:s}];case 2:return e.sent(),[4,Vt(a)];case 3:return[2,{audioStats:{},videoStats:s=e.sent()}];case 4:return[2]}})});var a},mediaStream:t,peerConnection:d,killPeerConnection:function(){n.log("Killing peer connection"),d.removeEventListener("icecandidate",p),t.getTracks().forEach(function(e){return e.stop()}),(d.signalingState&&"closed"!==d.signalingState||d.connectionState&&"closed"!==d.connectionState)&&(t.release&&t.release(),d.removeStream&&d.removeStream(t),d.getSenders&&d.getSenders().forEach(function(e){return d.removeTrack(e)})),d.close(),d=null}}}).catch(function(e){throw n.error("Unable to initialize peer connection ",e),e})},Qt=function(t){return function(e){return t.reduce(function(e,t){return e&&Object.getOwnPropertyDescriptor(e,t)?e[t]:null},e)}},zt=JSON.stringify,$t=function(e,t){},Kt=function(o,s,a){return void 0===a&&(a=$t),function(i){return new Promise(function(t,e){var n=setTimeout(function(){o.removeEventListener("message",r),e(Error("Timeout after "+s+"ms (tx#"+i+")"))},s),r=function(e){return function(e){try{return[JSON.parse(e)]}catch(e){return[]}}(e.data).filter(function(e){return a(i,e)}).forEach(function(e){clearTimeout(n),o.removeEventListener("message",r),t(e)})};o.addEventListener("message",r),o.send(zt(i))})}},Wt=function(t){return function(e){return t(e),e}},Jt=function(e){var r=e.socket,i=e.session_id,o=e.handle_id;return function(t,e,n){return void 0===e&&(e=3e4),void 0===n&&(n=Ct(!1)),Promise.resolve(kt()).then(Wt(function(e){return n.log("setAutoBwState("+t+"), (tx#"+e+")")})).then(function(e){return{is_auto_bw_enabled:t,session_id:i,handle_id:o,transaction:e}}).then(xt).then(Kt(r,e,Yt)).catch(function(e){return n.error("Error in setAutoBwState("+t+")",e),Promise.reject(e)})}},Xt=function(e){var n=e.socket,r=e.session_id,i=e.handle_id;return function(e,t){return void 0===e&&(e=3e4),void 0===t&&(t=Ct(!1)),Promise.resolve(kt()).then(Wt(function(e){return t.log("getAutoBwState() (tx#"+e+")")})).then(function(e){return{session_id:r,handle_id:i,transaction:e}}).then(Nt).then(Kt(n,e,Yt)).catch(function(e){return t.error("Error in getAutoBwState()",e),Promise.reject(e)})}},Yt=function(e,t){return t.transaction===e.transaction&&"ack"!==t.janus},Zt=Qt(["plugindata","data","result","state"]),en=function(e){return{autoAvailable:e.is_auto_bw_available,autoEnabled:e.is_auto_bw_enabled}},tn=function(){return(tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nn=function(e,t){return"ack"!==t.janus},rn=function(e){var t=Qt(["plugindata","data","result","result"])(e);return{autoBitrateInfo:Qt(["auto_bw"])(t),hostname:Qt(["hostname"])(t)}},on="UA-48751750-9",sn=function(){return(e=window)&&e.gaData&&e.gaData[on]&&e.gaData[on].experiments?window.gaData[on].experiments:void 0;var e},an=function(o,s,a,u){return new(a||(a=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})},un=function(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},cn=function(e){var $e=e.accessKey,Ke=e.channelId,t=e.clientId,We=void 0===t?"unknown":t,n=e.clientVersion,Je=void 0===n?"unknown":n,r=e.correlationVector,Xe=void 0===r?"":r,Ye=e.selectDefaultQuality,i=e.device,Ze=void 0===i?"unknown":i,o=e.deviceVersion,et=void 0===o?"unknown":o,s=e.gaFlags,tt=void 0===s?sn():s,a=e.keepAliveIntervalMs,nt=void 0===a?15e3:a,rt=e.iceServers,u=e.isEmbed,it=void 0!==u&&u,c=e.os,ot=void 0===c?"unknown":c,l=e.osVersion,st=void 0===l?"unknown":l,d=e.platform,at=void 0===d?"unknown":d,p=e.playerVersion,ut=void 0===p?"unknown":p,ct=e.server,h=e.sessionGuid,lt=void 0===h?"":h,f=e.shouldLog,dt=void 0!==f&&f,m=e.userAgent,pt=void 0===m?"unknown":m,ht=e.userId;return an(void 0,void 0,void 0,function(){var fe,me,ge,ye,ve,be,_e,Se,Ee,we,Te,Ie,Ce,Ae,ke,xe,Ne,Oe,Le,Me,De,Pe,Re,Ve,Fe,Ue,He,qe,Be,Ge,je,Qe,ze;return un(this,function(e){switch(e.label){case 0:fe=new Map,me=Ct(dt),ge=[],e.label=1;case 1:return e.trys.push([1,8,,9]),[4,function(e,o){var s,t=e.onCloseHandler,a=void 0===t?function(e){return o.log("WebSocket closing",e)}:t,n=e.messageHandlers,u=void 0===n?[]:n,r=e.server,c=e.transactionMap;void 0===o&&(o=Ct(!1)),o.log("Starting socket initialization");var l=new WebSocket(r,"janus-protocol"),d=function(e){var t=e.data,n=JSON.parse(t),r=Qt(["plugindata","data","result","status"])(n)||"none";o.log("WebSocket message (Status = "+r+"):",n),u.forEach(function(e){return e(n)});var i=c.get(n.transaction);i&&i(n)};return l.addEventListener("close",a),l.addEventListener("message",d),new Promise(function(e,t){function n(){l.removeEventListener("close",a),l.removeEventListener("error",i),l.removeEventListener("message",d),l.removeEventListener("open",r)}var r=function(){clearTimeout(s),e({socket:l,killSocket:function(){o.log("Killing socket connection"),n(),l.close()}})},i=function(e){o.error("WebSocket error",e),clearTimeout(s),n(),t(e)};l.addEventListener("open",r),l.addEventListener("error",i),s=setTimeout(function(){o.error("WebSocket Timeout"),t("WebSocket initialization timed out")},3e4)})}({messageHandlers:ge,server:ct,transactionMap:fe},me)];case 2:return ye=e.sent(),ve=ye.socket,be=ye.killSocket,[4,(le={socket:ve,transactionMap:fe},de=me,pe=le.socket,he=le.transactionMap,void 0===de&&(de=Ct(!1)),de.log("Sending connection creation request"),Dt({data:{janus:"create"},socket:pe,responseHandler:function(e){return Qt(["data","id"])(e)},transactionMap:he}))];case 3:return _e=e.sent(),[4,(te={clientId:We,correlationVector:Xe,sessionId:Se=_e,socket:ve,transactionMap:fe},ne=me,oe=te.clientId,se=te.correlationVector,ae=te.sessionId,ue=te.socket,ce=te.transactionMap,void 0===ne&&(ne=Ct(!1)),ne.log("Sending attach client request"),Dt({data:(re={clientId:oe,sessionId:ae,correlationVector:se,version:"0.0.17"},ie=re.correlationVector,{client_id:re.clientId,janus:"attach",plugin:"janus.plugin.plex",session_id:re.sessionId,version:re.version,body:{correlation_vector:ie}}),socket:ue,responseHandler:function(e){return Qt(["data","id"])(e)},transactionMap:ce}))];case 4:return Ee=e.sent(),we=Ee,[4,Promise.all([function(e,t){var n=e.clientId,r=e.clientVersion,i=e.correlationVector,o=e.device,s=e.deviceVersion,a=e.gaFlags,u=e.handleId,c=e.isEmbed,l=e.os,d=e.osVersion,p=e.platform,h=e.playerVersion,f=e.sessionGuid,m=e.sessionId,g=e.socket,y=e.transactionMap,v=e.userAgent,b=e.userId;void 0===t&&(t=Ct(!1));var _,S,E,w,T,I,C,A,k,x,N,O,L,M,D,P,R=(S=(_={clientId:n,clientVersion:r,correlationVector:i,device:o,deviceVersion:s,gaFlags:a,handleId:u,isEmbed:c,os:l,osVersion:d,platform:p,playerVersion:h,sessionGuid:f,sessionId:m,userAgent:v,userId:b}).clientId,E=_.clientVersion,w=_.correlationVector,T=_.device,I=_.deviceVersion,C=_.gaFlags,A=_.handleId,k=_.isEmbed,x=void 0!==k&&k,N=_.os,O=_.osVersion,L=_.platform,M=_.playerVersion,D=_.sessionGuid,P=_.sessionId,{janus:"message",body:{request:"initialize",protocol_version:1,platform:L,player_version:M,client:S,client_version:E,device:T,device_version:I,is_embed:x,os:N,os_version:O,user_agent:_.userAgent,ga_flags:C,correlation_vector:w,user_id:_.userId,session_guid:D},handle_id:A,session_id:P});return t.log("Sending initalize request",R),Dt({data:R,socket:g,responseHandler:rn,transactionMap:y})}({clientId:We,clientVersion:Je,correlationVector:Xe,device:Ze,deviceVersion:et,gaFlags:tt,handleId:Ee,isEmbed:it,os:ot,osVersion:st,platform:at,playerVersion:ut,sessionGuid:lt,sessionId:_e,socket:ve,transactionMap:fe,userAgent:pt,userId:ht},me),(G={accessKey:$e,channelId:Ke,clientId:We,handleId:Ee,sessionId:_e,socket:ve,transactionMap:fe},j=me,K=G.accessKey,W=G.channelId,J=G.clientId,X=G.handleId,Y=G.sessionId,Z=G.socket,ee=G.transactionMap,void 0===j&&(j=Ct(!1)),j.log("Sending list request"),Dt({data:(Q={accessKey:K,channelId:W,clientId:J,handleId:X,sessionId:Y},z=Q.accessKey,$=Q.channelId,{janus:"message",body:{access_key:z,client_id:Q.clientId,id:$,request:"list"},handle_id:Q.handleId,session_id:Q.sessionId}),socket:Z,responseHandler:function(e){return Qt(["plugindata","data","result","feeds"])(e)},transactionMap:ee})),(O={correlationVector:Xe,clientId:We,handleId:Ee,sessionId:_e,socket:ve,transactionMap:fe},V=O.correlationVector,F=O.clientId,U=O.handleId,H=O.sessionId,q=O.socket,B=O.transactionMap,void 0===L&&(L=Ct(!1)),L.log("Sending hostname request"),Dt({data:(M={correlationVector:V,clientId:F,handleId:U,sessionId:H},D=M.correlationVector,P=M.clientId,R=M.handleId,{janus:"message",body:{request:"hostname",correlation_vector:D,client_id:P},session_id:M.sessionId,handle_id:R}),socket:q,responseHandler:function(e){return Qt(["plugindata","data","result","hostname"])(e)},transactionMap:B}))])];case 5:if(Te=e.sent(),Ie=Te[0].autoBitrateInfo,Ce=Te[1],Ae=Te[2],me.log("Auto bitrate status:",Ie),ke=Qt(["0","feed_id"])(Ce),xe=Qt(["0","streams"])(Ce),me.log("Access Key: "+$e),!xe||Array.isArray(xe)&&!xe.length)throw me.log(JSON.stringify(Ce)),new Error("[Client] No qualities available");return me.log("Selecting Default Quality"),Ne=-1,Ye&&(Oe=Ye(xe))&&(Ne=+Oe.stream_id),[4,(h={accessKey:$e,channelId:Ke,clientId:We,feedId:ke,handleId:Ee,sessionId:_e,streamId:Ne,socket:ve,transactionMap:fe},f=me,E=h.accessKey,w=h.channelId,T=h.clientId,I=h.feedId,C=h.handleId,A=h.sessionId,k=h.streamId,x=h.socket,N=h.transactionMap,void 0===f&&(f=Ct(!1)),f.log("Sending watch request"),Dt({data:(m={accessKey:E,channelId:w,clientId:T,feedId:I,handleId:C,sessionId:A,streamId:k},g=m.accessKey,y=m.channelId,v=m.clientId,b=m.feedId,_=m.handleId,S=m.sessionId,{janus:"message",body:{access_key:g,client_id:v,feed_id:b,id:y,request:"watch",requested_stream_id:m.streamId},handle_id:_,session_id:S}),socket:x,responseHandler:function(e){return e},transactionMap:N}))];case 6:if(Le=e.sent(),!(Me=new RTCSessionDescription(Qt(["jsep"])(Le))))throw me.log(JSON.stringify(Le)),new Error("[Client] Null or empty remoteDescription");if(!Me.type)throw me.log(JSON.stringify(Le)),new Error("[Client] Remote description required type field is empty");if(null==Me.sdp)throw me.log(JSON.stringify(Le)),new Error("[Client] Remote description sdp is null");return De=Qt(["plugindata","data","result","result","actual_stream_id"])(Le),Pe=Qt(["plugindata","data","result","result","janus_flags"])(Le),Re=en(Qt(["plugindata","data","result","result","auto_bw"])(Le)),[4,jt({clientId:We,correlationVector:Xe,handleId:Ee,iceServers:rt,remoteDescription:Me,sessionId:_e,socket:ve,transactionMap:fe},me)];case 7:return Ve=e.sent(),Fe=Ve.getStats,Ue=Ve.mediaStream,He=Ve.peerConnection,qe=Ve.killPeerConnection,Be=function(e){var t,n,r,i,o,s,a,u,c,l,d,p,h,f=e.shouldMuteAudio,m=e.shouldMuteVideo;return n=me,a=(t={clientId:We,handleId:Ee,sessionId:_e,shouldMuteAudio:f,shouldMuteVideo:m,socket:ve,transactionMap:fe}).clientId,u=t.handleId,c=t.sessionId,l=t.shouldMuteAudio,d=t.shouldMuteVideo,p=t.socket,h=t.transactionMap,void 0===n&&(n=Ct(!1)),n.log("Sending mute request","MuteAudio: "+l+", MuteVideo: "+d),Dt({data:(r={clientId:a,handleId:u,sessionId:c,shouldMuteAudio:l,shouldMuteVideo:d},i=r.clientId,o=r.handleId,s=r.sessionId,{janus:"message",body:{request:"mute",audio:r.shouldMuteAudio?"mute":"unmute",video:r.shouldMuteVideo?"mute":"unmute",client_id:i},handle_id:o,session_id:s}),socket:p,transactionMap:h})},Ge=function(e){return function(e,t){var n=e.accessKey,u=e.channelId,r=e.clientId,c=e.feedId,i=e.handleId,l=e.messageHandlers,o=e.sessionId,d=e.socket,p=e.streamId,h=e.transactionMap;void 0===t&&(t=Ct(!1));var s,a,f,m=(a=(s={accessKey:n,channelId:u,clientId:r,feedId:c,streamId:p,handleId:i,sessionId:o}).accessKey,f=s.channelId,{janus:"message",body:{access_key:a,client_id:s.clientId,feed_id:s.feedId,id:f,request:"switch",stream_id:s.streamId},handle_id:s.handleId,session_id:s.sessionId});return t.log("Sending switch request",m),new Promise(function(s){var a=function(e){var t=Qt(["plugindata","data","result"])(e);if(t&&"switched"===t.status){var n=t.channel_id,r=t.feed_id,i=t.stream_id;if(n===u&&r===c&&i===p){var o=l.findIndex(function(e){return e===a});l.splice(o,1),s()}}};l.push(a),Dt({data:m,socket:d,transactionMap:h})})}({accessKey:$e,channelId:Ke,clientId:We,feedId:ke,handleId:Ee,messageHandlers:ge,sessionId:_e,socket:ve,streamId:e,transactionMap:fe},me)},je=function(e,t){var n=e.intervalMs,r=e.sessionId,i=e.socket,o=e.transactionMap;void 0===t&&(t=Ct(!1));var s=setInterval(function(){var e;t.log("Sending keep alive request"),Dt({data:(e={sessionId:r},{janus:"keepalive",session_id:e.sessionId}),socket:i,transactionMap:o}).catch(function(e){t.error("Unable to send keep alive",e),clearInterval(s)})},n);return s}({intervalMs:nt,sessionId:_e,socket:ve,transactionMap:fe},me),[2,{defaultQualityIndex:xe.findIndex(function(e){return e.stream_id===De}),getStats:Fe,killStream:function(){clearInterval(je),qe(),be()},hostName:Ae,mediaStream:Ue,mute:Be,peerConnection:He,janusFlags:Pe,qualities:xe,socket:ve,switchQuality:Ge,setAutoBwState:Jt({socket:ve,session_id:Se,handle_id:we}),getAutoBwState:Xt({socket:ve,session_id:Se,handle_id:we}),sendPlaybackStats:(c={socket:ve,session_id:Se,handle_id:we},l=c.socket,d=c.session_id,p=c.handle_id,function(t,e,n){return void 0===e&&(e=3e4),void 0===n&&(n=Ct(!1)),Promise.resolve(kt()).then(Wt(function(e){return n.log("sendPlaybackStats() (tx#"+e+")")})).then(function(e){return tn({handle_id:p,session_id:d,transaction:e},t)}).then(Ot).then(Kt(l,e,nn)).catch(function(e){return n.error("Error in sendPlaybackStats()",e),Promise.reject(e)})}),autoStatus:Re,setAutoState:(o={socket:ve,session_id:Se,handle_id:we},s=o.socket,a=o.session_id,u=o.handle_id,function(e,t,n){return void 0===t&&(t=3e4),void 0===n&&(n=Ct(!1)),Jt({socket:s,session_id:a,handle_id:u})(e,t,n).then(Zt).then(en).catch(function(e){return n.error("Error retrieving auto state"),Promise.reject(e)})}),getAutoState:(t={socket:ve,session_id:Se,handle_id:we},n=t.socket,r=t.session_id,i=t.handle_id,function(e,t){return void 0===e&&(e=3e4),void 0===t&&(t=Ct(!1)),Xt({socket:n,session_id:r,handle_id:i})(e,t).then(Zt).then(en).catch(function(e){return t.error("Error retrieving auto state"),Promise.reject(e)})})}];case 8:throw Qe=e.sent(),me.error("Unable to load stream ",Qe),(ze=Qe||new Error("Unknown failure in loading stream")).trace=me.getTrace(),ze;case 9:return[2]}var t,n,r,i,o,s,a,u,c,l,d,p,h,f,m,g,y,v,b,_,S,E,w,T,I,C,A,k,x,N,O,L,M,D,P,R,V,F,U,H,q,B,G,j,Q,z,$,K,W,J,X,Y,Z,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,de,pe,he})})},ln=function(){function e(e){this.qualities$=new pe,this.switching$=new pe,this.stop$=new Pe(1),this.error$=new pe,this.warning$=new pe,this.failure$=new pe,this.audioTracks$=new pe,this.captioned$=new ve(!1),this.captionsEnabled$=new ve(!1),this.loading$=new ve(!0),this.hostName$=new ve("unknown"),this.stats$=new pe,this.quality$=new pe,this.auto$=new ve({autoAvailable:!1,autoEnabled:!1}),this.playing$=new ve(!1),this.muted$=new ve(!1),this.audioOnly$=new ve(!1),this.promptDowngrade$=new pe,this.supportedConfig=e}return e.prototype.failure=function(){return this.failure$.asObservable()},e.prototype.captioned=function(){return this.captioned$.asObservable()},e.prototype.captionsEnabled=function(){return this.captionsEnabled$.asObservable()},e.prototype.audioTracks=function(){return this.audioTracks$.asObservable()},e.prototype.error=function(){return this.error$.asObservable()},e.prototype.warning=function(){return this.warning$.asObservable()},e.prototype.qualities=function(){return this.qualities$.asObservable()},e.prototype.quality=function(){return this.quality$.asObservable()},e.prototype.auto=function(){return this.auto$.asObservable()},e.prototype.switching=function(){return this.switching$.asObservable()},e.prototype.hostName=function(){return this.hostName$.asObservable().pipe(function(e){return e.lift(new lt(t,n))});var t,n},e.prototype.stats=function(){return this.stats$},e.prototype.getQualityStats=function(){return{currentEncodeFps:30,isSource:!1}},e.prototype.setQuality=function(e){},e.prototype.setAuto=function(e){},e.prototype.getAuto=function(){return Promise.reject("Not supported on current transport")},e.prototype.getKind=function(){throw new Error("abstract transport should not be used")},e.prototype.setCaptionsShowing=function(e){},e.prototype.setAudioTrack=function(e){},e.prototype.stop=function(){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.destroy=function(){},e.prototype.setAudioOnly=function(e){},e.prototype.setMute=function(e){},e.prototype.playing=function(){return this.playing$.asObservable()},e.prototype.muted=function(){return this.muted$.asObservable()},e.prototype.adjustMaxSize=function(e,t){},e.prototype.audioOnly=function(){return this.audioOnly$.asObservable()},e.prototype.getCurrentStreamTime=function(e){},e.prototype.promptDowngrade=function(){return this.promptDowngrade$.asObservable()},e.prototype.sendPlaybackStatsToJanus=function(e){},e}(),dn=function(){},pn=d.name,hn=d.osname,fn=d.osversion,mn=d.version,gn=function(h){function e(e){var t=e.clientId,n=e.isEmbed,r=void 0!==n&&n,i=e.supportedConfig,o=e.qualitySelector,s=e.statsIntervalMs,a=e.logger,u=e.sessionGuid,c=void 0===u?"":u,l=e.telemetry,d=e.userId,p=h.call(this,i)||this;return p.hasStreamLoaded$=new ve(!1),p.destroyed$=new pe,p.feeds$=new pe,p.isEmbed=!1,p.currentQualityIndex=-1,p.onMessage=function(e){var t=e.data,n=JSON.parse(t),r=E(["error"])(n),i=E(["plugindata","data","error"])(n),o=E(["plugindata","data","result","status"])(n);if(r){var s=r.code,a=r.reason;p.logger.error("Janus Error: "+a),p.onError({code:s,details:a,fatal:"rate limit exceeded"===a})}else if(i){var u=E(["plugindata","data"])(n),c=u.error,l=u.error_code;p.logger.error("Janus Plugin Error: "+c),p.onError({code:l,details:c,fatal:!1})}else if(o&&"switching"===o){var d=E(["plugindata","data","result","state"])(n);p.switching$.next(!0),d&&"number"==typeof d.to_stream_id&&p.setQualityIndex(d.to_stream_id)}else o&&"switched"===o&&p.switching$.next(!1)},p.onClose=function(){p.onError({details:"WebSocket closed",fatal:!0}),p.destroy()},p._mute=dn,p._killStream=dn,p._switchQuality=dn,p._setAuto=dn,p._getAuto=dn,p._sendPlaybackStats=dn,p.clientId=t,p.qualitySelector=o,p.statsIntervalMs=s,p.logger=a,p.sessionGuid=c,p.telemetry=l,p.userId=d,p.isEmbed=r,p}return k(e,h),e.prototype.setQualityIndex=function(t){var e=this.localQualities.filter(function(e){return e.stream_id===t});if(e&&0<e.length){var n=e[0].display_name;this.currentQualityIndex=this.localQualities.findIndex(function(e){return e.display_name===n}),this.quality$.next(this.currentQualityIndex)}},e.prototype.getQualityStats=function(){var e=30,t=!1;return this.localQualities&&0<=this.currentQualityIndex&&(e=this.localQualities[this.currentQualityIndex].frame_rate,t=this.localQualities[this.currentQualityIndex].is_source),{currentEncodeFps:e,isSource:t}},e.prototype.setQuality=function(i){return A(this,void 0,void 0,function(){var t,n,r;return N(this,function(e){switch(e.label){case 0:return this.switching$.next(!0),(t=this.auto$.getValue())&&t.autoEnabled?[4,this._setAuto(!1)]:[3,2];case 1:n=e.sent(),this.auto$.next(n),e.label=2;case 2:return r=this.localQualities[i].stream_id,[4,this._switchQuality(r)];case 3:return e.sent(),this.currentQualityIndex=i,this.quality$.next(this.currentQualityIndex),this.switching$.next(!1),[2]}})})},e.prototype.setAuto=function(n){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return[4,this._setAuto(n)];case 1:return t=e.sent(),this.auto$.next(t),[2]}})})},e.prototype.getAuto=function(){return this._getAuto()},e.prototype.stop=function(){this.destroy()},e.prototype.play=function(){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.playing$.next(!0),[4,this._mute({shouldMuteAudio:this.muted$.getValue(),shouldMuteVideo:this.audioOnly$.getValue()})];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),this.logger.error(t),t;case 3:return[2]}})})},e.prototype.pause=function(){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.playing$.next(!1),[4,this._mute({shouldMuteAudio:!0,shouldMuteVideo:!0})];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),this.logger.error(t),t;case 3:return[2]}})})},e.prototype.loadStream=function(E,e,w,T){var I=e.iceServers,C=e.server;return A(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d,p,h,f,m,g,y,v,b,_,S=this;return N(this,function(e){switch(e.label){case 0:(t=this.telemetry).incrementXpertCv(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,cn({accessKey:w,clientId:pn,clientVersion:""+mn,channelId:E,correlationVector:t.getXpertCv(),keepAliveIntervalMs:15e3,iceServers:I,selectDefaultQuality:function(e){if(S.qualitySelector){var t=e.map(function(e){return{displayName:e.display_name,height:e.height,width:e.width,bitrate:e.kbps}}),n=S.qualitySelector(t);if(n)return e[t.indexOf(n)]||null}},isEmbed:this.isEmbed,os:""+hn,osVersion:""+fn,platform:this.clientId,server:C,sessionGuid:this.sessionGuid,userAgent:navigator.userAgent,userId:this.userId})];case 2:return n=e.sent(),r=n.defaultQualityIndex,i=n.getStats,o=n.hostName,s=n.killStream,a=n.janusFlags,u=n.mediaStream,c=n.mute,l=n.peerConnection,d=n.socket,p=n.switchQuality,h=n.getAutoBwState,f=n.setAutoBwState,m=n.sendPlaybackStats,g=n.autoStatus,y=n.setAutoState,v=n.getAutoState,b=n.qualities,this.getAutoBwState=h,this.setAutoBwState=f,this._sendPlaybackStats=m||dn,this._mute=c||dn,this._killStream=s?function(){d.removeEventListener("message",S.onMessage),s()}:dn,this._switchQuality=p||dn,this._setAuto=y||dn,this._getAuto=v||dn,this.localQualities=b,this.currentQualityIndex=r,at(this.statsIntervalMs).pipe(bt(this.destroyed$)).subscribe(function(){return A(S,void 0,void 0,function(){var t,n,r;return N(this,function(e){switch(e.label){case 0:return[4,i()];case 1:return t=e.sent(),n=t.audioStats,r=t.videoStats,this.stats$.next({audioStats:n,videoStats:r}),[2]}})})}),d.addEventListener("message",this.onMessage),d.addEventListener("close",this.onClose),l.onconnectionstatechange=function(){switch(l.connectionState){case"closed":case"disconnected":case"failed":S.onError({details:"WebRTC PeerConnection closed",fatal:!0}),S.destroy()}},this.destroyed$.pipe(ft(1)).subscribe(function(){d.removeEventListener("close",S.onClose),l.onconnectionstatechange=null}),T(u),this.telemetry.logJanusFlags(a),O||this.telemetry.logVideoPlaybackRendering({duration:0,sdkVersion:It,success:!0,timeoutMs:0,transcodesAvailable:U.UNKNOWN,transport:F.FTL}),setTimeout(function(){S.qualities$.next(b.map(function(e){return{displayName:e.display_name,width:e.width,height:e.height,bitrate:e.kbps}})),S.quality$.next(r),S.auto$.next(g),S.hostName$.next(o),S.playing$.next(!0),S.hasStreamLoaded$.next(!0)}),[3,4];case 3:throw _=e.sent(),this.logger.error("Unable to load FTL stream: "+_.message),_;case 4:return[2]}})})},e.prototype.feeds=function(){return this.feeds$},e.prototype.getKind=function(){return"ftl"},e.prototype.setAudioTrack=function(e){},e.prototype.setCaptionsShowing=function(e){},e.prototype.destroy=function(){var t,n,e=this;this.hasStreamLoaded$.pipe((t=function(e){return e},function(e){return e.lift(new pt(t,n))}),bt(this.destroyed$)).subscribe(function(){e.destroyed$.next(),e._killStream(),e._mute=dn,e._killStream=dn,e._switchQuality=dn,e.setAutoBwState=dn,e.getAutoBwState=dn,e._sendPlaybackStats=dn})},e.prototype.setAudioOnly=function(n){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return t=!this.playing$.getValue(),this.audioOnly$.next(n),[4,this._mute({shouldMuteAudio:t,shouldMuteVideo:t||n})];case 1:return e.sent(),[2]}})})},e.prototype.setMute=function(n){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return t=!this.playing$.getValue(),this.muted$.next(n),[4,this._mute({shouldMuteAudio:n||t,shouldMuteVideo:this.audioOnly$.getValue()||t})];case 1:return e.sent(),[2]}})})},e.prototype.onError=function(e){var t=e.code,n=e.details,r=e.name;this.logger.error("FTL Transport Errors: "+t+": "+r+" - "+n),this.telemetry.logTransportIncident({details:n,errorCode:t,errorName:r,hostName:this.hostName$.getValue(),incidentType:H.FTL_ERROR,transport:F.FTL}),this.error$.next(e)},e.prototype.switchStreams=function(e,t){this.switching$.next(!0),this._switchQuality(t)},e.prototype.sendPlaybackStatsToJanus=function(t){return A(this,void 0,void 0,function(){return N(this,function(e){return this._sendPlaybackStats(t),[2]})})},e.prototype.getCurrentStreamTime=function(e){},e}(ln),yn=O?l("http://web.archive.org/web/20190528235110/https://c-ning.videosvc.mixer.com/dependencies/hls.js/0.12.4/hls.min.js").catch(function(e){return l("http://web.archive.org/web/20190528235110/https://mixer.com/_latest/assets/js/hls.js")}):Promise.reject(),vn=function(){if(!O)return!1;var e=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r};var bn=function(e){return e},_n=function(e){return{displayName:e.name?e.name:e.height+"p",width:e.width,height:e.height,bitrate:e.bitrate}},Sn=function(s){function e(e,t,n,r,i){var o=s.call(this,t)||this;return o.channelId=e,o.metricsLogger=r,o.telemetry=i,o.showCaptions=!1,o.audioTrack=0,o.isAudioOnly=!1,o.hlsManifest=new Pe(1),o.levelOriginalIndexMap=[],o.isMute=!1,o.hlsQualityIndex=-1,o.qualitySelector=function(e){return e[0]},o.currentEncodeFps=30,o}return k(e,s),e.prototype.stashManifest=function(e){var t=e.data;this.hlsManifest.next("string"==typeof t?t:String.fromCharCode.apply(null,new Uint16Array(t)))},e.prototype.setupHLS=function(t,e,n,r,i,o,s){var l=this;void 0===n&&(n=function(){}),void 0===r&&(r=bn),void 0===i&&(i=!1),void 0===o&&(o=!1),this.hostName$.next(t);var d=0,p=0,h=0,a=0,f=0,u=o?L(t,"showAudioOnly",2):t.replace("&showAudioOnly=2","");this.showCaptions=i,s&&(this.qualitySelector=s),this.isAudioOnly=o;var c,m,g,y=(c=function(e){e.url===t&&l.stashManifest(e)},function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return k(e,r),e.prototype.load=function(e,t,n){r.prototype.load.call(this,e,t,x({},n,{onSuccess:function(e){c(e),n.onSuccess.apply(this,arguments)}}))},e}(Hls.DefaultConfig.loader)),v=this.hls=(g={autoStartLoad:!1,appendErrorMaxRetry:10,liveMaxLatencyDurationCount:10,maxBufferLength:20,startFragPrefetch:!0,loader:y},(m=e)&&(g.liveSyncDurationCount=m),new Hls(g));r(v),this.audioOnly$.next(o),ot(v,Hls.Events.LEVEL_SWITCHED,function(e,t){return t.level}).pipe(bt(this.stop$)).subscribe(function(e){if(!(null==(n=e)||"number"==typeof n&&isNaN(n))){l.hlsQualityIndex=e;var t=l.levelOriginalIndexMap[e];l.quality$.next(t)}var n});var b=this.changedInstance(),_=new Map;ot(v,Hls.Events.MANIFEST_LOADED,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1]}).pipe(bt(b)).subscribe(function(e){var t=e.networkDetails,n=e.stats,r=e.url;l.telemetry.logQoSEvent({contentType:"application/json",cV:l.telemetry.getXpertCv(),currentOperationName:"hlsManifest",latencyMs:n.total,httpMethod:"GET",httpStatusCode:""+t.status,isSuccess:!0,operationName:"hlsManifest",operationVersion:"N/A",requestUri:r,responseSize:120,serviceErrorCode:-1,serviceName:"MixerVideoCDN-Fastly",serviceType:"WebService"})}),ot(v,Hls.Events.ERROR,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1]}).pipe(bt(b)).subscribe(function(e){var t,n=e.details,r=e.fatal,i=e.type;switch(n){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:d+=1;var o=e.response,s=e.url,a=(t="hlsLoadSource",performance.getEntriesByName("name").find(function(e){return"mark"===e.entryType&&e.name===t})),u=a?Math.trunc(performance.now()-a.startTime):-1,c=l.telemetry;c.logQoSEvent({contentType:"application/json",cV:c.getXpertCv(),currentOperationName:"hlsManifest",latencyMs:u,httpMethod:"GET",httpStatusCode:""+o.code,isSuccess:!1,operationName:"fastly",operationVersion:"N/A",requestUri:s,responseSize:-1,serviceErrorCode:Number(o.code),serviceName:"MixerVideoCDN-Fastly",serviceType:"WebService"});break;case Hls.ErrorDetails.BUFFER_STALLED_ERROR:60<v.media.currentTime?(p+=1,h=Number((60*p/v.media.currentTime).toFixed(2))):p=1;break;case Hls.ErrorDetails.FRAG_PARSING_ERROR:f+=1}if(r)switch(i){case Hls.ErrorTypes.NETWORK_ERROR:v.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:v.recoverMediaError()}_.set(n,_.get(n)+1||1),l.metricsLogger.logHLSError(l.channelId,n,r,l.hostName$.getValue(),(new Date).toString(),_.get(n)||1),l.telemetry.logTransportIncident(x({},e,{hostname:l.hostName$.getValue(),manifest:S,incidentType:H.HLS_ERROR,transport:F.HLS})),console.error(e),l.error$.next({details:n,fatal:r})}),ot(v,Hls.Events.MEDIA_ATTACHED).pipe(ft(1),nt(function(){return l.setCaptionsShowing(l.showCaptions),n(),l.telemetry.incrementXpertCv(),performance.mark("hlsLoadSource"),v.loadSource(u),l.hls&&l.hls.media&&(l.hls.media.muted=l.isMute,l.isMute&&l.muted$.next(!0)),ot(v,Hls.Events.MANIFEST_PARSED).pipe(ft(1)).subscribe(function(e){var t,n,r,i,o=e[1].levels;0<o.length&&(l.hls.startLevel=l.hls.nextLevel=(t=o,n=l.qualitySelector,r=t.map(_n),(i=n(r))?r.indexOf(i):-1),l.auto$.next({autoAvailable:!0,autoEnabled:l.hls.autoLevelEnabled})),l.hls.startLoad()}),ot(v,Hls.Events.MANIFEST_LOADED).pipe(ft(1))}),nt(function(){return l.updateCurrentQuality(),v.media&&ot(v.media,"loadedmetadata").pipe(ft(1)).subscribe(function(){if(0<l.hls.audioTracks.length){var e=l.hls.audioTracks.findIndex(function(e){return"English"===M(e.name)});l.hls.audioTrack=e||0}var t=Array.from(l.hls.media.textTracks).some(function(e){return"captions"===e.kind||"subtitles"===e.kind});return l.captioned$.next(t||i),!1}),ot(v,Hls.Events.FRAG_BUFFERED).pipe(ft(1))}),bt(b)).subscribe(function(){l.playing$.next(!0)});var S,E=[],w=[],T=0,I=0,C=0,A=[];v.on(Hls.Events.FRAG_PARSING_DATA,function(e,t){"video"===t.type&&0<t.endPTS-t.startPTS&&(l.currentEncodeFps=Number((t.nb/(t.endPTS-t.startPTS)).toFixed(2)))}),v.on(Hls.Events.MANIFEST_LOADING,function(e,t){var n=t.url;return S=n}),v.on(Hls.Events.FRAG_LOADING,function(){return T=Date.now()}),v.on(Hls.Events.FRAG_LOADED,function(e,t){var n=t.frag,r=t.stats;E.push(r.total),w.push(Date.now()-T),I=r.retry,C+=1,A.push(n.duration)}),v.on(Hls.Events.FPS_DROP,function(e,t){10<t.currentDropped&&(60<v.media.currentTime?a++:a=1)}),at(6e4).pipe(bt(this.stop$)).subscribe(function(){var e=l.hls.levels[l.hlsQualityIndex];if(e){var t=e.bitrate,n=e.height,r=e.width,i=n&&r?r+"x"+n:void 0;l.telemetry.logTransportStatistics({bitrate:t||void 0,hostName:l.hostName$.getValue(),fragDownloadTimes:w,fragSizes:E,manifest:S,resolution:i,retryCount:I,segmentCount:C,segmentDurations:A,transport:F.HLS,networkErrorCount:d,bufferStallCount:p,fpsDropCount:a,corruptedSegmentCount:f,bufferStallRate:h,currentVideoTime:Number(v.media.currentTime.toFixed(2))}),w=[],E=[],C=I=0,A=[]}}),this.watchLevelChanges()},e.prototype.updateCurrentQuality=function(){var e=this.hls.levels.map(_n).sort(function(e,t){return t.height-e.height});this.levelOriginalIndexMap=e.reduceRight(function(e,t,n){return e.concat([n])},[]),this.qualities$.next(e)},e.prototype.watchLevelChanges=function(){var t,e=this,n=this.hls;ot(n,Hls.Events.LEVEL_LOADED).pipe(bt(this.changedInstance()),ft(1)).subscribe(function(){e.supportedConfig&&!e.supportedConfig.uhd&&e.hls.levels&&1440<e.hls.levels[e.hls.levels.length-1].height&&(e.hls.autoLevelCapping=e.hls.levels.length-2),e.updateCurrentQuality()}),ct(ot(n,Hls.Events.LEVEL_LOADED),ot(n,Hls.Events.LEVEL_UPDATED)).pipe(bt(this.changedInstance()),(t=1,function(e){return e.lift(new yt(t))})).subscribe(function(){return e.updateCurrentQuality()})},e.prototype.getQualityStats=function(){return{currentEncodeFps:this.currentEncodeFps,isSource:!1}},e.prototype.setQuality=function(e){var t=this.levelOriginalIndexMap[e];this.hls&&(this.hls.nextLevel=t,this.auto$.next({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled}))},e.prototype.setAuto=function(e){this.hls&&(this.hls.nextLevel=e?-1:this.hls.currentLevel,this.auto$.next({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled}))},e.prototype.getAuto=function(){return Promise.resolve({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled})},e.prototype.setAudioTrack=function(e){this.audioTrack=e,this.hls&&this.hls.audioTracks&&(this.hls.audioTrack=this.audioTrack)},e.prototype.setCaptionsShowing=function(e){var t=this;this.showCaptions=e,this.hls&&this.hls.media&&this.hls.media.textTracks&&(0<this.hls.media.textTracks.length?this.captionsEnabled$.next(w(this.hls.media,this.showCaptions)):this.hls.media.textTracks.addEventListener("addtrack",function(){t.hls.media&&t.captionsEnabled$.next(w(t.hls.media,t.showCaptions))},{once:!0}))},e.prototype.changedInstance=function(){return ct(this.stop$)},e.prototype.getKind=function(){return"hls"},e.prototype.destroy=function(){this.hls&&(this.stop$.next(void 0),this.hls.destroy())},e.prototype.setAudioOnly=function(e){this.isAudioOnly!==e&&this.error$.next({fatal:!0,details:"audioOnly changed"})},e.prototype.setMute=function(e){this.isMute=e,this.hls&&this.hls&&this.hls.media&&(this.hls.media.muted=e,this.muted$.next(e))},e.prototype.pause=function(){this.hls&&this.hls.media&&(this.hls.media.pause(),this.playing$.next(!1))},e.prototype.play=function(){this.hls&&this.hls.media&&(this.hls.media.play(),this.playing$.next(!0))},e.prototype.getCurrentStreamTime=function(e){},e.bufferSectionTime=1e3,e.bufferThresholdCount=4,e.bufferThresholdInterval=12e4,e}(ln),En=(function(t){function e(e){return t.call(this,e)||this}k(e,t),e.prototype.getKind=function(){return"hls"}}(ln),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.getKind=function(){return"hls"},t}(ln)),wn=s(function(e,t){!function(a){var e,t={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},c=function(){function e(){}return e.isNullOrUndefined=function(e){return null==e},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(n,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e}(),n=/[xy]/g,l=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);-1<t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},e.prototype.eventsSent=function(t){for(var n=this,e=function(e){r.listeners[e].eventsSent&&setTimeout(function(){return n.listeners[e].eventsSent(t)},0)},r=this,i=0;i<this.listeners.length;++i)e(i)},e.prototype.eventsDiscarded=function(t,n){for(var r=this,e=function(e){i.listeners[e].eventsDiscarded&&setTimeout(function(){return r.listeners[e].eventsDiscarded(t,n)},0)},i=this,o=0;o<this.listeners.length;++o)e(o)},e}();(e=a.LoggingSeverity||(a.LoggingSeverity={}))[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING";var s={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69},u=function(){function o(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?o.AiUserActionablePrefix:o.AiNonUserActionablePrefix)+e;var i=(t?" message:"+o.sanitizeDiagnosticText(t):"")+(r?" props:"+o.sanitizeDiagnosticText(JSON.stringify(r)):"");this.message+=i}return o.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},o.dataType="MessageData",o.AiNonUserActionablePrefix="AI (Internal): ",o.AiUserActionablePrefix="AI: ",o}(),d=function(){function e(e){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 1},this.telemetryLoggingLevel=function(){return 0},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},c.isNullOrUndefined(e)||(c.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),c.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),c.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),c.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return e.prototype.throwInternal=function(e,t,n,r,i){void 0===i&&(i=!1);var o=new u(t,n,i,r);if(this.enableDebugExceptions())throw o;if(void 0!==o&&o&&void 0!==o.message){if(i){var s=+o.messageId;(!this._messageLogged[s]||this.consoleLoggingLevel()>=a.LoggingSeverity.WARNING)&&(this.warnToConsole(o.message),this._messageLogged[s]=!0)}else this.consoleLoggingLevel()>=a.LoggingSeverity.WARNING&&this.warnToConsole(o.message);this.logInternalMessage(e,o)}},e.prototype.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},e.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,r=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[r]?n=!1:this._messageLogged[r]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var i="Internal events throttle limit per PageView reached for this app.",o=new u(s.MessageLimitPerPVExceeded,i,!1);this.queue.push(o),this.warnToConsole(i)}}},e.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},e}(),r=function(){function e(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new i}return e.prototype.initialize=function(e,t){var n=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!e||c.isNullOrUndefined(e.instrumentationKey))throw Error("Please provide instrumentation key");if(this.config=e,this._notificationManager=new l,this.config.extensions=c.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=c.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new d(e),t.forEach(function(e){if(c.isNullOrUndefined(e.initialize))throw Error(p)}),0<this.config.extensions.length){var r=!0;if(this.config.extensions.forEach(function(e){c.isNullOrUndefined(e)&&(r=!1)}),!r)throw Error(p)}(o=this._extensions).push.apply(o,[this._channelController].concat(t,this.config.extensions)),this._extensions=this._extensions.sort(function(e,t){var n=e,r=t,i=typeof n.processTelemetry,o=typeof r.processTelemetry;return"function"===i&&"function"===o?n.priority-r.priority:"function"===i&&"function"!==o?1:"function"!==i&&"function"===o?-1:void 0});var i={};this._extensions.forEach(function(e){var t=e;t&&t.priority&&(c.isNullOrUndefined(i[t.priority])?i[t.priority]=t.identifier:n.logger.warnToConsole("Two extensions have same priority"+i[t.priority]+", "+t.identifier))});for(var o,s=-1,a=0;a<this._extensions.length-1;a++){var u=this._extensions[a];if(!u||"function"==typeof u.processTelemetry){if(u.priority===h){s=a+1;break}this._extensions[a].setNextPlugin(this._extensions[a+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(e){e&&e.priority<h&&e.initialize(n.config,n,n._extensions)}),s<this._extensions.length&&this._extensions.splice(s),0===this.getTransmissionControls().length)throw new Error("No channels available");this._isInitialized=!0},e.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},e.prototype.track=function(e){if(null===e)throw this._notifiyInvalidEvent(e),Error("Invalid telemetry item");if(e.baseData&&!e.baseType)throw this._notifiyInvalidEvent(e),Error("Provide data.baseType for data.baseData");e.baseType||(e.baseType="EventData"),e.iKey||(e.iKey=this.config.instrumentationKey),e.time||(e.time=(new Date).toISOString()),c.isNullOrUndefined(e.ver)&&(e.ver="4.0"),this._validateTelmetryItem(e);for(var t=0;t<this._extensions.length;){if(this._extensions[t].processTelemetry){this._extensions[t].processTelemetry(e);break}t++}},e.prototype.addNotificationListener=function(e){this._notificationManager.addNotificationListener(e)},e.prototype.removeNotificationListener=function(e){this._notificationManager.removeNotificationListener(e)},e.prototype.pollInternalLogs=function(){var n=this,e=this.config.diagnosticLogInterval;return 0<e||(e=1e4),setInterval(function(){var e=n.logger.queue;e.forEach(function(e){var t={name:"InternalMessageId: "+e.messageId,iKey:n.config.instrumentationKey,time:(new Date).toISOString(),baseType:u.dataType,baseData:{message:e.message}};n.track(t)}),e.length=0},e)},e.prototype._validateTelmetryItem=function(e){if(c.isNullOrUndefined(e.name))throw this._notifiyInvalidEvent(e),Error("telemetry name required");if(c.isNullOrUndefined(e.time))throw this._notifiyInvalidEvent(e),Error("telemetry timestamp required");if(c.isNullOrUndefined(e.iKey))throw this._notifiyInvalidEvent(e),Error("telemetry instrumentationKey required")},e.prototype._notifiyInvalidEvent=function(e){this._notificationManager.eventsDiscarded([e],t.InvalidEvent)},e}(),i=function(){function e(){this.identifier="ChannelControllerPlugin",this.priority=h}return e.prototype.processTelemetry=function(t){this.channelQueue.forEach(function(e){0<e.length&&e[0].processTelemetry(t)})},Object.defineProperty(e.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),e.prototype.initialize=function(n,r,i){var o=this;if(this.channelQueue=new Array,n.channels)n.channels.forEach(function(e){if(e&&0<e.length){(e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){return e.initialize(n,r,i)});for(var t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);o.channelQueue.push(e)}});else{for(var e=new Array,t=0;t<i.length;t++){var s=i[t];s.priority>h&&e.push(s)}if(0<e.length){for((e=e.sort(function(e,t){return e.priority-t.priority})).forEach(function(e){return e.initialize(n,r,i)}),t=1;t<e.length;t++)e[t-1].setNextPlugin(e[t]);this.channelQueue.push(e)}}},e}(),p="Extensions must provide callback to initialize",h=200;a.MinChannelPriorty=100,a.EventsDiscardedReason=t,a.AppInsightsCore=r,a.CoreUtils=c,a.NotificationManager=l,a.DiagnosticLogger=d,a._InternalLogMessage=u,a._InternalMessageId=s,Object.defineProperty(a,"__esModule",{value:!0})}(t)});o(wn);var Tn=wn.CoreUtils,In=wn.AppInsightsCore,Cn=wn.EventsDiscardedReason,An=wn.LoggingSeverity,kn=wn._InternalMessageId,xn=(wn.MinChannelPriorty,wn.NotificationManager,wn.DiagnosticLogger,1),Nn=2,On=3,Ln="1.0.0-beta.6",Mn="1DS-Web-JS-"+Ln,Dn="undefined",Pn=null,Rn=null,Vn=Boolean("undefined"!=typeof document&&document.cookie);function Fn(e){return"string"==typeof e}function Un(e){return"number"==typeof e}function Hn(e){return"boolean"==typeof e}function qn(e){var t=e.indexOf("-");return-1<t?e.substring(0,t):""}function Bn(){return null===Pn&&(Pn=typeof navigator!==Dn&&Boolean(navigator.sendBeacon)),Pn}function Gn(e){return!!(Un(e)&&1<=e&&e<=3)}function jn(e,t){if(!Fn(e)||null==t||""===t)return null;if(Fn(t)||Un(t)||Hn(t)||zn(t))t={value:t};else if("object"!=typeof t||t.value){if(void 0===t.value||null===t.value||""===t.value||!Fn(t.value)&&!Un(t.value)&&!Hn(t.value)&&!zn(t.value))return null}else t={value:JSON.stringify(t)};if(zn(t.value)&&!function(e){if(0<e.length)return Fn(e[0])||Hn(e[0])||Un(e[0]);return!1}(t.value))return null;if(void 0!==t.kind){if(zn(t.value)||!function(e){if(Un(e)&&(0<=e&&e<=13||32===e))return!0;return!1}(t.kind))return null;t.value=t.value.toString()}return t}function Qn(){return!(typeof navigator===Dn||!navigator.product)&&"ReactNative"===navigator.product}function zn(e){return e instanceof Array}function $n(e,t){var n=-1;return 0<t&&(32===t?n=1<<13:t<=13&&(n=t<<5)),zn(e)&&(e=e[0]),-1!==n?n|function(e){{if(Un(e))return 6;if(Fn(e))return 1;if(Hn(e))return 7}}(e):Un(e)?6:void 0}function Kn(e,t,n){if(Vn){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="; expires="+r.toUTCString();window.document.cookie=e+"="+t+i+"; path=/;"}}function Wn(e){return e<10?"0"+e:e.toString()}var Jn,Xn,Yn,Zn,er,tr=Object.freeze({StatsApiKey:"a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238",Version:Ln,FullVersionString:Mn,Undefined:Dn,isString:Fn,isNumber:Un,isBoolean:Hn,getTenantId:qn,isBeaconsSupported:Bn,isUint8ArrayAvailable:function(){return null===Rn&&(Rn=typeof Uint8Array!==Dn&&!function(){if(typeof navigator!==Dn&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((0<=e.indexOf("safari")||0<=e.indexOf("firefox"))&&e.indexOf("chrome")<0)return!0}return!1}()&&!Qn()),Rn},isLatency:Gn,sanitizeProperty:jn,getISOString:function(e){return e.getUTCFullYear()+"-"+Wn(e.getUTCMonth()+1)+"-"+Wn(e.getUTCDate())+"T"+Wn(e.getUTCHours())+":"+Wn(e.getUTCMinutes())+":"+Wn(e.getUTCSeconds())+"."+(t=e.getUTCMilliseconds(),t<10?"00"+t:t<100?"0"+t:t.toString())+"Z";var t},isReactNative:Qn,isArray:zn,getCommonSchemaMetaData:$n,cookieAvailable:function(){return Vn},setCookie:Kn,deleteCookie:function(e){Kn(e,"",-1)},getCookie:function(e){if(Vn){e+="=";for(var t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n],i=0;" "===r.charAt(i);)i++;if(0===(r=r.substring(i)).indexOf(e))return r.substring(e.length,r.length)}}return""}}),nr=(Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}Jn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rr=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return nr(e,r),e.prototype.initialize=function(e,t){if(e){e.endpointUrl||(e.endpointUrl="http://web.archive.org/web/20190528235110/https://browser.events.data.microsoft.com/OneCollector/1.0/");var n=e.propertyStorageOverride;if(n&&(!n.getProperty||!n.setProperty))throw"Invalid property storage override passed.";e.getWParam=function(){return"undefined"!=typeof document?0:-1}}r.prototype.initialize.call(this,e,t)},e.prototype.track=function(e){e&&(Gn(e.latency)||(e.latency=xn)),r.prototype.track.call(this,e)},e}(In),ir="MicrosoftApplicationsTelemetryDeviceId",or="Windows",sr="Mac OS X",ar="Android",ur=/(windows|win32)/i,cr=/ arm;/i,lr=/windows\sphone\s\d+\.\d+/i,dr=/(macintosh|mac os x)/i,pr=/(ipad|iphone|ipod)(?=.*like mac os x)/i,hr=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,fr=/android/i,mr=/CrOS/i,gr={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},yr="([\\d,.]+)",vr="Unknown",br="undefined",_r="MSIE",Sr="Chrome",Er="Firefox",wr="Safari",Tr="Edge",Ir="Electron",Cr="SkypeShell",Ar="PhantomJS",kr="Opera",xr="ext.",Nr=xr+"sdk.",Or=xr+"web.",Lr=xr+"intweb.",Mr=xr+"user.",Dr=xr+"os.",Pr=function(){function e(e,t){for(var n in this._propertiesPlugin=t,this._utils=tr,this._config={userAgent:typeof navigator!==br?navigator.userAgent:""},e)e.hasOwnProperty(n)&&(this._config[n]=e[n])}return e.prototype.initialize=function(e,t){void 0===t&&(t=!1),e&&(this._propertyStorage=e),this._autoCollect(),this._autoCollectFromUserAgent(this._config.userAgent),!t||this._propertyStorage?(this._propertyStorage||this._utils.cookieAvailable()&&!t)&&this._autoCollectInstallId():this._utils.deleteCookie(ir)},e.prototype._autoCollect=function(){if(this._setPartA("ver","4.0"),this._setPartA("ext.utc.popSample",100),this._setPartA(Nr+"ver",Mn),typeof window!==br){var e=window.location;if(e){var t=e.hostname;t&&this._setPartA(Or+"domain","file:"===e.protocol?"local":t)}}if(!this._disableCookies&&this._utils.cookieAvailable()){this._setPartA(Lr+"msfpc",this._utils.getCookie("MSFPC"));var n=this._utils.getCookie("MUID");n&&this._setPartA(Mr+"localId","t:"+n),this._setPartA(Lr+"anid",this._utils.getCookie("ANON").slice(0,34))}if(typeof document!==br){var r=document.documentElement;r&&this._setPartA(xr+"app.locale",r.lang)}if(typeof navigator!==br){var i=navigator;this._setPartA(Mr+"locale",i.userLanguage||i.language)}var o=(new Date).getTimezoneOffset(),s=o%60,a=(o-s)/60,u="+";0<a&&(u="-"),a=Math.abs(a),s=Math.abs(s),this._setPartA(xr+"loc.tz",u+(a<10?"0"+a:a.toString())+":"+(s<10?"0"+s:s.toString()))},e.prototype._autoCollectFromUserAgent=function(e){if(e){var t=this._getOsName(e.toLowerCase());this._setPartA(Dr+"name",t),this._setPartA(Dr+"ver",this._getOsVersion(e,t));var n=this._getBrowserName(e);this._setPartA(Or+"browser",n),this._setPartA(Or+"browserVersion",this._getBrowserVersion(e,n))}},e.prototype._autoCollectInstallId=function(){var e=this._getData(ir);e||(e=Tn.newGuid()),this._saveData(ir,e),this._setPartA(Nr+"installId",e)},e.prototype._getOsName=function(e){return e.match(lr)?"Windows Phone":e.match(cr)?"Windows RT":e.match(ur)?or:e.match(pr)?"iOS":e.match(fr)?ar:e.match(hr)?"Linux":-1!==e.indexOf("x11")?"Unix":-1!==e.indexOf("blackberry")?"BlackBerry":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("nokia")?"Nokia":e.match(dr)?sr:e.match(mr)?"Chrome OS":vr},e.prototype._getOsVersion=function(e,t){return t===or?this._getGenericOsVersion(e,"Windows NT"):t===ar?this._getGenericOsVersion(e,t):t===sr?this._getMacOsxVersion(e):vr},e.prototype._getGenericOsVersion=function(e,t){var n=e.match(new RegExp(t+" "+yr));return n?gr[n[1]]?gr[n[1]]:n[1]:vr},e.prototype._getMacOsxVersion=function(e){var t=e.match(new RegExp(sr+" ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var r=this._getDelimiter(n);return r?n.split(r)[0]:n}}return vr},e.prototype._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?kr:this._userAgentContainsString(Ar,e)?Ar:this._userAgentContainsString(Tr,e)?Tr:this._userAgentContainsString(Ir,e)?Ir:this._userAgentContainsString(Sr,e)?Sr:this._userAgentContainsString("Trident",e)?_r:this._userAgentContainsString(Er,e)?Er:this._userAgentContainsString(wr,e)?wr:this._userAgentContainsString(Cr,e)?Cr:vr},e.prototype._userAgentContainsString=function(e,t){return-1<t.indexOf(e)},e.prototype._getBrowserVersion=function(e,t){return t===_r?this._getIeVersion(e):this._getOtherVersion(t,e)},e.prototype._getIeVersion=function(e){var t=e.match(new RegExp(_r+" "+yr));if(t)return t[1];var n=e.match(new RegExp("rv:"+yr));return n?n[1]:void 0},e.prototype._getOtherVersion=function(e,t){e===wr&&(e="Version");var n=t.match(new RegExp(e+"/"+yr));return n?n[1]:vr},e.prototype._getDelimiter=function(e){return-1<e.indexOf(".")?".":-1<e.indexOf("_")?"_":null},e.prototype._saveData=function(e,t){this._propertyStorage?this._propertyStorage.setProperty(e,t):this._utils.setCookie(e,t,365)},e.prototype._getData=function(e){return this._propertyStorage?this._propertyStorage.getProperty(e)||"":this._utils.getCookie(e)},e.prototype._setPartA=function(e,t){this._propertiesPlugin._addProperty(e,t,this._propertiesPlugin._partAPerTenant)},e}(),Rr=function(){function e(){this.identifier="SystemPropertiesCollector",this.priority=3,this._partAPerTenant={"":{}},this._propertiesPerTenant={},this._sequenceIdMap={}}return e.prototype.initialize=function(e,t,n){e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._autoCollection=new Pr(e.extensionConfig[this.identifier],this),this._autoCollection.initialize(e.propertyStorageOverride,e.disableCookiesUsage)},e.prototype.processTelemetry=function(e){e.ctx=e.ctx?e.ctx:{},e.data=e.data?e.data:{},e.ctx["ext.sdk.seq"]={value:this._getSequenceId(e.iKey)},this._addPropertiesIfAbsent(this._partAPerTenant[e.iKey],e.ctx),this._addPropertiesIfAbsent(this._partAPerTenant[""],e.ctx),this._addPropertiesIfAbsent(this._propertiesPerTenant[e.iKey],e.data),this._addPropertiesIfAbsent(this._propertiesPerTenant[""],e.data),this._nextPlugin.processTelemetry(e)},e.prototype.setNextPlugin=function(e){this._nextPlugin=e},e.prototype._addProperty=function(e,t,n,r){n[r=r||""]||(n[r]={}),n[r][e]=t},e.prototype.setAppId=function(e,t){this._addPartAContext("ext.app.id",e,t)},e.prototype.setAppVersion=function(e,t){this._addPartAContext("ext.app.ver",e,t)},e.prototype.setAppLanguage=function(e,t){this._addPartAContext("ext.app.locale",e,t)},e.prototype.setUserLocalId=function(e,t){this._addPartAContext("ext.user.localId",e,t)},e.prototype.setUserLanguage=function(e,t){this._addPartAContext("ext.user.locale",e,t)},e.prototype.setSystemContext=function(e,t,n){this._addPartAContext(e,t,n)},e.prototype._addPartAContext=function(e,t,n){this._addProperty(e,t,this._partAPerTenant,n)},e.prototype._addPropertiesIfAbsent=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]||(t[n]=e[n]))},e.prototype._getSequenceId=function(e){return void 0===this._sequenceIdMap[e]&&(this._sequenceIdMap[e]=0),++this._sequenceIdMap[e]},e}(),Vr="REAL_TIME";(Yn=Xn||(Xn={}))[Yn.LocalStorage=0]="LocalStorage",Yn[Yn.SessionStorage=1]="SessionStorage",(er=Zn||(Zn={}))[er.Default=0]="Default",er[er.Required=1]="Required",er[er.Array=2]="Array",er[er.Hidden=4]="Hidden";var Fr,Ur,Hr=function(){function a(){}return a.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,i=a.sanitizeKey(e,t);if(i.length!==r){for(var o=0,s=i;void 0!==n[s];)o++,s=i.substring(0,a.MAX_NAME_LENGTH-3)+a.padNumber(o);i=s}return i},a.sanitizeKey=function(e,t){return t&&(t=a.trim(t.toString())).length>a.MAX_NAME_LENGTH&&(t=t.substring(0,a.MAX_NAME_LENGTH),e.throwInternal(An.WARNING,kn.NameTooLong,"name is too long.  It has been truncated to "+a.MAX_NAME_LENGTH+" characters.",{name:t},!0)),t},a.sanitizeString=function(e,t,n){return void 0===n&&(n=a.MAX_STRING_LENGTH),t&&(n=n||a.MAX_STRING_LENGTH,(t=a.trim(t)).toString().length>n&&(t=t.toString().substring(0,n),e.throwInternal(An.WARNING,kn.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),t},a.sanitizeUrl=function(e,t){return a.sanitizeInput(e,t,a.MAX_URL_LENGTH,kn.UrlTooLong)},a.sanitizeMessage=function(e,t){return t&&t.length>a.MAX_MESSAGE_LENGTH&&(t=t.substring(0,a.MAX_MESSAGE_LENGTH),e.throwInternal(An.WARNING,kn.MessageTruncated,"message is too long, it has been truncated to "+a.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),t},a.sanitizeException=function(e,t){return t&&t.length>a.MAX_EXCEPTION_LENGTH&&(t=t.substring(0,a.MAX_EXCEPTION_LENGTH),e.throwInternal(An.WARNING,kn.ExceptionTruncated,"exception is too long, it has been truncated to "+a.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),t},a.sanitizeProperties=function(e,t){if(t){var n={};for(var r in t){var i=a.sanitizeString(e,t[r],a.MAX_PROPERTY_LENGTH);n[r=a.sanitizeKeyAndAddUniqueness(e,r,n)]=i}t=n}return t},a.sanitizeMeasurements=function(e,t){if(t){var n={};for(var r in t){var i=t[r];n[r=a.sanitizeKeyAndAddUniqueness(e,r,n)]=i}t=n}return t},a.sanitizeId=function(e,t){return t?a.sanitizeInput(e,t,a.MAX_ID_LENGTH,kn.IdTooLong).toString():t},a.sanitizeInput=function(e,t,n,r){return t&&(t=a.trim(t)).length>n&&(t=t.substring(0,n),e.throwInternal(An.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),t},a.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},a.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},a.MAX_NAME_LENGTH=150,a.MAX_ID_LENGTH=128,a.MAX_PROPERTY_LENGTH=8192,a.MAX_STRING_LENGTH=1024,a.MAX_URL_LENGTH=2048,a.MAX_MESSAGE_LENGTH=32768,a.MAX_EXCEPTION_LENGTH=32768,a}(),qr=function(){function a(){}return a.disableStorage=function(){a._canUseLocalStorage=!1,a._canUseSessionStorage=!1},a._getLocalStorageObject=function(){return a.canUseLocalStorage()?a._getVerifiedStorageObject(Xn.LocalStorage):null},a._getVerifiedStorageObject=function(e){var t,n,r=null;try{if("undefined"==typeof window)return null;n=new Date,(r=e===Xn.LocalStorage?window.localStorage:window.sessionStorage).setItem(n,n),t=r.getItem(n)!=n,r.removeItem(n),t&&(r=null)}catch(e){r=null}return r},a.isInternalApplicationInsightsEndpoint=function(e){return-1!==a._internalEndpoints.indexOf(e.toLowerCase())},a.canUseLocalStorage=function(){return void 0===a._canUseLocalStorage&&(a._canUseLocalStorage=!!a._getVerifiedStorageObject(Xn.LocalStorage)),a._canUseLocalStorage},a.getStorage=function(t,e){var n=a._getLocalStorageObject();if(null!==n)try{return n.getItem(e)}catch(e){a._canUseLocalStorage=!1,t.throwInternal(An.WARNING,kn.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+a.getExceptionName(e),{exception:a.dump(e)})}return null},a.setStorage=function(t,e,n){var r=a._getLocalStorageObject();if(null!==r)try{return r.setItem(e,n),!0}catch(e){a._canUseLocalStorage=!1,t.throwInternal(An.WARNING,kn.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+a.getExceptionName(e),{exception:a.dump(e)})}return!1},a.removeStorage=function(t,e){var n=a._getLocalStorageObject();if(null!==n)try{return n.removeItem(e),!0}catch(e){a._canUseLocalStorage=!1,t.throwInternal(An.WARNING,kn.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+a.getExceptionName(e),{exception:a.dump(e)})}return!1},a._getSessionStorageObject=function(){return a.canUseSessionStorage()?a._getVerifiedStorageObject(Xn.SessionStorage):null},a.canUseSessionStorage=function(){return void 0===a._canUseSessionStorage&&(a._canUseSessionStorage=!!a._getVerifiedStorageObject(Xn.SessionStorage)),a._canUseSessionStorage},a.getSessionStorageKeys=function(){var e=[];if(a.canUseSessionStorage())for(var t in window.sessionStorage)e.push(t);return e},a.getSessionStorage=function(t,e){var n=a._getSessionStorageObject();if(null!==n)try{return n.getItem(e)}catch(e){a._canUseSessionStorage=!1,t.throwInternal(An.WARNING,kn.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+a.getExceptionName(e),{exception:a.dump(e)})}return null},a.setSessionStorage=function(t,e,n){var r=a._getSessionStorageObject();if(null!==r)try{return r.setItem(e,n),!0}catch(e){a._canUseSessionStorage=!1,t.throwInternal(An.WARNING,kn.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+a.getExceptionName(e),{exception:a.dump(e)})}return!1},a.removeSessionStorage=function(t,e){var n=a._getSessionStorageObject();if(null!==n)try{return n.removeItem(e),!0}catch(e){a._canUseSessionStorage=!1,t.throwInternal(An.WARNING,kn.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+a.getExceptionName(e),{exception:a.dump(e)})}return!1},a.disableCookies=function(){a._canUseCookies=!1},a.canUseCookies=function(t){if(void 0===a._canUseCookies){a._canUseCookies=!1;try{a._canUseCookies=void 0!==a.document.cookie}catch(e){t.throwInternal(An.WARNING,kn.CannotAccessCookie,"Cannot access document.cookie - "+a.getExceptionName(e),{exception:a.dump(e)})}}return a._canUseCookies},a.setCookie=function(e,t,n,r){var i="",o="";r&&(i=";domain="+r),a.document.location&&"https:"===a.document.location.protocol&&(o=";secure"),a.canUseCookies(e)&&(a.document.cookie=t+"="+n+i+";path=/"+o)},a.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},a.getCookie=function(e,t){if(a.canUseCookies(e)){var n="";if(t&&t.length)for(var r=t+"=",i=a.document.cookie.split(";"),o=0;o<i.length;o++){var s=i[o];if((s=a.trim(s))&&0===s.indexOf(r)){n=s.substring(r.length,i[o].length);break}}return n}},a.deleteCookie=function(e,t){a.canUseCookies(e)&&(a.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},a.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},a.newId=function(){for(var e="",t=1073741824*Math.random();0<t;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64)}return e},a.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},a.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},a.toISOStringForIE8=function(e){if(a.isDate(e)){if(Date.prototype.toISOString)return e.toISOString();var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},a.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):null},a.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(0<o?o+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t},a.isCrossOriginError=function(e,t,n,r,i){return("Script error."===e||"Script error"===e)&&!i},a.dump=function(e){var t=Object.prototype.toString.call(e),n=JSON.stringify(e);return"[object Error]"===t&&(n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'"),t+n},a.getExceptionName=function(e){return"[object Error]"===Object.prototype.toString.call(e)?e.name:""},a.addEventHandler=function(e,t){if("undefined"==typeof window||!window||"string"!=typeof e||"function"!=typeof t)return!1;var n="on"+e;if(window.addEventListener)window.addEventListener(e,t,!1);else{if(!window.attachEvent)return!1;window.attachEvent(n,t)}return!0},a.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},a.document="undefined"!=typeof document?document:{},a._canUseCookies=void 0,a._canUseLocalStorage=void 0,a._canUseSessionStorage=void 0,a._internalEndpoints=["http://web.archive.org/web/20190528235110/https://dc.services.visualstudio.com/v2/track","http://web.archive.org/web/20190528235110/https://breeze.aimon.applicationinsights.io/v2/track","http://web.archive.org/web/20190528235110/https://dc-int.services.visualstudio.com/v2/track"],a.NotSpecified="not_specified",a}(),Br=function(){function r(){}return r.parseUrl=function(e){return r.htmlAnchorElement||(r.htmlAnchorElement=r.document.createElement?r.document.createElement("a"):{}),r.htmlAnchorElement.href=e,r.htmlAnchorElement},r.getAbsoluteUrl=function(e){var t,n=r.parseUrl(e);return n&&(t=n.href),t},r.getPathName=function(e){var t,n=r.parseUrl(e);return n&&(t=n.pathname),t},r.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},r.document="undefined"!=typeof document?document:{},r}(),Gr=function(){function e(){}return e.ParseDependencyPath=function(e,t,n,r){var i,o;if(t&&0<t.length){var s=Br.parseUrl(t);if(i=s.host,null!=s.pathname)"/"!==(r=0===s.pathname.length?"/":s.pathname).charAt(0)&&(r="/"+r),o=Hr.sanitizeString(e,n?n+" "+r:r);else o=Hr.sanitizeString(e,t)}else o=i=r;return{target:i,name:o}},e}(),jr=(function(){function e(){}e.Now="undefined"==typeof window?function(){return(new Date).getTime()}:window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return(new Date).getTime()},e.GetDuration=function(e,t){var n=null;return 0===e||0===t||Tn.isNullOrUndefined(e)||Tn.isNullOrUndefined(t)||(n=t-e),n}}(),"Microsoft_ApplicationInsights_BypassAjaxInstrumentation"),Qr=function(e){function t(){return e.call(this)||this}return k(t,e),t}(function(){}),zr=(function(i){function e(e,t,n){var r=i.call(this)||this;return r.name=Hr.sanitizeString(e,n)||qr.NotSpecified,r.data=t,r.time=qr.toISOStringForIE8(new Date),r.aiDataContract={time:Zn.Required,iKey:Zn.Required,name:Zn.Required,sampleRate:function(){return 100==r.sampleRate?Zn.Hidden:Zn.Required},tags:Zn.Required,data:Zn.Required},r}k(e,i)}(function(){this.ver=1,this.sampleRate=100,this.tags={}}),function(){}),$r=function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}return k(e,t),e}(zr),Kr=(function(o){function e(e,t,n,r){var i=o.call(this)||this;return i.aiDataContract={ver:Zn.Required,name:Zn.Required,properties:Zn.Default,measurements:Zn.Default},i.name=Hr.sanitizeString(e,t)||qr.NotSpecified,i.properties=Hr.sanitizeProperties(e,n),i.measurements=Hr.sanitizeMeasurements(e,r),i}k(e,o),e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData"}($r),function(){}),Wr=function(){this.hasFullStack=!0,this.parsedStack=[]},Jr=(function(s){function e(e,t,n,r,i){var o=s.call(this)||this;return o.aiDataContract={ver:Zn.Required,exceptions:Zn.Required,severityLevel:Zn.Default,properties:Zn.Default,measurements:Zn.Default},o.properties=Hr.sanitizeProperties(e,n),o.measurements=Hr.sanitizeMeasurements(e,r),o.exceptions=[new Jr(e,t)],i&&(o.severityLevel=i),o}k(e,s),e.CreateSimpleException=function(e,t,n,r,i,o){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData"}(function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}return k(e,t),e}(zr)),function(i){function e(e,t){var n=i.call(this)||this;n.aiDataContract={id:Zn.Default,outerId:Zn.Default,typeName:Zn.Required,message:Zn.Required,hasFullStack:Zn.Default,stack:Zn.Default,parsedStack:Zn.Array},n.typeName=Hr.sanitizeString(e,t.name)||qr.NotSpecified,n.message=Hr.sanitizeMessage(e,t.message)||qr.NotSpecified;var r=t.stack;return n.parsedStack=n.parseStack(r),n.stack=Hr.sanitizeException(e,r),n.hasFullStack=qr.isArray(n.parsedStack)&&0<n.parsedStack.length,n}return k(e,i),e.prototype.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var s=n[o];if(Xr.regex.test(s)){var a=new Xr(n[o],r++);i+=a.sizeInBytes,t.push(a)}}if(32768<i)for(var u=0,c=t.length-1,l=0,d=u,p=c;u<c;){if(32768<(l+=t[u].sizeInBytes+t[c].sizeInBytes)){var h=p-d+1;t.splice(d,h);break}d=u,p=c,u++,c--}}return t},e}(Wr)),Xr=function(i){function o(e,t){var n=i.call(this)||this;n.sizeInBytes=0,n.aiDataContract={level:Zn.Required,method:Zn.Required,assembly:Zn.Default,fileName:Zn.Default,line:Zn.Default},n.level=t,n.method="<no_method>",n.assembly=qr.trim(e);var r=e.match(o.regex);return r&&5<=r.length&&(n.method=qr.trim(r[2])||n.method,n.fileName=qr.trim(r[4]),n.line=parseInt(r[5])||0),n.sizeInBytes+=n.method.length,n.sizeInBytes+=n.fileName.length,n.sizeInBytes+=n.assembly.length,n.sizeInBytes+=o.baseSize,n.sizeInBytes+=n.level.toString().length,n.sizeInBytes+=n.line.toString().length,n}return k(o,i),o.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,o.baseSize=58,o}(Kr),Yr=function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e}return k(e,t),e}(zr);(Ur=Fr||(Fr={}))[Ur.Measurement=0]="Measurement",Ur[Ur.Aggregation=1]="Aggregation";var Zr,ei,ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aiDataContract={name:Zn.Required,kind:Zn.Default,value:Zn.Required,count:Zn.Default,min:Zn.Default,max:Zn.Default,stdDev:Zn.Default},e}return k(e,t),e}(function(){this.kind=Fr.Measurement}),ni=(function(c){function e(e,t,n,r,i,o,s){var a=c.call(this)||this;a.aiDataContract={ver:Zn.Required,metrics:Zn.Required,properties:Zn.Default};var u=new ti;return u.count=0<r?r:void 0,u.max=isNaN(o)||null===o?void 0:o,u.min=isNaN(i)||null===i?void 0:i,u.name=Hr.sanitizeString(e,t)||qr.NotSpecified,u.value=n,a.metrics=[u],a.properties=Hr.sanitizeProperties(e,s),a}k(e,c),e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData"}(Yr),function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}return k(e,t),e}($r));(function(u){function e(e,t,n,r,i,o,s){var a=u.call(this)||this;return a.aiDataContract={ver:Zn.Required,name:Zn.Default,url:Zn.Default,duration:Zn.Default,properties:Zn.Default,measurements:Zn.Default,id:Zn.Default},a.id=Hr.sanitizeId(e,s),a.url=Hr.sanitizeUrl(e,n),a.name=Hr.sanitizeString(e,t)||qr.NotSpecified,isNaN(r)||(a.duration=qr.msToTimeSpan(r)),a.properties=Hr.sanitizeProperties(e,i),a.measurements=Hr.sanitizeMeasurements(e,o),a}k(e,u),e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData"})(ni),function(h){function e(e,t,n,r,i,o,s,a,u,c,l){void 0===u&&(u="Ajax");var d=h.call(this)||this;d.aiDataContract={id:Zn.Required,ver:Zn.Required,name:Zn.Default,resultCode:Zn.Default,duration:Zn.Default,success:Zn.Default,data:Zn.Default,target:Zn.Default,type:Zn.Default,properties:Zn.Default,measurements:Zn.Default,kind:Zn.Default,value:Zn.Default,count:Zn.Default,min:Zn.Default,max:Zn.Default,stdDev:Zn.Default,dependencyKind:Zn.Default,dependencySource:Zn.Default,commandName:Zn.Default,dependencyTypeName:Zn.Default},d.id=t,d.duration=qr.msToTimeSpan(i),d.success=o,d.resultCode=s+"",d.type=Hr.sanitizeString(e,u),d.data=Hr.sanitizeUrl(e,r);var p=Gr.ParseDependencyPath(e,n,a,r);return d.target=p.target,d.name=p.name,d.properties=Hr.sanitizeProperties(e,c),d.measurements=Hr.sanitizeMeasurements(e,l),d}k(e,h),e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData"}(function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}return k(e,t),e}(zr)),function(o){function e(e,t,n,r){var i=o.call(this)||this;return i.aiDataContract={ver:Zn.Required,message:Zn.Required,severityLevel:Zn.Default,properties:Zn.Default},t=t||qr.NotSpecified,i.message=Hr.sanitizeMessage(e,t),i.properties=Hr.sanitizeProperties(e,r),n&&(i.severityLevel=n),i}k(e,o),e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData"}(function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.properties={},e}return k(e,t),e}(zr)),function(h){function f(e,t,n,r,i,o){var s=h.call(this)||this;s.aiDataContract={ver:Zn.Required,name:Zn.Default,url:Zn.Default,duration:Zn.Default,perfTotal:Zn.Default,networkConnect:Zn.Default,sentRequest:Zn.Default,receivedResponse:Zn.Default,domProcessing:Zn.Default,properties:Zn.Default,measurements:Zn.Default},s.isValid=!1;var a=f.getPerformanceTiming();if(a){var u=f.getDuration(a.navigationStart,a.loadEventEnd),c=f.getDuration(a.navigationStart,a.connectEnd),l=f.getDuration(a.requestStart,a.responseStart),d=f.getDuration(a.responseStart,a.responseEnd),p=f.getDuration(a.responseEnd,a.loadEventEnd);0==u?e.throwInternal(An.WARNING,kn.ErrorPVCalc,"error calculating page view performance.",{total:u,network:c,request:l,response:d,dom:p}):f.shouldCollectDuration(u,c,l,d,p)?u<Math.floor(c)+Math.floor(l)+Math.floor(d)+Math.floor(p)?e.throwInternal(An.WARNING,kn.ClientPerformanceMathError,"client performance math error.",{total:u,network:c,request:l,response:d,dom:p}):(s.durationMs=u,s.perfTotal=s.duration=qr.msToTimeSpan(u),s.networkConnect=qr.msToTimeSpan(c),s.sentRequest=qr.msToTimeSpan(l),s.receivedResponse=qr.msToTimeSpan(d),s.domProcessing=qr.msToTimeSpan(p),s.isValid=!0):e.throwInternal(An.WARNING,kn.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:u,network:c,request:l,response:d,dom:p})}return s.url=Hr.sanitizeUrl(e,n),s.name=Hr.sanitizeString(e,t)||qr.NotSpecified,s.properties=Hr.sanitizeProperties(e,i),s.measurements=Hr.sanitizeMeasurements(e,o),s}k(f,h),f.prototype.getIsValid=function(){return this.isValid},f.prototype.getDurationMs=function(){return this.durationMs},f.getPerformanceTiming=function(){return f.isPerformanceTimingSupported()?window.performance.timing:null},f.isPerformanceTimingSupported=function(){return"undefined"!=typeof window&&window.performance&&window.performance.timing},f.isPerformanceTimingDataReady=function(){var e=window.performance.timing;return 0<e.domainLookupStart&&0<e.navigationStart&&0<e.responseStart&&0<e.requestStart&&0<e.loadEventEnd&&0<e.responseEnd&&0<e.connectEnd&&0<e.domLoading},f.getDuration=function(e,t){var n=void 0;return isNaN(e)||isNaN(t)||(n=Math.max(t-e,0)),n},f.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=navigator.userAgent,i=!1;if(r)for(var o=0;o<n.length;o++)i=i||-1!==r.toLowerCase().indexOf(n[o]);if(i)return!1;for(var s=0;s<e.length;s++)if(e[s]>=f.MAX_DURATION_ALLOWED)return!1;return!0},f.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",f.dataType="PageviewPerformanceData",f.MAX_DURATION_ALLOWED=36e5}(function(t){function e(){var e=t.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}return k(e,t),e}(ni)),function(r){function e(e,t){var n=r.call(this)||this;return n.aiDataContract={baseType:Zn.Required,baseData:Zn.Required},n.baseType=e,n.baseData=t,n}k(e,r)}(Qr);(ei=Zr||(Zr={}))[ei.Verbose=0]="Verbose",ei[ei.Information=1]="Information",ei[ei.Warning=2]="Warning",ei[ei.Error=3]="Error",ei[ei.Critical=4]="Critical";var ri=function(){function e(){}return e.getPayloadBlob=function(e,t){var n="",r={};for(var i in e)if(e.hasOwnProperty(i))for(var o=0;o<e[i].length;++o){n&&(n+="\n");var s=n.length;if(2e6<(n+=this.getEventBlob(e[i][o])).length-s&&(delete e[i][o],n=n.substring(0,s)),3984588<n.length){r={};var a=e[i];e[i]=a.splice(0,o),r[i]=a;break}}return{payloadBlob:n,remainingRequest:r}},e.getEventBlob=function(e){var t="baseData",n={};if(n.name=e.name,n.time=e.time,n.iKey="o:"+qn(e.iKey),e.ctx)for(var r in e.ctx)e.ctx.hasOwnProperty(r)&&this._addJSONProperty(n,r,jn(r,e.ctx[r]));if(n.data={},n.data[t]={},n.data.baseType=e.baseType,e.baseData)for(var r in e.baseData)if(e.baseData.hasOwnProperty(r)){var i=jn(r,e.baseData[r]);this._addJSONProperty(n.data[t],r,i),this._addJSONPropertyMetaData(n.ext,t+"."+r,i)}if(e.data)for(var r in e.data)if(e.data.hasOwnProperty(r)){i=jn(r,e.data[r]);this._addJSONProperty(n.data,r,i),this._addJSONPropertyMetaData(n.ext,r,i)}return JSON.stringify(n)},e._addJSONProperty=function(e,t,n){if(n){for(var r=e,i=t.split("."),o=0;o<i.length-1;++o)r[i[o]]||(r[i[o]]={}),r=r[i[o]];r[i[i.length-1]]=n.value}},e._addJSONPropertyMetaData=function(e,t,n){if(n){var r="metadata",i=$n(n.value,n.kind);if(-1<i){var o=e;o[r]||(o[r]={f:{}}),o=o[r].f;for(var s=t.split("."),a=0;a<s.length-1;++a)o[s[a]]||(o[s[a]]={f:{}}),o=o[s[a]].f;zn(n.value)?o[s[s.length-1]]={a:{t:i}}:o[s[s.length-1]]={t:i}}}},e}(),ii=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(300<=e&&e<500&&408!==e&&429!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)},e}(),oi=function(){function e(){this._killedTokenDictionary={}}return e.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var n=e.split(",");if("this-request-only"===t)return n;for(var r=1e3*parseInt(t,10),i=0;i<n.length;++i)this._killedTokenDictionary[n[i]]=Date.now()+r}catch(e){return[]}return[]},e.prototype.isTenantKilled=function(e){return void 0!==this._killedTokenDictionary[e]&&this._killedTokenDictionary[e]>Date.now()||(delete this._killedTokenDictionary[e],!1)},e}(),si=function(){function e(){this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._isFirstRequest=!0,this._clockSkewHeaderValue="use-collector-delta",this._clockSkewSet=!1}return e.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,!(this._allowRequestSending=!1)):this._allowRequestSending},e.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},e.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},e.prototype.setClockSkew=function(e){this._clockSkewSet||(e?this._clockSkewHeaderValue=e:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},e}(),ai="POST",ui=function(){function e(e,t,n,r,i){var a=this;this._requestQueue=e,this._config=t,this._postManager=n,this._httpInterface=r,this._notificationManager=i,this._urlString="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+Mn,this._killSwitch=new oi,this._paused=!1,this._clockSkewManager=new si,this._useBeacons=!1,this._activeConnections=0,this._urlString=this._config.endpointUrl+this._urlString,this._httpInterface||(this._useBeacons=!Qn(),this._httpInterface={sendPOST:function(e,t,r,n){if(a._useXDomainRequest()){var i=new XDomainRequest;i.open(ai,e),i.onload=function(){r(200,{})},i.onerror=function(){r(400,{})},i.ontimeout=function(){r(500,{})},i.send(t)}else if(Qn())fetch(e,(s={body:t,method:ai},s[jr]=!0,s)).then(function(e){var n={};e.headers&&e.headers.forEach(function(e,t){n[t]=e}),r(e.status,n)}).catch(function(e){r(0,{})});else{var o=new XMLHttpRequest;o[jr]=!0,o.withCredentials=!0,o.open(ai,e,!n),o.onload=function(){r(o.status,a._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.onerror=function(){r(o.status,a._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.ontimeout=function(){r(o.status,a._convertAllHeadersToMap(o.getAllResponseHeaders()))},o.send(t)}var s}})}return e.prototype.hasIdleConnection=function(){return this._activeConnections<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&0<this._requestQueue.length&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&this._postManager._scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},e.prototype.teardown=function(){for(;0<this._requestQueue.length;)this._sendRequest(this._requestQueue.shift(),0,!0)},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},e.prototype.sendSynchronousRequest=function(e){this._activeConnections++,this._sendRequest(e,0,!1,!0)},e.prototype._sendRequest=function(n,r,i,o){var s=this;if(void 0===o&&(o=!1),n){if(this._paused)return this._activeConnections--,void this._postManager._addBackRequest(n);var a=0,u="";for(var e in n)n.hasOwnProperty(e)&&(this._killSwitch.isTenantKilled(e)?(this._notificationManager.eventsDiscarded(n[e],Cn.KillSwitch),delete n[e]):(0<u.length&&(u+=","),u+=e,a++));if(0<a){var t=ri.getPayloadBlob(n,a);t.remainingRequest&&this._requestQueue.push(t.remainingRequest);var c=this._urlString+"&apikey="+u+"&upload-time="+Date.now().toString();for(var e in this._clockSkewManager.shouldAddClockSkewHeaders()&&(c=c+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue()),this._config.getWParam&&(c=c+"&w="+this._config.getWParam()),n)if(n.hasOwnProperty(e))for(var l=0;l<n[e].length;++l)0<n[e][l].sendAttempt?n[e][l].sendAttempt++:n[e][l].sendAttempt=1;if(this._useBeacons&&i&&Bn()&&navigator.sendBeacon(c,t.payloadBlob))return;this._httpInterface&&this._httpInterface.sendPOST(c,t.payloadBlob,function(e,t){s._retryRequestIfNeeded(e,t,n,a,u,r,i,o)},i||o)}else i||this._handleRequestFinished(null,{},i,o)}},e.prototype._retryRequestIfNeeded=function(e,t,n,r,i,o,s,a){var u=this,c=!0;if(void 0!==e){if(t){var l=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var d=0;d<l.length;++d)this._notificationManager.eventsDiscarded(n[l[d]],Cn.KillSwitch),delete n[l[d]],r--}else this._clockSkewManager.setClockSkew("");if(200===e)return void this._handleRequestFinished(!0,n,s,a);(!ii.shouldRetryForStatus(e)||r<=0)&&(c=!1)}c?a?(this._activeConnections--,this._postManager._addBackRequest(n)):o<1?setTimeout(function(){return u._sendRequest(n,o+1,!1)},ii.getMillisToBackoffForRetry(o)):(this._activeConnections--,this._postManager._backOffTransmission(),this._postManager._addBackRequest(n)):this._handleRequestFinished(!1,n,s,a)},e.prototype._handleRequestFinished=function(e,t,n,r){for(var i in e&&this._postManager._clearBackOff(),t)t.hasOwnProperty(i)&&(e?this._notificationManager.eventsSent(t[i]):this._notificationManager.eventsDiscarded(t[i],Cn.NonRetryableStatus));this._activeConnections--,r||n||this.sendQueuedRequests()},e.prototype._convertAllHeadersToMap=function(e){var t={};if(e)for(var n=e.split("\n"),r=0;r<n.length;++r){var i=n[r].split(": ");t[i[0]]=i[1]}return t},e.prototype._useXDomainRequest=function(){if(XMLHttpRequest){var e=new XMLHttpRequest;return Boolean(void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest)}},e}(),ci=function(){function e(e,t){this._outboundQueue=e,this._maxNumberOfEvents=t,this._currentBatch={},this._currentNumEventsInBatch=0}return e.prototype.addEventToBatch=function(e){var t=e.iKey;if(t){if(e.sync){var n={};return n[t]=[e],n}this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[t]&&(this._currentBatch[t]=[]),this._currentBatch[t].push(e),this._currentNumEventsInBatch++}return null},e.prototype.flushBatch=function(){0<this._currentNumEventsInBatch&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},e.prototype.hasBatch=function(){return 0<this._currentNumEventsInBatch},e}(),li=function(){function e(){this.identifier="PostChannel",this.priority=1011,this._isTeardownCalled=!1,this._isCurrentlyFlushingNow=!1,this._flushQueue=[],this._databaseAdded=!1,this._paused=!1,this._queueSize=0,this._queueSizeLimit=1e4,this._profiles={},this._currentProfile=Vr,this._timeout=null,this._currentBackoffCount=0,this._timerCount=0,this._flushCallback=-1,this._flushOutboundQueue=[],this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[On]=[],this._inboundQueues[Nn]=[],this._inboundQueues[xn]=[],this._initializeProfiles(),this._addEmptyQueues(),this._batcher=new ci(this._outboundQueue,500),this._syncFlushBatcher=new ci(this._flushOutboundQueue,500)}return e.prototype.initialize=function(e,t,n){e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{};var r=e.extensionConfig[this.identifier];0<r.eventsLimitInMem&&(this._queueSizeLimit=r.eventsLimitInMem),r.httpXHROverride&&r.httpXHROverride.sendPOST&&(this._xhrOverride=r.httpXHROverride),this._notificationManager=e.extensionConfig.NotificationManager,this._httpManager=new ui(this._outboundQueue,e,this,this._xhrOverride,this._notificationManager);for(var i=0;i<n.length;++i)n[i].priority&&150===n[i].priority&&(this._databaseAdded=!0)},e.prototype.processTelemetry=function(e){var t=e;if(!this._isTeardownCalled){if(t.sendAttempt||(t.sendAttempt=0),t.latency||(t.latency=xn),t.sync)if(0<this._currentBackoffCount||this._paused)t.latency=On,t.sync=!1;else if(this._httpManager)return void this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(t));this._queueSize<this._queueSizeLimit?this._addEventToProperQueue(t):this._dropEventWithLatencyOrLess(t.latency)?this._addEventToProperQueue(t):this._notificationManager.eventsDiscarded([t],Cn.QueueFull),this._scheduleTimer()}},e.prototype.teardown=function(){this._clearTimeout(),0<this._flushCallback&&clearTimeout(this._flushCallback),this._paused||this._databaseAdded||(this._mergeQueues(),this._batchEvents(xn),this._httpManager.teardown()),this._isTeardownCalled=!0},e.prototype.pause=function(){this._clearTimeout(),this._paused=!0,this._httpManager.pause(),this._databaseAdded&&(this._queueSize-=this._inboundQueues[On][0].length+this._inboundQueues[Nn][0].length+this._inboundQueues[xn][0].length,this._inboundQueues[On][0]=[],this._inboundQueues[Nn][0]=[],this._inboundQueues[xn][0]=[],this._httpManager.removeQueuedRequests())},e.prototype.resume=function(){this._paused=!1,this._httpManager.resume(),this._scheduleTimer()},e.prototype.setNextPlugin=function(e){},e.prototype._loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(e[t].length<2)continue;if(e[t].splice(0,e[t].length-2),e[t][1]<0&&(e[t][0]=-1),0<e[t][1]&&0<e[t][0]){var n=e[t][0]/e[t][1];e[t][0]=Math.ceil(n)*e[t][1]}this._profiles[t]=e[t]}},e.prototype.flush=function(e,t){var n=this;if(void 0===e&&(e=!0),!this._paused)if(this._clearTimeout(),e)this._addEmptyQueues(),this._isCurrentlyFlushingNow?this._flushQueue.push(t):(this._isCurrentlyFlushingNow=!0,setTimeout(function(){return n._flushImpl(t)},0));else{this._batchEvents(xn,this._syncFlushBatcher);for(var r=0;r<this._flushOutboundQueue.length;r++)this._httpManager.sendSynchronousRequest(this._flushOutboundQueue[r]);null!=t&&t()}},e.prototype._setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this._clearTimeout(),this._currentProfile=e,this._scheduleTimer())},e.prototype._sendEventsForLatencyAndAbove=function(e){this._batchEvents(e),this._httpManager.sendQueuedRequests()},e.prototype._hasEvents=function(){return(0<this._inboundQueues[On][0].length||0<this._inboundQueues[Nn][0].length||0<this._inboundQueues[xn][0].length||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},e.prototype._addBackRequest=function(e){if(!this._paused||!this._databaseAdded)for(var t in e)if(e.hasOwnProperty(t)){1===e[t].length&&e[t][0].sync&&(e[t][0].latency=On,e[t][0].sync=!1);for(var n=0;n<e[t].length;++n)e[t][n].sendAttempt<6?this.processTelemetry(e[t][n]):this._notificationManager.eventsDiscarded([e[t][n]],Cn.NonRetryableStatus)}},e.prototype._scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][1];if(!this._timeout&&0<=t&&!this._paused)if(this._hasEvents()){0===t&&0<this._currentBackoffCount&&(t=1);var n=1e3;0<this._currentBackoffCount&&(n=ii.getMillisToBackoffForRetry(this._currentBackoffCount-1)),this._timeout=setTimeout(function(){return e._batchAndSendEvents()},t*n)}else this._timerCount=0},e.prototype._backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearBackOff=function(){0<this._currentBackoffCount&&(this._currentBackoffCount=0,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null,this._timerCount=0)},e.prototype._batchAndSendEvents=function(){var e=On;this._timerCount++,2===this._timerCount&&(e=xn,this._timerCount=0),this._sendEventsForLatencyAndAbove(e),this._timeout=null,this._scheduleTimer()},e.prototype._removeFirstQueues=function(){this._inboundQueues[On].shift(),this._inboundQueues[Nn].shift(),this._inboundQueues[xn].shift()},e.prototype._addEmptyQueues=function(){this._inboundQueues[On].push([]),this._inboundQueues[Nn].push([]),this._inboundQueues[xn].push([])},e.prototype._mergeQueues=function(){for(var e=xn;e<=On;e++)for(var t=1;t<this._inboundQueues[e].length;t++)for(;0<this._inboundQueues[e][t].length;)this._inboundQueues[e][0].push(this._inboundQueues[e][t].pop())},e.prototype._addEventToProperQueue=function(e){this._paused&&this._databaseAdded||(this._queueSize++,this._inboundQueues[e.latency][this._inboundQueues[e.latency].length-1].push(e))},e.prototype._dropEventWithLatencyOrLess=function(e){for(var t=xn;t<=e;){if(0<this._inboundQueues[t][this._inboundQueues[t].length-1].length){var n=this._inboundQueues[t][this._inboundQueues[t].length-1].splice(0,20);return this._notificationManager.eventsDiscarded(n,Cn.QueueFull),!0}t++}return!1},e.prototype._batchEvents=function(e,t){void 0===t&&(t=this._batcher);for(var n=On;e<=n;){for(;0<this._inboundQueues[n][0].length;){var r=this._inboundQueues[n][0].pop();this._queueSize--,t.addEventToBatch(r)}n--}t.flushBatch()},e.prototype._flushImpl=function(e){var t=this;this._hasEvents()&&this._sendEventsForLatencyAndAbove(xn),this._checkOutboundQueueEmptyAndSent(function(){t._removeFirstQueues(),null!=e&&e(),0<t._flushQueue.length?t._flushCallback=setTimeout(function(){return t._flushImpl(t._flushQueue.shift())},0):(t._isCurrentlyFlushingNow=!1,t._hasEvents()&&t._scheduleTimer())})},e.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():this._flushCallback=setTimeout(function(){return t._checkOutboundQueueEmptyAndSent(e)},250)},e.prototype._resetTransmitProfiles=function(){this._clearTimeout(),this._initializeProfiles(),this._currentProfile=Vr,this._scheduleTimer()},e.prototype._initializeProfiles=function(){this._profiles={},this._profiles[Vr]=[2,1],this._profiles.NEAR_REAL_TIME=[6,3],this._profiles.BEST_EFFORT=[18,9]},e}(),di=new(function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return k(e,r),e.prototype.initialize=function(e,t){this._postChannel=new li,this._propertyManager=new Rr;var n=[this._propertyManager,this._postChannel];t&&(n=n.concat(t)),e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this._postChannel.identifier]=e?e.propertyConfiguration:{},r.prototype.initialize.call(this,e,n)},e.prototype.getPropertyManager=function(){return this._propertyManager},e.prototype.getPostChannel=function(){return this._postChannel},e}(rr));di.initialize({instrumentationKey:"1918f1672f934c5ca6b2669551351de2-b61c1f8e-4440-4e53-8e38-b46e4c88a7e5-7038"});var pi,hi,fi="undefined"!=typeof document&&!!document.createElement("video").canPlayType("application/vnd.apple.mpegURL"),mi="Unable to playback HLS natively",gi=function(){},yi=function(){function e(e){var t=e.onError,n=void 0===t?gi:t,r=e.onPlaying,i=void 0===r?gi:r,o=e.source,s=e.captionsEnabled$,a=this;this.source="",this.showingCaptions=!1,this.source=o,this.onError=n,this.onPlaying=i,s&&(this.captionsEnabled$=s),fetch(o).then(function(e){return e.text()}).then(function(e){return Promise.all(e.split("\n").filter(function(e){return e.includes("m3u8")}).map(function(e){return r=e,A(void 0,void 0,void 0,function(){var t,n;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch(r)];case 1:return[4,e.sent().text()];case 2:return t=e.sent(),[2,Number(t.split("\n").filter(function(e){return e.includes("EXT-X-MEDIA-SEQUENCE")})[0].split(":")[1])];case 3:throw n=e.sent(),console.error("Unable to parse media sequence for "+r+": "+n.message),n;case 4:return[2]}})});var r}))}).then(function(e){if(1<e.length){var t={name:"microsoft_mixer_player_hlsmediasequences",data:{baseURI:o,source:e[0],transcodes:JSON.stringify(e.slice(1)),userAgent:navigator.userAgent}};di.track(t)}}).catch(function(e){console.error("Unable to process HLS media sequences for "+o+": "+e.message),a.onError(e)})}return Object.defineProperty(e.prototype,"audioTrack",{set:function(n){this.el&&this.el.audioTracks&&this.el.audioTracks.length>n&&Array.from(this.el.audioTracks).forEach(function(e,t){return e.enabled=t===n})},enumerable:!0,configurable:!0}),e.prototype.attachMedia=function(e){var t=this;e.addEventListener("error",this.onError),e.addEventListener("playing",function(){return t.onPlaying(t.el)}),this.toggleCaptions(this.showingCaptions),e.src=this.source,this.el=e},e.prototype.changeSource=function(e){this.source=e,this.el&&(this.el.src=this.source)},e.prototype.play=function(){this.el&&this.el.play()},e.prototype.pause=function(){this.el&&this.el.pause()},e.prototype.toggleCaptions=function(e){var t=this;this.showingCaptions=e,this.el&&this.el.textTracks&&(0<this.el.textTracks.length?this.captionsEnabled$&&this.captionsEnabled$.next(w(this.el,this.showingCaptions)):this.el.textTracks.addEventListener("addtrack",function(){t.captionsEnabled$&&t.el&&t.captionsEnabled$.next(w(t.el,t.showingCaptions))},{once:!0}))},e.prototype.getMediaError=function(){return this.el&&this.el.error},e}(),vi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.source="",e}return k(e,t),e.prototype.play=function(){this.nativeHLS&&(this.nativeHLS.play(),this.playing$.next(!0))},e.prototype.pause=function(){this.nativeHLS&&(this.nativeHLS.pause(),this.playing$.next(!1))},e.prototype.generateHLS=function(e){var o=this;if(!fi)throw new Error("This platform does not support HLS playback natively, unable to use NativeHLSTransport!");this.source=e;var n=this.nativeHLS=new yi({onError:function(){var e=n.getMediaError(),t=!!e&&(4===e.code||3===e.code);o.error$.next({fatal:t,name:t?mi:"HLS playback error",details:JSON.stringify({code:e&&e.code,message:e&&e.message})})},onPlaying:function(e){if(o.auto$.next({autoAvailable:!0,autoEnabled:!0}),o.playing$.next(!0),o.qualities$.next([]),e&&(o.captioned$.next(!!(e.textTracks&&0<e.textTracks.length)),e.audioTracks&&1<e.audioTracks.length)){for(var t=[],n=0;n<e.audioTracks.length;n++){var r=e.audioTracks[n],i=r.language.toLowerCase().includes("eng");t.push({autoselect:i,default:i,lang:M(r.language),name:r.label})}o.audioTracks$.next(t)}},source:e,captionsEnabled$:this.captionsEnabled$});return this.nativeHLS},e.prototype.setAudioOnly=function(e){if(this.nativeHLS){var t=e?L(this.source,"showAudioOnly",2):this.source;this.nativeHLS.changeSource(t)}},e.prototype.setAudioTrack=function(e){this.nativeHLS&&(this.nativeHLS.audioTrack=e)},e.prototype.setCaptionsShowing=function(e){this.nativeHLS&&this.nativeHLS.toggleCaptions(e)},e.prototype.getAuto=function(){return Promise.resolve({autoAvailable:!0,autoEnabled:!0})},e}(Sn),bi=function(e,n){return e.slice().sort(function(e,t){return n(e)-n(t)})},_i=function(t){return function(e){return bi(e,function(e){return-e.height}).find(t)||e[0]}},Si=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(e){for(var t=0,n=o;t<n.length;t++){var r=n[t],i=r&&r(e);if(i)return i}}};(hi=pi||(pi={})).TurnOffNativeHls="WBvbkrcJRSiKXR20MORUZQ",hi.ModeTestConductor="safqZA9rR7CkZ2fZswjnGQ";var Ei=function(e){return E([e])("undefined"!=typeof document?E(["gaData","UA-48751750-9","experiments"])(window):void 0)};function wi(e,t){var n=new URL("http://web.archive.org/web/20190528235110/https://video.mixer.com/video/api/v1/distribution");return function(){try{return document&&document.location&&document.location.host||""}catch(e){return""}}().includes("lab.mixer")&&(n=new URL("http://web.archive.org/web/20190528235110/https://video-lab.mixer.com/video/api/v1/distribution")),n.searchParams.set("channel",e.toString()),n.searchParams.set("accessKey",t),n.toString()}function Ti(e,t){var n=new URL("http://web.archive.org/web/20190528235110/https://conductor.videosvc.mixer.com/api/video/v2/channels/"+e+"/dist");n.searchParams.set("accessKey",t),n.searchParams.set("MS-ClientId",O?"MixerWeb":"MixerApp"),n.searchParams.set("MS-ClientVersion",It),n.searchParams.set("MS-DeviceType","PC"),n.searchParams.set("MS-OS",d.osname);var r=Ei(pi.ModeTestConductor);return r&&n.searchParams.set("gaFlags",'{"'+pi.ModeTestConductor+'":"'+r+'"}'),n.toString()}function Ii(r){return A(this,void 0,void 0,function(){var t,n;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),[4,fetch(r)];case 1:return t=e.sent(),n=void 0,t.ok?[4,t.json()]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n={status:t.status,statusText:t.statusText},e.label=4;case 4:return[2,n];case 5:return[2,{status:"unknown",statusText:e.sent().message}];case 6:return[2]}})})}function Ci(n,r){return A(this,void 0,void 0,function(){var t;return N(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,Ii(Ti(n,r))];case 1:return[2,function(e){if("status"in e)throw new Error("Conductor failure: "+e.statusText);var t={default:"Hls"===e.default?"hls":"webrtc",hls:{server:e.hls.server,recommendedHlsSegmentBuffer:e.hls.recommendedSegmentBufferSize},recommendedHlsSegmentBuffer:e.hls.recommendedSegmentBufferSize};return void 0!==e.webRtc&&(t.webrtc=e.webRtc),void 0!==e.dash&&(t.dash=e.dash),void 0!==e.hls.simpleFeedServer&&(t.hls.simpleFeedServer=e.hls.simpleFeedServer),void 0!==e.hls.hasClosedCaptions&&(t.hlsHasClosedCaptions=e.hls.hasClosedCaptions),void 0!==e.hls.uhdFeedServer&&(t.hls.hls4kFeedServer=e.hls.uhdFeedServer),t}(e.sent())];case 2:return t=e.sent(),di.track({name:"Microsoft_Mixer_Player_FalconFallback",data:{response:t.message}}),[4,Ii(wi(n,r))];case 3:return[2,function(e){if("status"in e)throw new Error("Falcon failure: "+e.statusText);return e.response}(e.sent())];case 4:return[2]}})})}var Ai,ki,xi,Ni,Oi,Li,Mi,Di,Pi,Ri,Vi="undefined"!=typeof Org,Fi=O&&!Vi&&"undefined"!=typeof RTCPeerConnection?l("http://web.archive.org/web/20190528235110/https://c-ning.videosvc.mixer.com/dependencies/webrtc-adapter/7.1.1/adapter.js").catch(function(e){return l("http://web.archive.org/web/20190528235110/https://mixer.com/_latest/assets/js/webrtc-adapter.js")}).catch(function(e){return Promise.reject("Unable to load adapter.js "+e)}):Promise.resolve(),Ui=[500,1e3,2e3,4e3];t.MixerPlayerNew=function(){function e(){this._eventMap={},this.state=e.AbstractPlayerState.createInitialState(this),this.state.enter()}return e.prototype.destroy=function(){return this.state.destroy()},e.prototype.getCurrentTransportType=function(){return this.state.getCurrentTransportType()},e.prototype.getStatsInterval=function(){return this.state.getStatsInterval()},e.prototype.loadStream=function(e,t,n,r){return this.state.loadStream(e,t,n,r)},e.prototype.loadVOD=function(e,t){return this.state.loadVOD(e,t)},e.prototype.isPlaying=function(){return this.state.isPlaying()},e.prototype.pause=function(){return this.state.pause()},e.prototype.play=function(){return this.state.play()},e.prototype.setAudioOnly=function(e){return this.state.setAudioOnly(e)},e.prototype.setAudioTrack=function(e){return this.state.setAudioTrack(e)},e.prototype.setCaptionsShowing=function(e){return this.state.setCaptionsShowing(e)},e.prototype.setMute=function(e){return this.state.setMute(e)},e.prototype.setQuality=function(e){return this.state.setQuality(e)},e.prototype.setAuto=function(e){return this.state.setAuto(e)},e.prototype.getAuto=function(){return this.state.getAuto()},e.prototype.getPlayerPorfileTime=function(){return this.state.getPlayerProfileTime()},e.prototype.stop=function(){return this.state.stop()},e.prototype.switchToFTL=function(){return this.state.switchToFTL()},e.prototype.switchToHLS=function(){return this.state.switchToHLS()},e.prototype.addEventListener=function(e,t){this._eventMap[e]=this._eventMap[e]||[],this._eventMap[e].push(t)},e.prototype.removeEventListener=function(e,t){var n=this._eventMap[e];if(n){var r=n.indexOf(t);n.splice(r,1),n.length||delete this._eventMap[e]}},e.prototype.dispatchEvent=function(e,t){var n=this._eventMap[e];if(!n)return!0;for(var r={type:e,data:t,defaultPrevented:!1},i=n.length-1;0<=i;i--)n[i=Math.min(n.length-1,i)](r);return!r.defaultPrevented},e.VERSION=It,e}(),Ai=t.MixerPlayerNew||(t.MixerPlayerNew={}),ki=function(){function e(){}return e.createInitialState=function(e){var t=new xi;return t._player=e,t._meta={},t._msi={},t._playbackSettings={},t._tsi={},t},Object.defineProperty(e.prototype,"isActiveState",{get:function(){return this._player.state===this},enumerable:!0,configurable:!0}),e.prototype.enter=function(e){this._meta.telemetry&&this._meta.telemetry.logPlayerLifecycleState&&this._meta.telemetry.logPlayerLifecycleState({entering:!0,state:this.stateName,meta:JSON.stringify(e)})},e.prototype.exit=function(e,t){this.isActiveState&&(this._meta.telemetry&&this._meta.telemetry.logPlayerLifecycleState&&this._meta.telemetry.logPlayerLifecycleState({entering:!1,state:this.stateName,meta:JSON.stringify(t)}),this._changeState(e))},e.prototype.destroy=function(){this._player.dispatchEvent("destroyed",!0),this.exit(new Ri(this,Ri.TERMINAL_STATE_VIA_DESTROY))},e.prototype.getCurrentTransportType=function(){},e.prototype.getStatsInterval=function(){return this._tsi.statsIntervalMs||1e3},e.prototype.isPlaying=function(){return this._playbackSettings.playing},e.prototype.loadStream=function(e,t,n,r){this._applyOptions(n),this._errorInfo={ftlErrorCount:0,hlsErrorCount:0,hlsNativeFailure:!1,manifestErrorCount:0},this._msi.contentType="stream",this.exit(new Ni(e,t,r))},e.prototype.loadVOD=function(e,t){this._applyOptions(t),this._player.dispatchEvent("ftlAvailable",!1),this._errorInfo={ftlErrorCount:0,hlsErrorCount:0,hlsNativeFailure:!1,manifestErrorCount:0},this._msi.contentType="vod",this._msi.manifest={hls:{hlsHasClosedCaptions:!1,recommendedHlsSegmentBuffer:3,server:e}},this._tsi.requestedTransport="hls",this._meta.telemetry.logGetVideoFeedAttempt({type:V.VOD,hlsServer:e}),this.exit(new Oi)},e.prototype.pause=function(){this._playbackSettings.paused=!0},e.prototype.play=function(){this._playbackSettings.paused=!1,this._playbackSettings.playing=!0},e.prototype.setAudioOnly=function(e){this._playbackSettings.audioOnly=e},e.prototype.setAudioTrack=function(e){this._playbackSettings.audioTrack=e},e.prototype.setCaptionsShowing=function(e){this._playbackSettings.showingCaptions=e},e.prototype.setMute=function(e){this._playbackSettings.muted=e},e.prototype.setQuality=function(e){this._playbackSettings.qualityIndex=e},e.prototype.setAuto=function(e){this._playbackSettings.autoEnabled=e},e.prototype.getAuto=function(){return Promise.reject("Not supported on current state")},e.prototype.getPlayerProfileTime=function(){return{profileStartLoadStream:this._meta.profileStartLoadStream,profileEndLoadStream:this._meta.profileEndLoadStream}},e.prototype.stop=function(){this._playbackSettings.paused=!1,this._playbackSettings.playing=!1},e.prototype.switchToFTL=function(){this._errorInfo.manifestErrorCount=0,this._errorInfo.ftlErrorCount=0,this._tsi.requestedTransport="ftl",this.exit(new Ni(this._tsi.channelId,this._msi.accessKey,this._tsi.distOverride))},e.prototype.switchToHLS=function(){this._errorInfo.manifestErrorCount=0,this._errorInfo.hlsErrorCount=0,this._tsi.requestedTransport="hls",this.exit(new Ni(this._tsi.channelId,this._msi.accessKey,this._tsi.distOverride))},e.prototype._createDefaultQualitySelector=function(e){var t=this._tsi.maxSize;return e===u.HLS?Si(this._tsi.defaultQualitySelector):Si(this._tsi.defaultQualitySelector,t?_i(function(e){return e.width<=Math.min(3e3,t.width)}):null,this._tsi.supportedConfig&&!this._tsi.supportedConfig.uhd?_i(function(e){return e.height<=1440}):null)},e.prototype._applyOptions=function(e){this._meta.logger=e.logger||new wt,this._meta.metricsLogger=e.metricsLogger||new Tt,this._playbackSettings.audioOnly=this._playbackSettings.audioOnly||!1,this._playbackSettings.audioTrack=this._playbackSettings.audioTrack||0,this._playbackSettings.showingCaptions=this._playbackSettings.showingCaptions||!1,this._playbackSettings.muted=this._playbackSettings.muted||!!e.muted,this._playbackSettings.paused=this._playbackSettings.paused||!1,this._playbackSettings.playing=this._playbackSettings.playing||void 0===this._playbackSettings.playing,this._playbackSettings.qualityIndex=this._playbackSettings.qualityIndex||0,this._tsi.clientId=e.clientId,this._tsi.defaultQualitySelector=void 0,this._tsi.isHLSUrlOnly=!!e.hlsUrlOnly,this._tsi.isEmbed=!!e.isEmbed,this._tsi.isLowResAtStart=!!e.startLowRes,this._tsi.maxSize=e.maxSize||{height:-1,width:-1},this._tsi.requestedTransport=e.requestedTransport||void 0,this._tsi.sessionGuid=e.sessionGuid||"",this._tsi.statsIntervalMs=e.statsIntervalMs||1e3,this._tsi.trackOneDSEvent=e.trackOneDSEvent||void 0,this._tsi.userId=e.userId||-1,e.defaultQualitySelector&&(this._tsi.defaultQualitySelector=e.defaultQualitySelector),e.supportedConfig&&(this._tsi.supportedConfig=e.supportedConfig),void 0!==e.hlsSimpleFeed&&(this._tsi.isHLSSimpleFeed=!!e.hlsSimpleFeed),e.telemetry?this._meta.telemetry=e.telemetry:this._meta.telemetry=new Et},e.prototype._changeState=function(e){e._errorInfo=this._errorInfo,e._meta=this._meta,e._msi=this._msi,e._playbackSettings=this._playbackSettings,e._player=this._player,e._tsi=this._tsi,(this._player.state=e).enter()},e}(),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Created"},enumerable:!0,configurable:!0}),t.prototype.error=function(){},t}(Ai.AbstractPlayerState=ki),Ni=function(i){function e(e,t,n){var r=i.call(this)||this;return r._channelId=e,r._accessKey=t,r._distOverride=n||"",r}return k(e,i),Object.defineProperty(e.prototype,"stateName",{get:function(){return"SetupManifest"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,n,r;return N(this,function(e){switch(e.label){case 0:i.prototype.enter.call(this,{accessKey:this._accessKey,channelId:this._channelId}),this._msi.accessKey=this._accessKey,this._tsi.channelId=this._channelId,this._tsi.distOverride=this._distOverride,this._meta.metricsLogger.logStreamLoadAttempt(this._channelId),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Ci(this._channelId,this._accessKey)];case 2:return t=e.sent(),this.isActiveState?(this._msi.manifest=t,this._tsi.requestedTransport=this._tsi.requestedTransport||("webrtc"===this._msi.manifest.default?"ftl":"hls"),[3,4]):[2];case 3:return n=e.sent(),[2,this.error("Exception: "+n)];case 4:return r=this._msi.manifest,this._meta.telemetry.logGetVideoFeedAttempt({defaultProtocol:r.default,ftlServer:r.webrtc&&r.webrtc.server,hlsRecommendedSegmentBuffer:(r.recommendedHlsSegmentBuffer||r.hls&&r.hls.recommendedHlsSegmentBuffer||"").toString(),hlsServer:r.hls&&r.hls.server,dashServer:r.dash&&r.dash.server,type:V.LIVE}),this._player.dispatchEvent("ftlAvailable",!!r.webrtc),this._player.dispatchEvent("hlsAvailable",!!r.hls),this._player.dispatchEvent("dashAvailable",!!r.dash),this._player.dispatchEvent("captioned",!!r.hlsHasClosedCaptions),this.exit(new Oi),[2]}})})},e.prototype.error=function(t){return A(this,void 0,void 0,function(){return N(this,function(e){return this.exit(new Di("manifest"),t),[2]})})},e}(ki),Oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),Object.defineProperty(e.prototype,"stateName",{get:function(){return"SetupTransport"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){t.prototype.enter.call(this);var e=this._getNextAttemptKind();e&&(this._meta.metricsLogger.logTransportAttempt((this._tsi.channelId||"unknown").toString(),e,"ftl"===e?this._errorInfo.ftlErrorCount+1:this._errorInfo.hlsErrorCount+1),"ftl"===e?this.exit(new Li,"ftl"):this.exit(new Mi,"hls"))},e.prototype.error=function(e){this.exit(new Ri(this,{errorMessage:e,errorInfo:this._errorInfo,supportedConfig:this._tsi.supportedConfig,manifest:this._msi.manifest,requestedTransport:this._tsi.requestedTransport,isWebView:p(),isMobileBrowser:h(this._tsi.clientId),isSamsungBrowser:f()}))},e.prototype._getNextAttemptKind=function(){return!(this._errorInfo.ftlErrorCount<=5&&this._tsi.supportedConfig.ftl&&this._msi.manifest.webrtc)||"ftl"!==this._tsi.requestedTransport&&(this._tsi.requestedTransport||"webrtc"!==this._msi.manifest.default)||p()||h(this._tsi.clientId)&&!f()?this._errorInfo.hlsErrorCount<=5&&this._msi.manifest.hls&&this._tsi.supportedConfig.hls?F.HLS:this.error("No supported transports"):F.FTL},e}(ki),Li=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return k(e,o),Object.defineProperty(e.prototype,"stateName",{get:function(){return"SetupFTL"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,n,r,i=this;return N(this,function(e){switch(e.label){case 0:o.prototype.enter.call(this),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,Fi];case 2:return e.sent(),this._tsi.startTime=Date.now(),this._meta.profileStartLoadStream=this._tsi.startTime,(t=this._msi.manifest.webrtc)?(this._tsi.hostName=t.server,n=new gn({clientId:this._tsi.clientId,supportedConfig:this._tsi.supportedConfig,logger:this._meta.logger,metricsLogger:this._meta.metricsLogger,statsIntervalMs:this._tsi.statsIntervalMs,qualitySelector:this._tsi.defaultQualitySelector,telemetry:this._meta.telemetry,maxSize:this._tsi.maxSize,sessionGuid:this._tsi.sessionGuid,userId:this._tsi.userId,isEmbed:this._tsi.isEmbed}),this._tsi.transport=n,this._processDistOverride(t),this._tsi.hostName=t.server,[4,n.loadStream(this._tsi.channelId,t,this._msi.accessKey,function(e){i.isActiveState&&(i._tsi.ftlMediaStream=e,i.exit(new Pi))})]):[2,this.error("No FTLData in manifest")];case 3:return e.sent(),[3,5];case 4:return r=e.sent(),this.error("Exception: "+r,r.trace),[3,5];case 5:return[2]}})})},e.prototype.error=function(e,t){this.exit(new Di("ftl",e,void 0,void 0,t))},e.prototype.switchToFTL=function(){},e.prototype._processDistOverride=function(e){this._tsi.distOverride&&(e.server="wss://"+this._tsi.distOverride,e.iceServers=[{urls:["stun:"+this._tsi.distOverride+":3479"]},{urls:["turn:"+this._tsi.distOverride+":3478?transport=udp"],username:"janus",credential:"janus"},{urls:["turn:"+this._tsi.distOverride+":3478?transport=tcp"],username:"janus",credential:"janus"}])},e}(ki),Mi=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}return k(e,a),Object.defineProperty(e.prototype,"stateName",{get:function(){return"SetupHLS"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,n,r,i,o,s=this;return N(this,function(e){switch(e.label){case 0:a.prototype.enter.call(this),e.label=1;case 1:return e.trys.push([1,6,,7]),this._tsi.startTime=Date.now(),this._meta.profileStartLoadStream=this._tsi.startTime,(t=this._msi.manifest.hls)?(this._tsi.hostName=t.server,this._tsi.isHLSSimpleFeed&&t.simpleFeedServer?this._tsi.hlsSrc=t.simpleFeedServer:this._tsi.supportedConfig&&this._tsi.supportedConfig.uhd&&t.hls4kFeedServer?this._tsi.hlsSrc=t.hls4kFeedServer:this._tsi.hlsSrc=t.server,this._tsi.distOverride&&(this._tsi.hlsSrc=this._tsi.hlsSrc.replace("video.mixer.com",this._tsi.distOverride)),this._tsi.isHLSUrlOnly?(this._tsi.transport=new En(this._tsi.supportedConfig),this._tsi.hlsStream=this._tsi.hlsSrc,this.exit(new Pi,"hls-url-only"),[2]):(p()&&(this._tsi.hlsSrc=L(this._tsi.hlsSrc,"QualityList",c.QDEFAULT480P)),!fi||this._errorInfo.hlsNativeFailure?[3,2]:(n=window,this._meta.telemetry.logFallbackToNativePlayer({supportsMSE:!(!n||!n.MediaSource),supportsHLS:fi}),r=new vi(this._tsi.channelId,this._tsi.supportedConfig,this._meta.logger,this._meta.metricsLogger,this._meta.telemetry),i=r.generateHLS(this._tsi.hlsSrc),this._tsi.transport=r,this._tsi.hlsStream=i,this.exit(new Pi,"hls-native"),[3,5]))):[2,this.error("No HLSResponse in Manifest")];case 2:return vn()?[4,yn]:[3,4];case 3:return e.sent(),this.isActiveState?((this._tsi.transport=new Sn(this._tsi.channelId,this._tsi.supportedConfig,this._meta.logger,this._meta.metricsLogger,this._meta.telemetry)).setupHLS(this._tsi.hlsSrc,+t.recommendedHlsSegmentBuffer,function(){},function(e){s.isActiveState&&(s._tsi.hlsStream=e,s.exit(new Pi,"hls.js"))},this._playbackSettings.showingCaptions,this._playbackSettings.audioOnly,this._createDefaultQualitySelector(u.HLS)),[3,5]):[2];case 4:return this.error("HLS not supported",!0),[2];case 5:return[3,7];case 6:return o=e.sent(),this.error("Exception: "+o),[3,7];case 7:return[2]}})})},e.prototype.error=function(e,t){t?this.exit(new Ri(this,e)):this.exit(new Di("hls",e))},e.prototype.switchToHLS=function(){},e}(ki),Di=function(s){function e(e,t,n,r,i){var o=s.call(this)||this;return o._failureType=e,o._errorMessage=t||"",o._errorCode=n,o._errorName=r,o._errorTrace=i,o}return k(e,s),Object.defineProperty(e.prototype,"stateName",{get:function(){return"Retry"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){return A(this,void 0,void 0,function(){var t,n,r;return N(this,function(e){switch(e.label){case 0:return s.prototype.enter.call(this,{failureType:this._failureType,errorName:this._errorName,errorMessage:this._errorMessage}),t=this._tsi.channelId,n=this._msi.accessKey,r=this._tsi.distOverride,[4,this._processErrors()];case 1:return e.sent(),this._cleanState(),this._retry(t,n,r),[2]}})})},e.prototype.error=function(e){this._player.dispatchEvent("errorFatal",new Error(e||"unknown error")),this.exit(new Ri(this,e))},e.prototype.switchToFTL=function(){},e.prototype.switchToHLS=function(){},e.prototype._cleanState=function(){switch(this._failureType){case"ftl":case"hls":try{var e=this._tsi.transport;e&&(this._tsi.transport=null,e.destroy())}catch(e){}this._tsi.transport=null,this._tsi.hlsStream=null,this._tsi.ftlMediaStream=null;break;case"manifest":this._msi={contentType:this._msi.contentType};break;default:return this.error("Invalid failure type: "+this._failureType)}},e.prototype._processErrors=function(){return A(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return N(this,function(e){switch(e.label){case 0:switch(e.trys.push([0,6,,7]),this._failureType){case"ftl":case"hls":return[3,1];case"manifest":return[3,2]}return[3,4];case 1:return this._errorInfo.manifestErrorCount=0,r=n=void 0,i=Date.now()-this._tsi.startTime,o=void 0,o="ftl"===this._failureType?(this._errorInfo.ftlErrorCount++,n=this._errorInfo.ftlErrorCount,r=5<this._errorInfo.ftlErrorCount,F.FTL):(this._errorInfo.hlsErrorCount++,n=this._errorInfo.hlsErrorCount,r=5<this._errorInfo.hlsErrorCount,F.HLS),s=m(this._tsi.hostName),a=s[0],u=s[1],this._meta.metricsLogger.logTransportFailed(o,this._tsi.hostName,u,a,this._errorMessage),this._meta.telemetry.logConnectTransportAttempt({attemptCount:n,hostName:this._tsi.hostName,loadTime:i,success:!1,transport:o,errorCode:this._errorCode,errorMessage:this._errorMessage,trace:this._errorTrace,errorName:this._errorName}),r&&(this._meta.telemetry.logConnectTransportSummary({hostName:this._tsi.hostName,numAttempts:n,success:!1,transport:o,lastErrorCode:this._errorCode,lastErrorMessage:this._errorMessage,lastErrorName:this._errorName}),5<this._errorInfo.ftlErrorCount&&5<this._errorInfo.hlsErrorCount)?[2,this.error("Transport retry exceeded")]:[3,5];case 2:return this._errorInfo.ftlErrorCount=this._errorInfo.hlsErrorCount=0,c=this._errorInfo.manifestErrorCount,this._errorInfo.manifestErrorCount++,5<=this._errorInfo.manifestErrorCount?[2,this.error("Manifest retry exceeded")]:[4,(t=Ui[c],new Promise(function(e){return setTimeout(e,t)}))];case 3:return e.sent(),[3,5];case 4:return[2,this.error("Invalid failure type: "+this._failureType)];case 5:return[3,7];case 6:return l=e.sent(),this.error("Exception: "+l),[3,7];case 7:return[2]}var t})})},e.prototype._retry=function(e,t,n){"stream"===this._msi.contentType?this.exit(new Ni(e,t,n),this._msi.contentType):this.exit(new Oi,this._msi.contentType)},e}(ki),Pi=function(s){function e(){var e=null!==s&&s.apply(this,arguments)||this;return e._notInPlaybackState$=new pe,e}return k(e,s),Object.defineProperty(e.prototype,"stateName",{get:function(){return"Playback"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){this._notInPlaybackState$.next(!1);var e=this._tsi.transport.getKind();s.prototype.enter.call(this,{transportKind:e});var t=Date.now();this._meta.profileEndLoadStream=t;var n=m(this._tsi.hostName),r=n[0],i=n[1],o="ftl"===e?this._errorInfo.ftlErrorCount+1:this._errorInfo.hlsErrorCount+1;this._meta.metricsLogger.logVideoLoadTime(e,t-this._tsi.startTime,this._tsi.hostName,i,r),this._meta.telemetry.logConnectTransportAttempt({attemptCount:o,hostName:this._tsi.hostName,loadTime:t-this._tsi.startTime,success:!0,transport:"ftl"===e?F.FTL:F.HLS}),this._meta.telemetry.logConnectTransportSummary({hostName:this._tsi.hostName,numAttempts:o,success:!0,transport:"ftl"===e?F.FTL:F.HLS}),this._applyPlayerSettings(),"ftl"===e?this._player.dispatchEvent("ftlReady",this._tsi.ftlMediaStream):(this._parseHLSTrackData(),this._player.dispatchEvent("hlsReady",this._tsi.hlsStream)),this._player.dispatchEvent("switchingQuality",!1),this._setupTransportSubscriptions()},e.prototype.exit=function(e,t){this._tsi.transport.destroy(),this._notInPlaybackState$.next(!0),s.prototype.exit.call(this,e,t)},e.prototype.error=function(e,t,n){this._notInPlaybackState$.next(!0),this._player.dispatchEvent("error",new Error(t)),this.exit(new Di("ftl"===this._tsi.transport.getKind()?"ftl":"hls",t,e,n),{name:n,details:t})},e.prototype.getCurrentTransportType=function(){return this._tsi.transport.getKind()},e.prototype.pause=function(){this._playbackSettings.paused||(s.prototype.pause.call(this),this._tsi.transport.pause())},e.prototype.play=function(){this._playbackSettings.playing||(s.prototype.play.call(this),this._tsi.transport.play())},e.prototype.setAudioOnly=function(e){this._playbackSettings.audioOnly!==e&&(s.prototype.setAudioOnly.call(this,e),this._meta.logger.info("Setting Audio Only"),"hls"===this._tsi.transport.getKind()&&this._tsi.isHLSUrlOnly?this._player.dispatchEvent("hlsReady",this._playbackSettings.audioOnly?L(this._tsi.hlsSrc,"showAudioOnly",2):this._tsi.hlsSrc):this._tsi.transport.setAudioOnly(e))},e.prototype.setAudioTrack=function(e){this._playbackSettings.audioTrack!==e&&(s.prototype.setAudioTrack.call(this,e),"hls"!==this._tsi.transport.getKind()?this.switchToHLS():(this._tsi.transport.setAudioTrack(e),this._player.dispatchEvent("audioTrack",e)))},e.prototype.setCaptionsShowing=function(t){return A(this,void 0,void 0,function(){return N(this,function(e){return this._playbackSettings.showingCaptions===t||(s.prototype.setCaptionsShowing.call(this,t),t&&"ftl"===this.getCurrentTransportType()?(this._meta.metricsLogger.logCaptionsEnabled(),this.switchToHLS()):this._tsi.transport.setCaptionsShowing(t)),[2]})})},e.prototype.setMute=function(e){this._playbackSettings.muted!==e&&(s.prototype.setMute.call(this,e),this._tsi.transport.setMute(e),"hls"===this._tsi.transport.getKind()&&this._player.dispatchEvent("muted",e))},e.prototype.setQuality=function(e){this._playbackSettings.qualityIndex!==e?(s.prototype.setQuality.call(this,e),this._tsi.transport.setQuality(e)):this._playbackSettings.autoEnabled&&this._tsi.transport.setAuto(!1)},e.prototype.setAuto=function(e){e&&this._playbackSettings.autoEnabled!==e&&(s.prototype.setAuto.call(this,e),this._tsi.transport.setAuto(e))},e.prototype.getAuto=function(){return this._tsi.transport.getAuto()},e.prototype.stop=function(){this._playbackSettings.playing&&(s.prototype.stop.call(this),this._tsi.transport.stop())},e.prototype.switchToFTL=function(){"ftl"!==this._tsi.transport.getKind()&&s.prototype.switchToFTL.call(this)},e.prototype.switchToHLS=function(){"hls"!==this._tsi.transport.getKind()&&s.prototype.switchToHLS.call(this)},e.prototype._parseHLSTrackData=function(){var r=this,e=this._tsi.transport;return(e instanceof Sn?e.hlsManifest.pipe(ft(1)).toPromise():fetch(this._tsi.hlsSrc).then(function(e){return e.text()})).then(function(e){var t=e.split("\n").filter(function(e){return e.includes("TYPE=AUDIO")}).map(function(e,t){var n=/NAME=\"([a-zA-Z0-9\s]+)\"/.exec(e),r=n&&n[1]||"Track "+t,i=0<e.indexOf("AUTOSELECT=YES"),o=/LANGUAGE=\"([a-zA-Z0-9\s]+)\"/g.exec(e);return{name:r,autoselect:i,lang:o&&o[1]||"Unknown Language",default:!1,forced:void 0,groupId:void 0,type:void 0,url:void 0}});t.forEach(function(e){e.lang=M(e.name)}),r._player.dispatchEvent("audioTracks",t);var n=t.findIndex(function(e){if(!e.name)return!1;var t=e.name.toLowerCase();return"english"===t||"enus"===t});r._player.dispatchEvent("audioTrack",0<=n?n:0)})},e.prototype._applyPlayerSettings=function(){if(this._playbackSettings.audioOnly&&(this._playbackSettings.audioOnly=!1,this.setAudioOnly(!0)),this._playbackSettings.audioTrack){var e=this._playbackSettings.audioTrack;this._playbackSettings.audioTrack=0,this.setAudioTrack(e)}if(this._playbackSettings.showingCaptions&&(this._playbackSettings.showingCaptions=!1,this.setCaptionsShowing(!0)),this._playbackSettings.muted&&(this._playbackSettings.muted=!1,this.setMute(!0)),this._playbackSettings.paused&&(this._playbackSettings.paused=!1,this.pause()),this._playbackSettings.playing&&(this._playbackSettings.playing=!1,this.play()),this._playbackSettings.qualityIndex){var t=this._playbackSettings.qualityIndex;this._playbackSettings.qualityIndex=0,this.setQuality(t)}},e.prototype._setupTransportSubscriptions=function(){var o=this,e=this._tsi.transport;e.qualities().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._player.dispatchEvent("qualities",e)}),e.switching().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._player.dispatchEvent("switchingQuality",e)}),e.stats().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._player.dispatchEvent("stats",e)}),e.error().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){var t=e.code,n=e.details,r=e.fatal,i=e.name;o._errorInfo.hlsNativeFailure=o._errorInfo.hlsNativeFailure||i===mi,r&&o.error(t,n,i)}),e.warning().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._meta.logger.info(e.message),o._player.dispatchEvent("warning",e)}),e.hostName().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._tsi.hostName=e,o._player.dispatchEvent("hostName",e)}),e.quality().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.qualityIndex=e,o._player.dispatchEvent("quality",e)}),e.auto().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.autoEnabled=e&&e.autoEnabled,o._player.dispatchEvent("auto",e)}),e.playing().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.playing=e,o._player.dispatchEvent("playing",e)}),e.muted().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.muted=e,o._player.dispatchEvent("muted",e)}),e.audioOnly().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.audioOnly=e,o._player.dispatchEvent("audioOnly",e)}),e.audioTracks().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){e.forEach(function(e,t){e.lang||(e.lang=M(e.name)),"English"===e.lang&&o.setAudioTrack(t)}),o._player.dispatchEvent("audioTracks",e)}),e.captioned().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._player.dispatchEvent("captioned",e||!!o._msi.manifest.hlsHasClosedCaptions)}),e.captionsEnabled().pipe(bt(this._notInPlaybackState$)).subscribe(function(e){o._playbackSettings.showingCaptions=e,o._meta.logger.info("Dispatching captionsShowing: "+e),o._player.dispatchEvent("captionsShowing",e)})},e}(ki),Ri=function(r){function e(e,t){var n=r.call(this)||this;return n.previousState=e,n.data=t,n}return k(e,r),Object.defineProperty(e.prototype,"stateName",{get:function(){return"Terminal"},enumerable:!0,configurable:!0}),e.prototype.enter=function(){r.prototype.enter.call(this,{previousState:this.previousState.stateName,data:this.data}),this._tsi.trackOneDSEvent&&this.data!==e.TERMINAL_STATE_VIA_DESTROY&&this._tsi.trackOneDSEvent({name:"microsoft_mixer_player_streamloadfailed",data:{reason:this.data?JSON.stringify(this.data):"unknown"}}),this._tsi.transport&&this._tsi.transport.destroy()},e.prototype.error=function(){},e.prototype.destroy=function(){},e.prototype.getCurrentTransportType=function(){},e.prototype.getStatsInterval=function(){return-1},e.prototype.isPlaying=function(){return!1},e.prototype.loadStream=function(){return A(this,void 0,void 0,function(){return N(this,function(e){return[2,Promise.resolve()]})})},e.prototype.loadVOD=function(){return A(this,void 0,void 0,function(){return N(this,function(e){return[2,Promise.resolve()]})})},e.prototype.pause=function(){},e.prototype.play=function(){},e.prototype.setAudioOnly=function(){},e.prototype.setAudioTrack=function(){},e.prototype.setCaptionsShowing=function(){},e.prototype.setMute=function(){},e.prototype.setQuality=function(){},e.prototype.getPlayerProfileTime=function(){return{profileStartLoadStream:-1,profileEndLoadStream:-1}},e.prototype.stop=function(){},e.prototype.switchToFTL=function(){},e.prototype.switchToHLS=function(){},e.TERMINAL_STATE_VIA_DESTROY="Destroyed",e}(ki);var Hi="mixer.video_settings";if(O){var qi=window.localStorage.getItem(Hi);if(qi){var Bi=void 0;try{Bi=JSON.parse(qi)}catch(e){Bi={}}var Gi=Date.now();(!Bi.initTime||864e5<Gi-Bi.initTime)&&window.localStorage.setItem(Hi,JSON.stringify({initTime:Gi,autoplay:!0,muted:!1,volume:.6}))}}var ji=function(){function e(e){var s=this;this._mp=new t.MixerPlayerNew,this._reloadsRemaining=2,this.keyboardKeydownHandler=function(e){if(229!==e.keyCode&&"Shift"!==e.key){var t=s.keyboardKeyCode.shift();if(!s.debugMenu&&t&&e.key===t){if(0===s.keyboardKeyCode.length)!!document.querySelector(".debug-menu")||(s.createDebugMenuHandler(),s.keyboardKeyCode=I.slice())}else s.keyboardKeyCode.length!==I.length&&(s.keyboardKeyCode=I.slice()),"Escape"===e.key?s.destroyDebugMenuHandler():"Enter"===e.key&&s.sdkLoaderHandler()}},this.gamepadKeydownHandler=function(e){if(229!==e.keyCode){var t=s.gamepadKeyCode.shift();if(!s.debugMenu&&t&&e.key===t){if(0===s.gamepadKeyCode.length)!!document.querySelector(".debug-menu")||(s.createDebugMenuHandler(),s.gamepadKeyCode=C.slice())}else if(s.gamepadKeyCode.length!==C.length&&(s.gamepadKeyCode=C.slice()),"GamepadB"===e.key)s.debugMenu&&(e.preventDefault(),e.stopPropagation(),s.destroyDebugMenuHandler());else if("GamepadDPadDown"===e.key||"GamepadLeftThumbstickDown"===e.key||"GamepadDPadUp"===e.key||"GamepadLeftThumbstickUp"===e.key)s.debugMenu&&(e.preventDefault(),e.stopPropagation());else if("GamepadDPadLeft"===e.key||"GamepadLeftThumbstickLeft"===e.key||"GamepadDPadRight"===e.key||"GamepadLeftThumbstickRight"===e.key){if(s.debugMenu){e.preventDefault(),e.stopPropagation();var n=document.activeElement,r=document.querySelector(".debug-menu-form");if(n&&r){var i=Array.from(r.children),o=i.findIndex(function(e){return e===n});"GamepadDPadLeft"===e.key||"GamepadLeftThumbstickLeft"===e.key?0<o&&i[o-1].focus():"GamepadDPadRight"!==e.key&&"GamepadLeftThumbstickRight"!==e.key||o<i.length&&i[o+1].focus()}}}else"GamepadMenu"===e.key&&s.sdkLoaderHandler()}},this.inputHandler=function(e){var t=s.inputKeyCode.shift(),n=e;!s.debugMenu&&t&&n.data&&n.data.length&&n.data.charAt(n.data.length-1)===t?0===s.inputKeyCode.length&&(!!document.querySelector(".debug-menu")||(s.createDebugMenuHandler(),s.inputKeyCode=I.slice())):s.inputKeyCode.length!==I.length&&(s.inputKeyCode=I.slice())},this.setupDebugMenuButtonHandlers=function(){var e,t,n,r;e=function(){s.sdkLoaderHandler()},(t=document.querySelector(".debug-menu-submit-button"))&&(t.onclick=function(){e()}),n=function(){s.destroyDebugMenuHandler()},(r=document.querySelector(".debug-menu-exit-button"))&&(r.onclick=function(){n()})},this.sdkLoaderHandler=function(){s.debugMenu&&new Promise(function(e,t){var n=document.querySelectorAll(".debug-menu-radio-input"),r=document.querySelector(".debug-menu-sdk-input");if(n&&0<n.length&&r){var i="";Array.from(n).forEach(function(e){if(e){var t=e;t.checked&&(i=t.value)}});var o=r.value;i&&o&&(l("http://web.archive.org/web/20190528235110/https://ning.videosvc.mixer.com/api/video/v2/player?"+i+"="+o),e())}t()}).then(function(){s.destroyDebugMenuHandler()}).catch(function(){D()})},this.createDebugMenuHandler=function(){var e=s._options,t=e.telemetry,n=e.sessionGuid,r=E(["MixerPlayer","MixerPlayer","VERSION"])(window);s.debugMenu=function(e,t,n){void 0===e&&(e=T),void 0===t&&(t=T),void 0===n&&(n=T);var r=document.querySelector("light-player");if(r){var i=document.createElement("div");i.className="debug-menu";var o="\n            <div class='debug-menu-container debug-menu-container-width debug-menu-display-flex debug-menu-border-radius-large'>\n                <div>\n                    <h2 class='debug-menu-margin-center debug-menu-color-light-blue'>Video Debug Menu</h2>\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>cv:</span>\n                    "+e+"\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>sg:</span>\n                    "+t+"\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>mixerplayer version:</span>\n                    "+n+"\n                </div>\n                <div>\n                    <div class='debug-menu-display-flex'>\n                        <h4 class='debug-menu-color-dark-blue debug-menu-margin-center'>SDK Selection</h4>\n                    </div>\n                    <div class='debug-menu-form'>\n                        <label class='debug-menu-radio debug-menu-focus-outline' tabindex='0'>\n                            <input type='radio' name='debugMenuParam' class='debug-menu-radio-input' value='v' checked>\n                            Version\n                        </label>\n                        <label class='debug-menu-radio debug-menu-focus-outline' tabindex='0'>\n                            <input type='radio' name='debugMenuParam' class='debug-menu-radio-input' value='p'>\n                            Path\n                        </label>\n                        <input class='debug-menu-sdk-input debug-menu-border-radius-small debug-menu-focus-outline' tabindex='0'/>\n                        <button class='debug-menu-submit-button debug-menu-button debug-menu-border-radius-small debug-menu-focus-outline'\n                            tabindex='0'>Submit</button>\n                        <button class='debug-menu-exit-button debug-menu-button debug-menu-border-radius-small debug-menu-focus-outline'\n                            tabindex='0'>X</button>\n                    </div>\n                </div>\n                <style>\n                    .debug-menu {\n                        display: flex;\n                        flex-direction: column;\n                    }\n\n                    .debug-menu-container {\n                        z-index: 100;\n                        flex-direction: column;\n                        position: relative;\n                        background-color: #25374c;\n                        color: white;\n                        align-items: center;\n                        border: 0.1em solid white;\n                        left: 0;\n                        right: 0;\n                        margin: auto;\n                        padding: 1em 0;\n                    }\n\n                    .debug-menu-container-width {\n                        width: 60%;\n                    }\n\n                    @media screen and (max-width: 480px) {\n                        .debug-menu-container-width {\n                            width: 100%;\n                        }\n                    }\n\n                    .debug-menu-form {\n                        text-align: center;\n                    }\n\n                    .debug-menu-label {\n                        font-weight: bold;\n                    }\n\n                    .debug-menu-radio input {\n                        cursor: pointer;\n                    }\n\n                    .debug-menu-sdk-input {\n                        width: 35%;\n                    }\n\n                    .debug-menu-button {\n                        border: 0.1em solid white;\n                        padding: 0.2em;\n                        cursor: pointer;\n                    }\n\n                    .debug-menu-focus-outline:focus {\n                        outline: #00bef8 solid 0.3em;\n                    }\n\n                    .debug-menu-display-flex {\n                        display: flex;\n                    }\n\n                    .debug-menu-margin-center {\n                        margin: 1em auto;\n                    }\n\n                    .debug-menu-color-light-blue {\n                        color: #00bcf2;\n                    }\n\n                    .debug-menu-color-dark-blue {\n                        color: #0074dc;\n                    }\n\n                    .debug-menu-border-radius-small {\n                        border-radius: 0.5em;\n                    }\n\n                    .debug-menu-border-radius-large {\n                        border-radius: 2em;\n                    }\n                </style>\n            </div>\n        ";return i.insertAdjacentHTML("beforeend",o),r.appendChild(i),D(500),i}}(t?t.getXpertCv():"",n,r),s.setupDebugMenuButtonHandlers()},this.destroyDebugMenuHandler=function(){var r;(r=s.debugMenu,new Promise(function(e,t){var n;r&&(n=r)&&(n.remove(),1)&&e(),t()})).then(function(){return s.debugMenu=void 0}).catch(function(){})},this._options=e,O&&(this.keyboardKeyCode=I.slice(),this.gamepadKeyCode=C.slice(),this.inputKeyCode=I.slice(),document.addEventListener("keydown",this.keyboardKeydownHandler,{capture:!0}),document.addEventListener("keydown",this.gamepadKeydownHandler,{capture:!0}),document.addEventListener("input",this.inputHandler))}return Object.defineProperty(e.prototype,"shouldReload",{get:function(){return 0<this._reloadsRemaining},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTransport",{get:function(){return this._mp.state._tsi.transport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distHostName",{get:function(){return this._mp.state._tsi.hostName},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){this._mp.addEventListener(this._translateEventTypes(e),t)},e.prototype.removeEventListener=function(e,t){this._mp.removeEventListener(this._translateEventTypes(e),t)},e.prototype.setMixerPlayerOptions=function(e){this._options=e},e.prototype.destroy=function(){return O&&(this.destroyDebugMenuHandler(),document.removeEventListener("keydown",this.keyboardKeydownHandler,{capture:!0}),document.removeEventListener("keydown",this.gamepadKeydownHandler,{capture:!0}),document.removeEventListener("input",this.inputHandler)),this._mp.destroy()},e.prototype.getCurrentTransportType=function(){return this._mp.getCurrentTransportType()},e.prototype.getErrorMap=function(){var e=this._mp.state._errorInfo;return{ftl:e.ftlErrorCount,hls:e.hlsErrorCount,dash:0}},e.prototype.getPlayerProfileTime=function(){return this._mp.getPlayerPorfileTime()},e.prototype.getQualityStats=function(){var e=this.currentTransport;return e?e.getQualityStats():{currentEncodeFps:30,isSource:!1}},e.prototype.getStatsInterval=function(){return this._mp.getStatsInterval()},e.prototype.isFtl=function(){return"ftl"===this._mp.getCurrentTransportType()},e.prototype.isPlaying=function(){return this._mp.isPlaying()},e.prototype.loadStream=function(t,n,r){var e=this;return this._reloadFunc=function(){return e._promisefyLoad(function(){return A(e,void 0,void 0,function(){return N(this,function(e){return[2,this._mp.loadStream(t,n,this._options,r)]})})})},this._reloadFunc()},e.prototype.loadVOD=function(t){var e=this;return this._reloadFunc=function(){return e._promisefyLoad(function(){return A(e,void 0,void 0,function(){return N(this,function(e){return[2,this._mp.loadVOD(t,this._options)]})})})},this._reloadFunc()},e.prototype.pause=function(){return this._mp.pause()},e.prototype.play=function(){return this._mp.play()},e.prototype.reload=function(){if(this.shouldReload&&this._reloadFunc)return this._reloadsRemaining--,this._reloadFunc()},e.prototype.setAudioOnly=function(e){return this._mp.setAudioOnly(e)},e.prototype.setAudioTrack=function(e){return this._mp.setAudioTrack(e)},e.prototype.setCaptionsShowing=function(e){return this._mp.setCaptionsShowing(e)},e.prototype.setMute=function(e){return this._mp.setMute(e)},e.prototype.setQuality=function(e){return this._mp.setQuality(e)},e.prototype.setAuto=function(e){return this._mp.setAuto(e)},e.prototype.getAuto=function(){return this._mp.getAuto()},e.prototype.stop=function(){return this._mp.stop()},e.prototype.switchToFTL=function(){var e=this;return this._promisefyLoad(function(){return e._mp.switchToFTL()})},e.prototype.switchToHLS=function(){return this._mp.switchToHLS()},e.prototype._promisefyLoad=function(r){var i=this;return new Promise(function(e,t){var n=function(){i._mp.removeEventListener("ftlReady",n),i._mp.removeEventListener("hlsReady",n),i._mp.removeEventListener("errorFatal",n),setTimeout(function(){return e()})};i._mp.addEventListener("ftlReady",n),i._mp.addEventListener("hlsReady",n),i._mp.addEventListener("errorFatal",function(e){i._mp.removeEventListener("ftlReady",n),i._mp.removeEventListener("hlsReady",n),i._mp.removeEventListener("errorFatal",n),t(e)}),r()})},e.prototype._translateEventTypes=function(e){var t;switch(e){case"playerDestroyed":t="destroyed";break;case"ftlStream":t="ftlReady";break;default:t=e}return t},e.RELOAD_TIMEOUT=12e3,e.VERSION=t.MixerPlayerNew.VERSION,e}();return t.MixerPlayer=ji,t.selectQualityByName=function(t){return function(e){return t?e.find(function(e){return e.displayName===t}):void 0}},t.selectQualityByBitrate=function(t){return function(e){return bi(e,function(e){return Math.abs(e.bitrate-t)})[0]}},t.selectQualityByHeight=function(t){return function(e){return bi(e,function(e){return Math.abs(e.height-t)})[0]}},t.selectFirstQuality=_i,t.composeQuality=Si,t.getFalconUrl=wi,t.getConductorUrl=Ti,t.fetchConnectionURIs=Ci,t.fetchFalconManifest=function(e,t,n){return Ci(e,t).then(function(e){return{response:e}})},t}({});


}
/*
     FILE ARCHIVED ON 23:51:10 May 28, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 06:51:19 Dec 05, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 189.86
  exclusion.robots: 117.086
  exclusion.robots.policy: 117.07
  xauthn.identify: 76.434
  xauthn.chkprivs: 40.069
  RedisCDXSource: 1.997
  esindex: 0.015
  LoadShardBlock: 47.296 (3)
  PetaboxLoader3.datanode: 73.669 (4)
  CDXLines.iter: 20.49 (3)
  load_resource: 87.236
  PetaboxLoader3.resolve: 53.736
*/